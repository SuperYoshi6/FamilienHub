function aw(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function _d(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function jo(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var _c={exports:{}},wo={},bc={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp;function lw(){if(mp)return et;mp=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.iterator;function w(I){return I===null||typeof I!="object"?null:(I=x&&I[x]||I["@@iterator"],typeof I=="function"?I:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function E(I,z,pe){this.props=I,this.context=z,this.refs=T,this.updater=pe||b}E.prototype.isReactComponent={},E.prototype.setState=function(I,z){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,z,"setState")},E.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function N(){}N.prototype=E.prototype;function U(I,z,pe){this.props=I,this.context=z,this.refs=T,this.updater=pe||b}var A=U.prototype=new N;A.constructor=U,S(A,E.prototype),A.isPureReactComponent=!0;var F=Array.isArray,q=Object.prototype.hasOwnProperty,Y={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function ue(I,z,pe){var $,Q={},de=null,oe=null;if(z!=null)for($ in z.ref!==void 0&&(oe=z.ref),z.key!==void 0&&(de=""+z.key),z)q.call(z,$)&&!B.hasOwnProperty($)&&(Q[$]=z[$]);var Ie=arguments.length-2;if(Ie===1)Q.children=pe;else if(1<Ie){for(var He=Array(Ie),qe=0;qe<Ie;qe++)He[qe]=arguments[qe+2];Q.children=He}if(I&&I.defaultProps)for($ in Ie=I.defaultProps,Ie)Q[$]===void 0&&(Q[$]=Ie[$]);return{$$typeof:t,type:I,key:de,ref:oe,props:Q,_owner:Y.current}}function Z(I,z){return{$$typeof:t,type:I.type,key:z,ref:I.ref,props:I.props,_owner:I._owner}}function me(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function _e(I){var z={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(pe){return z[pe]})}var Pe=/\/+/g;function we(I,z){return typeof I=="object"&&I!==null&&I.key!=null?_e(""+I.key):z.toString(36)}function $e(I,z,pe,$,Q){var de=typeof I;(de==="undefined"||de==="boolean")&&(I=null);var oe=!1;if(I===null)oe=!0;else switch(de){case"string":case"number":oe=!0;break;case"object":switch(I.$$typeof){case t:case e:oe=!0}}if(oe)return oe=I,Q=Q(oe),I=$===""?"."+we(oe,0):$,F(Q)?(pe="",I!=null&&(pe=I.replace(Pe,"$&/")+"/"),$e(Q,z,pe,"",function(qe){return qe})):Q!=null&&(me(Q)&&(Q=Z(Q,pe+(!Q.key||oe&&oe.key===Q.key?"":(""+Q.key).replace(Pe,"$&/")+"/")+I)),z.push(Q)),1;if(oe=0,$=$===""?".":$+":",F(I))for(var Ie=0;Ie<I.length;Ie++){de=I[Ie];var He=$+we(de,Ie);oe+=$e(de,z,pe,He,Q)}else if(He=w(I),typeof He=="function")for(I=He.call(I),Ie=0;!(de=I.next()).done;)de=de.value,He=$+we(de,Ie++),oe+=$e(de,z,pe,He,Q);else if(de==="object")throw z=String(I),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return oe}function Je(I,z,pe){if(I==null)return I;var $=[],Q=0;return $e(I,$,"","",function(de){return z.call(pe,de,Q++)}),$}function Le(I){if(I._status===-1){var z=I._result;z=z(),z.then(function(pe){(I._status===0||I._status===-1)&&(I._status=1,I._result=pe)},function(pe){(I._status===0||I._status===-1)&&(I._status=2,I._result=pe)}),I._status===-1&&(I._status=0,I._result=z)}if(I._status===1)return I._result.default;throw I._result}var Te={current:null},J={transition:null},W={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:J,ReactCurrentOwner:Y};function G(){throw Error("act(...) is not supported in production builds of React.")}return et.Children={map:Je,forEach:function(I,z,pe){Je(I,function(){z.apply(this,arguments)},pe)},count:function(I){var z=0;return Je(I,function(){z++}),z},toArray:function(I){return Je(I,function(z){return z})||[]},only:function(I){if(!me(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},et.Component=E,et.Fragment=n,et.Profiler=i,et.PureComponent=U,et.StrictMode=r,et.Suspense=p,et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,et.act=G,et.cloneElement=function(I,z,pe){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var $=S({},I.props),Q=I.key,de=I.ref,oe=I._owner;if(z!=null){if(z.ref!==void 0&&(de=z.ref,oe=Y.current),z.key!==void 0&&(Q=""+z.key),I.type&&I.type.defaultProps)var Ie=I.type.defaultProps;for(He in z)q.call(z,He)&&!B.hasOwnProperty(He)&&($[He]=z[He]===void 0&&Ie!==void 0?Ie[He]:z[He])}var He=arguments.length-2;if(He===1)$.children=pe;else if(1<He){Ie=Array(He);for(var qe=0;qe<He;qe++)Ie[qe]=arguments[qe+2];$.children=Ie}return{$$typeof:t,type:I.type,key:Q,ref:de,props:$,_owner:oe}},et.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:a,_context:I},I.Consumer=I},et.createElement=ue,et.createFactory=function(I){var z=ue.bind(null,I);return z.type=I,z},et.createRef=function(){return{current:null}},et.forwardRef=function(I){return{$$typeof:f,render:I}},et.isValidElement=me,et.lazy=function(I){return{$$typeof:y,_payload:{_status:-1,_result:I},_init:Le}},et.memo=function(I,z){return{$$typeof:g,type:I,compare:z===void 0?null:z}},et.startTransition=function(I){var z=J.transition;J.transition={};try{I()}finally{J.transition=z}},et.unstable_act=G,et.useCallback=function(I,z){return Te.current.useCallback(I,z)},et.useContext=function(I){return Te.current.useContext(I)},et.useDebugValue=function(){},et.useDeferredValue=function(I){return Te.current.useDeferredValue(I)},et.useEffect=function(I,z){return Te.current.useEffect(I,z)},et.useId=function(){return Te.current.useId()},et.useImperativeHandle=function(I,z,pe){return Te.current.useImperativeHandle(I,z,pe)},et.useInsertionEffect=function(I,z){return Te.current.useInsertionEffect(I,z)},et.useLayoutEffect=function(I,z){return Te.current.useLayoutEffect(I,z)},et.useMemo=function(I,z){return Te.current.useMemo(I,z)},et.useReducer=function(I,z,pe){return Te.current.useReducer(I,z,pe)},et.useRef=function(I){return Te.current.useRef(I)},et.useState=function(I){return Te.current.useState(I)},et.useSyncExternalStore=function(I,z,pe){return Te.current.useSyncExternalStore(I,z,pe)},et.useTransition=function(){return Te.current.useTransition()},et.version="18.3.1",et}var yp;function bd(){return yp||(yp=1,bc.exports=lw()),bc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp;function uw(){if(vp)return wo;vp=1;var t=bd(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(f,p,g){var y,x={},w=null,b=null;g!==void 0&&(w=""+g),p.key!==void 0&&(w=""+p.key),p.ref!==void 0&&(b=p.ref);for(y in p)r.call(p,y)&&!a.hasOwnProperty(y)&&(x[y]=p[y]);if(f&&f.defaultProps)for(y in p=f.defaultProps,p)x[y]===void 0&&(x[y]=p[y]);return{$$typeof:e,type:f,key:w,ref:b,props:x,_owner:i.current}}return wo.Fragment=n,wo.jsx=l,wo.jsxs=l,wo}var xp;function cw(){return xp||(xp=1,_c.exports=uw()),_c.exports}var c=cw(),j=bd();const e0=_d(j);var za={},kc={exports:{}},An={},Sc={exports:{}},Ec={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp;function dw(){return wp||(wp=1,(function(t){function e(J,W){var G=J.length;J.push(W);e:for(;0<G;){var I=G-1>>>1,z=J[I];if(0<i(z,W))J[I]=W,J[G]=z,G=I;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var W=J[0],G=J.pop();if(G!==W){J[0]=G;e:for(var I=0,z=J.length,pe=z>>>1;I<pe;){var $=2*(I+1)-1,Q=J[$],de=$+1,oe=J[de];if(0>i(Q,G))de<z&&0>i(oe,Q)?(J[I]=oe,J[de]=G,I=de):(J[I]=Q,J[$]=G,I=$);else if(de<z&&0>i(oe,G))J[I]=oe,J[de]=G,I=de;else break e}}return W}function i(J,W){var G=J.sortIndex-W.sortIndex;return G!==0?G:J.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,f=l.now();t.unstable_now=function(){return l.now()-f}}var p=[],g=[],y=1,x=null,w=3,b=!1,S=!1,T=!1,E=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(J){for(var W=n(g);W!==null;){if(W.callback===null)r(g);else if(W.startTime<=J)r(g),W.sortIndex=W.expirationTime,e(p,W);else break;W=n(g)}}function F(J){if(T=!1,A(J),!S)if(n(p)!==null)S=!0,Le(q);else{var W=n(g);W!==null&&Te(F,W.startTime-J)}}function q(J,W){S=!1,T&&(T=!1,N(ue),ue=-1),b=!0;var G=w;try{for(A(W),x=n(p);x!==null&&(!(x.expirationTime>W)||J&&!_e());){var I=x.callback;if(typeof I=="function"){x.callback=null,w=x.priorityLevel;var z=I(x.expirationTime<=W);W=t.unstable_now(),typeof z=="function"?x.callback=z:x===n(p)&&r(p),A(W)}else r(p);x=n(p)}if(x!==null)var pe=!0;else{var $=n(g);$!==null&&Te(F,$.startTime-W),pe=!1}return pe}finally{x=null,w=G,b=!1}}var Y=!1,B=null,ue=-1,Z=5,me=-1;function _e(){return!(t.unstable_now()-me<Z)}function Pe(){if(B!==null){var J=t.unstable_now();me=J;var W=!0;try{W=B(!0,J)}finally{W?we():(Y=!1,B=null)}}else Y=!1}var we;if(typeof U=="function")we=function(){U(Pe)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,Je=$e.port2;$e.port1.onmessage=Pe,we=function(){Je.postMessage(null)}}else we=function(){E(Pe,0)};function Le(J){B=J,Y||(Y=!0,we())}function Te(J,W){ue=E(function(){J(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){S||b||(S=!0,Le(q))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(p)},t.unstable_next=function(J){switch(w){case 1:case 2:case 3:var W=3;break;default:W=w}var G=w;w=W;try{return J()}finally{w=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,W){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var G=w;w=J;try{return W()}finally{w=G}},t.unstable_scheduleCallback=function(J,W,G){var I=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?I+G:I):G=I,J){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=G+z,J={id:y++,callback:W,priorityLevel:J,startTime:G,expirationTime:z,sortIndex:-1},G>I?(J.sortIndex=G,e(g,J),n(p)===null&&J===n(g)&&(T?(N(ue),ue=-1):T=!0,Te(F,G-I))):(J.sortIndex=z,e(p,J),S||b||(S=!0,Le(q))),J},t.unstable_shouldYield=_e,t.unstable_wrapCallback=function(J){var W=w;return function(){var G=w;w=W;try{return J.apply(this,arguments)}finally{w=G}}}})(Ec)),Ec}var _p;function fw(){return _p||(_p=1,Sc.exports=dw()),Sc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp;function hw(){if(bp)return An;bp=1;var t=bd(),e=fw();function n(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,o){l(s,o),l(s+"Capture",o)}function l(s,o){for(i[s]=o,s=0;s<o.length;s++)r.add(o[s])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},x={};function w(s){return p.call(x,s)?!0:p.call(y,s)?!1:g.test(s)?x[s]=!0:(y[s]=!0,!1)}function b(s,o,u,m){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return m?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function S(s,o,u,m){if(o===null||typeof o>"u"||b(s,o,u,m))return!0;if(m)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function T(s,o,u,m,v,_,k){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=m,this.attributeNamespace=v,this.mustUseProperty=u,this.propertyName=s,this.type=o,this.sanitizeURL=_,this.removeEmptyString=k}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){E[s]=new T(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];E[o]=new T(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){E[s]=new T(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){E[s]=new T(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){E[s]=new T(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){E[s]=new T(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){E[s]=new T(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){E[s]=new T(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){E[s]=new T(s,5,!1,s.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function U(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(N,U);E[o]=new T(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(N,U);E[o]=new T(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(N,U);E[o]=new T(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){E[s]=new T(s,1,!1,s.toLowerCase(),null,!1,!1)}),E.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){E[s]=new T(s,1,!1,s.toLowerCase(),null,!0,!0)});function A(s,o,u,m){var v=E.hasOwnProperty(o)?E[o]:null;(v!==null?v.type!==0:m||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(S(o,u,v,m)&&(u=null),m||v===null?w(o)&&(u===null?s.removeAttribute(o):s.setAttribute(o,""+u)):v.mustUseProperty?s[v.propertyName]=u===null?v.type===3?!1:"":u:(o=v.attributeName,m=v.attributeNamespace,u===null?s.removeAttribute(o):(v=v.type,u=v===3||v===4&&u===!0?"":""+u,m?s.setAttributeNS(m,o,u):s.setAttribute(o,u))))}var F=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,q=Symbol.for("react.element"),Y=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),ue=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),me=Symbol.for("react.provider"),_e=Symbol.for("react.context"),Pe=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),$e=Symbol.for("react.suspense_list"),Je=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),J=Symbol.iterator;function W(s){return s===null||typeof s!="object"?null:(s=J&&s[J]||s["@@iterator"],typeof s=="function"?s:null)}var G=Object.assign,I;function z(s){if(I===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);I=o&&o[1]||""}return`
`+I+s}var pe=!1;function $(s,o){if(!s||pe)return"";pe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(V){var m=V}Reflect.construct(s,[],o)}else{try{o.call()}catch(V){m=V}s.call(o.prototype)}else{try{throw Error()}catch(V){m=V}s()}}catch(V){if(V&&m&&typeof V.stack=="string"){for(var v=V.stack.split(`
`),_=m.stack.split(`
`),k=v.length-1,C=_.length-1;1<=k&&0<=C&&v[k]!==_[C];)C--;for(;1<=k&&0<=C;k--,C--)if(v[k]!==_[C]){if(k!==1||C!==1)do if(k--,C--,0>C||v[k]!==_[C]){var R=`
`+v[k].replace(" at new "," at ");return s.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",s.displayName)),R}while(1<=k&&0<=C);break}}}finally{pe=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?z(s):""}function Q(s){switch(s.tag){case 5:return z(s.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return s=$(s.type,!1),s;case 11:return s=$(s.type.render,!1),s;case 1:return s=$(s.type,!0),s;default:return""}}function de(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case B:return"Fragment";case Y:return"Portal";case Z:return"Profiler";case ue:return"StrictMode";case we:return"Suspense";case $e:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case _e:return(s.displayName||"Context")+".Consumer";case me:return(s._context.displayName||"Context")+".Provider";case Pe:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Je:return o=s.displayName||null,o!==null?o:de(s.type)||"Memo";case Le:o=s._payload,s=s._init;try{return de(s(o))}catch{}}return null}function oe(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(o);case 8:return o===ue?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ie(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function He(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function qe(s){var o=He(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),m=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,_=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return v.call(this)},set:function(k){m=""+k,_.call(this,k)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return m},setValue:function(k){m=""+k},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function mt(s){s._valueTracker||(s._valueTracker=qe(s))}function yt(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),m="";return s&&(m=He(s)?s.checked?"true":"false":s.value),s=m,s!==u?(o.setValue(s),!0):!1}function kt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function he(s,o){var u=o.checked;return G({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function ce(s,o){var u=o.defaultValue==null?"":o.defaultValue,m=o.checked!=null?o.checked:o.defaultChecked;u=Ie(o.value!=null?o.value:u),s._wrapperState={initialChecked:m,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ue(s,o){o=o.checked,o!=null&&A(s,"checked",o,!1)}function Ae(s,o){Ue(s,o);var u=Ie(o.value),m=o.type;if(u!=null)m==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(m==="submit"||m==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?nt(s,o.type,u):o.hasOwnProperty("defaultValue")&&nt(s,o.type,Ie(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function Xe(s,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var m=o.type;if(!(m!=="submit"&&m!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,u||o===s.value||(s.value=o),s.defaultValue=o}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function nt(s,o,u){(o!=="number"||kt(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var dt=Array.isArray;function At(s,o,u,m){if(s=s.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<s.length;u++)v=o.hasOwnProperty("$"+s[u].value),s[u].selected!==v&&(s[u].selected=v),v&&m&&(s[u].defaultSelected=!0)}else{for(u=""+Ie(u),o=null,v=0;v<s.length;v++){if(s[v].value===u){s[v].selected=!0,m&&(s[v].defaultSelected=!0);return}o!==null||s[v].disabled||(o=s[v])}o!==null&&(o.selected=!0)}}function St(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return G({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Ft(s,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(n(92));if(dt(u)){if(1<u.length)throw Error(n(93));u=u[0]}o=u}o==null&&(o=""),u=o}s._wrapperState={initialValue:Ie(u)}}function Qt(s,o){var u=Ie(o.value),m=Ie(o.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),o.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),m!=null&&(s.defaultValue=""+m)}function K(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function ve(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ge(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?ve(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var ft,Ze=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,m,v){MSApp.execUnsafeLocalFunction(function(){return s(o,u,m,v)})}:s})(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(ft=ft||document.createElement("div"),ft.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=ft.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function ot(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var Et={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_n=["Webkit","ms","Moz","O"];Object.keys(Et).forEach(function(s){_n.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),Et[o]=Et[s]})});function hn(s,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||Et.hasOwnProperty(s)&&Et[s]?(""+o).trim():o+"px"}function Vt(s,o){s=s.style;for(var u in o)if(o.hasOwnProperty(u)){var m=u.indexOf("--")===0,v=hn(u,o[u],m);u==="float"&&(u="cssFloat"),m?s.setProperty(u,v):s[u]=v}}var zn=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function It(s,o){if(o){if(zn[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function pn(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ne=null;function Ke(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var rt=null,ht=null,Re=null;function je(s){if(s=so(s)){if(typeof rt!="function")throw Error(n(280));var o=s.stateNode;o&&(o=na(o),rt(s.stateNode,s.type,o))}}function ut(s){ht?Re?Re.push(s):Re=[s]:ht=s}function Bt(){if(ht){var s=ht,o=Re;if(Re=ht=null,je(s),o)for(s=0;s<o.length;s++)je(o[s])}}function Mn(s,o){return s(o)}function gn(){}var Nr=!1;function qr(s,o,u){if(Nr)return s(o,u);Nr=!0;try{return Mn(s,o,u)}finally{Nr=!1,(ht!==null||Re!==null)&&(gn(),Bt())}}function Xn(s,o){var u=s.stateNode;if(u===null)return null;var m=na(u);if(m===null)return null;u=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var Zn=!1;if(f)try{var er={};Object.defineProperty(er,"passive",{get:function(){Zn=!0}}),window.addEventListener("test",er,er),window.removeEventListener("test",er,er)}catch{Zn=!1}function Wr(s,o,u,m,v,_,k,C,R){var V=Array.prototype.slice.call(arguments,3);try{o.apply(u,V)}catch(ee){this.onError(ee)}}var tr=!1,gr=null,mr=!1,Ar=null,xs={onError:function(s){tr=!0,gr=s}};function ws(s,o,u,m,v,_,k,C,R){tr=!1,gr=null,Wr.apply(xs,arguments)}function _s(s,o,u,m,v,_,k,C,R){if(ws.apply(this,arguments),tr){if(tr){var V=gr;tr=!1,gr=null}else throw Error(n(198));mr||(mr=!0,Ar=V)}}function bn(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function Ir(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function re(s){if(bn(s)!==s)throw Error(n(188))}function Me(s){var o=s.alternate;if(!o){if(o=bn(s),o===null)throw Error(n(188));return o!==s?null:s}for(var u=s,m=o;;){var v=u.return;if(v===null)break;var _=v.alternate;if(_===null){if(m=v.return,m!==null){u=m;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===u)return re(v),s;if(_===m)return re(v),o;_=_.sibling}throw Error(n(188))}if(u.return!==m.return)u=v,m=_;else{for(var k=!1,C=v.child;C;){if(C===u){k=!0,u=v,m=_;break}if(C===m){k=!0,m=v,u=_;break}C=C.sibling}if(!k){for(C=_.child;C;){if(C===u){k=!0,u=_,m=v;break}if(C===m){k=!0,m=_,u=v;break}C=C.sibling}if(!k)throw Error(n(189))}}if(u.alternate!==m)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?s:o}function D(s){return s=Me(s),s!==null?fe(s):null}function fe(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=fe(s);if(o!==null)return o;s=s.sibling}return null}var Ve=e.unstable_scheduleCallback,gt=e.unstable_cancelCallback,Tt=e.unstable_shouldYield,Qe=e.unstable_requestPaint,We=e.unstable_now,jt=e.unstable_getCurrentPriorityLevel,Vn=e.unstable_ImmediatePriority,Rr=e.unstable_UserBlockingPriority,nr=e.unstable_NormalPriority,bs=e.unstable_LowPriority,yr=e.unstable_IdlePriority,mn=null,nn=null;function vr(s){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(mn,s,void 0,(s.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:H,Js=Math.log,M=Math.LN2;function H(s){return s>>>=0,s===0?32:31-(Js(s)/M|0)|0}var se=64,le=4194304;function tt(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function sn(s,o){var u=s.pendingLanes;if(u===0)return 0;var m=0,v=s.suspendedLanes,_=s.pingedLanes,k=u&268435455;if(k!==0){var C=k&~v;C!==0?m=tt(C):(_&=k,_!==0&&(m=tt(_)))}else k=u&~v,k!==0?m=tt(k):_!==0&&(m=tt(_));if(m===0)return 0;if(o!==0&&o!==m&&(o&v)===0&&(v=m&-m,_=o&-o,v>=_||v===16&&(_&4194240)!==0))return o;if((m&4)!==0&&(m|=u&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=m;0<o;)u=31-rn(o),v=1<<u,m|=s[u],o&=~v;return m}function Ht(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gt(s,o){for(var u=s.suspendedLanes,m=s.pingedLanes,v=s.expirationTimes,_=s.pendingLanes;0<_;){var k=31-rn(_),C=1<<k,R=v[k];R===-1?((C&u)===0||(C&m)!==0)&&(v[k]=Ht(C,o)):R<=o&&(s.expiredLanes|=C),_&=~C}}function on(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function qt(){var s=se;return se<<=1,(se&4194240)===0&&(se=64),s}function Bn(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function xr(s,o,u){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-rn(o),s[o]=u}function kn(s,o){var u=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var m=s.eventTimes;for(s=s.expirationTimes;0<u;){var v=31-rn(u),_=1<<v;o[v]=0,m[v]=-1,s[v]=-1,u&=~_}}function Jr(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var m=31-rn(u),v=1<<m;v&o|s[m]&o&&(s[m]|=o),u&=~v}}var ct=0;function $o(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var wr,Ks,Kd,Yd,Qd,ql=!1,zo=[],Kr=null,Yr=null,Qr=null,Vi=new Map,Bi=new Map,Xr=[],Av="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xd(s,o){switch(s){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":Vi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bi.delete(o.pointerId)}}function Hi(s,o,u,m,v,_){return s===null||s.nativeEvent!==_?(s={blockedOn:o,domEventName:u,eventSystemFlags:m,nativeEvent:_,targetContainers:[v]},o!==null&&(o=so(o),o!==null&&Ks(o)),s):(s.eventSystemFlags|=m,o=s.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),s)}function Iv(s,o,u,m,v){switch(o){case"focusin":return Kr=Hi(Kr,s,o,u,m,v),!0;case"dragenter":return Yr=Hi(Yr,s,o,u,m,v),!0;case"mouseover":return Qr=Hi(Qr,s,o,u,m,v),!0;case"pointerover":var _=v.pointerId;return Vi.set(_,Hi(Vi.get(_)||null,s,o,u,m,v)),!0;case"gotpointercapture":return _=v.pointerId,Bi.set(_,Hi(Bi.get(_)||null,s,o,u,m,v)),!0}return!1}function Zd(s){var o=ks(s.target);if(o!==null){var u=bn(o);if(u!==null){if(o=u.tag,o===13){if(o=Ir(u),o!==null){s.blockedOn=o,Qd(s.priority,function(){Kd(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Vo(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=Jl(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var m=new u.constructor(u.type,u);ne=m,u.target.dispatchEvent(m),ne=null}else return o=so(u),o!==null&&Ks(o),s.blockedOn=u,!1;o.shift()}return!0}function ef(s,o,u){Vo(s)&&u.delete(o)}function Rv(){ql=!1,Kr!==null&&Vo(Kr)&&(Kr=null),Yr!==null&&Vo(Yr)&&(Yr=null),Qr!==null&&Vo(Qr)&&(Qr=null),Vi.forEach(ef),Bi.forEach(ef)}function Gi(s,o){s.blockedOn===o&&(s.blockedOn=null,ql||(ql=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Rv)))}function qi(s){function o(v){return Gi(v,s)}if(0<zo.length){Gi(zo[0],s);for(var u=1;u<zo.length;u++){var m=zo[u];m.blockedOn===s&&(m.blockedOn=null)}}for(Kr!==null&&Gi(Kr,s),Yr!==null&&Gi(Yr,s),Qr!==null&&Gi(Qr,s),Vi.forEach(o),Bi.forEach(o),u=0;u<Xr.length;u++)m=Xr[u],m.blockedOn===s&&(m.blockedOn=null);for(;0<Xr.length&&(u=Xr[0],u.blockedOn===null);)Zd(u),u.blockedOn===null&&Xr.shift()}var Ys=F.ReactCurrentBatchConfig,Bo=!0;function Pv(s,o,u,m){var v=ct,_=Ys.transition;Ys.transition=null;try{ct=1,Wl(s,o,u,m)}finally{ct=v,Ys.transition=_}}function Mv(s,o,u,m){var v=ct,_=Ys.transition;Ys.transition=null;try{ct=4,Wl(s,o,u,m)}finally{ct=v,Ys.transition=_}}function Wl(s,o,u,m){if(Bo){var v=Jl(s,o,u,m);if(v===null)du(s,o,m,Ho,u),Xd(s,m);else if(Iv(v,s,o,u,m))m.stopPropagation();else if(Xd(s,m),o&4&&-1<Av.indexOf(s)){for(;v!==null;){var _=so(v);if(_!==null&&wr(_),_=Jl(s,o,u,m),_===null&&du(s,o,m,Ho,u),_===v)break;v=_}v!==null&&m.stopPropagation()}else du(s,o,m,null,u)}}var Ho=null;function Jl(s,o,u,m){if(Ho=null,s=Ke(m),s=ks(s),s!==null)if(o=bn(s),o===null)s=null;else if(u=o.tag,u===13){if(s=Ir(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return Ho=s,null}function tf(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jt()){case Vn:return 1;case Rr:return 4;case nr:case bs:return 16;case yr:return 536870912;default:return 16}default:return 16}}var Zr=null,Kl=null,Go=null;function nf(){if(Go)return Go;var s,o=Kl,u=o.length,m,v="value"in Zr?Zr.value:Zr.textContent,_=v.length;for(s=0;s<u&&o[s]===v[s];s++);var k=u-s;for(m=1;m<=k&&o[u-m]===v[_-m];m++);return Go=v.slice(s,1<m?1-m:void 0)}function qo(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Wo(){return!0}function rf(){return!1}function Dn(s){function o(u,m,v,_,k){this._reactName=u,this._targetInst=v,this.type=m,this.nativeEvent=_,this.target=k,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(u=s[C],this[C]=u?u(_):_[C]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Wo:rf,this.isPropagationStopped=rf,this}return G(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Wo)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Wo)},persist:function(){},isPersistent:Wo}),o}var Qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yl=Dn(Qs),Wi=G({},Qs,{view:0,detail:0}),Dv=Dn(Wi),Ql,Xl,Ji,Jo=G({},Wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eu,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ji&&(Ji&&s.type==="mousemove"?(Ql=s.screenX-Ji.screenX,Xl=s.screenY-Ji.screenY):Xl=Ql=0,Ji=s),Ql)},movementY:function(s){return"movementY"in s?s.movementY:Xl}}),sf=Dn(Jo),jv=G({},Jo,{dataTransfer:0}),Lv=Dn(jv),Uv=G({},Wi,{relatedTarget:0}),Zl=Dn(Uv),Ov=G({},Qs,{animationName:0,elapsedTime:0,pseudoElement:0}),Fv=Dn(Ov),$v=G({},Qs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),zv=Dn($v),Vv=G({},Qs,{data:0}),of=Dn(Vv),Bv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qv(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Gv[s])?!!o[s]:!1}function eu(){return qv}var Wv=G({},Wi,{key:function(s){if(s.key){var o=Bv[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=qo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Hv[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eu,charCode:function(s){return s.type==="keypress"?qo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?qo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Jv=Dn(Wv),Kv=G({},Jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),af=Dn(Kv),Yv=G({},Wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eu}),Qv=Dn(Yv),Xv=G({},Qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zv=Dn(Xv),ex=G({},Jo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),tx=Dn(ex),nx=[9,13,27,32],tu=f&&"CompositionEvent"in window,Ki=null;f&&"documentMode"in document&&(Ki=document.documentMode);var rx=f&&"TextEvent"in window&&!Ki,lf=f&&(!tu||Ki&&8<Ki&&11>=Ki),uf=" ",cf=!1;function df(s,o){switch(s){case"keyup":return nx.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ff(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Xs=!1;function sx(s,o){switch(s){case"compositionend":return ff(o);case"keypress":return o.which!==32?null:(cf=!0,uf);case"textInput":return s=o.data,s===uf&&cf?null:s;default:return null}}function ix(s,o){if(Xs)return s==="compositionend"||!tu&&df(s,o)?(s=nf(),Go=Kl=Zr=null,Xs=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return lf&&o.locale!=="ko"?null:o.data;default:return null}}var ox={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hf(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!ox[s.type]:o==="textarea"}function pf(s,o,u,m){ut(m),o=Zo(o,"onChange"),0<o.length&&(u=new Yl("onChange","change",null,u,m),s.push({event:u,listeners:o}))}var Yi=null,Qi=null;function ax(s){Pf(s,0)}function Ko(s){var o=ri(s);if(yt(o))return s}function lx(s,o){if(s==="change")return o}var gf=!1;if(f){var nu;if(f){var ru="oninput"in document;if(!ru){var mf=document.createElement("div");mf.setAttribute("oninput","return;"),ru=typeof mf.oninput=="function"}nu=ru}else nu=!1;gf=nu&&(!document.documentMode||9<document.documentMode)}function yf(){Yi&&(Yi.detachEvent("onpropertychange",vf),Qi=Yi=null)}function vf(s){if(s.propertyName==="value"&&Ko(Qi)){var o=[];pf(o,Qi,s,Ke(s)),qr(ax,o)}}function ux(s,o,u){s==="focusin"?(yf(),Yi=o,Qi=u,Yi.attachEvent("onpropertychange",vf)):s==="focusout"&&yf()}function cx(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ko(Qi)}function dx(s,o){if(s==="click")return Ko(o)}function fx(s,o){if(s==="input"||s==="change")return Ko(o)}function hx(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var rr=typeof Object.is=="function"?Object.is:hx;function Xi(s,o){if(rr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),m=Object.keys(o);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var v=u[m];if(!p.call(o,v)||!rr(s[v],o[v]))return!1}return!0}function xf(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function wf(s,o){var u=xf(s);s=0;for(var m;u;){if(u.nodeType===3){if(m=s+u.textContent.length,s<=o&&m>=o)return{node:u,offset:o-s};s=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=xf(u)}}function _f(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?_f(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function bf(){for(var s=window,o=kt();o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=kt(s.document)}return o}function su(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function px(s){var o=bf(),u=s.focusedElem,m=s.selectionRange;if(o!==u&&u&&u.ownerDocument&&_f(u.ownerDocument.documentElement,u)){if(m!==null&&su(u)){if(o=m.start,s=m.end,s===void 0&&(s=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(s,u.value.length);else if(s=(o=u.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var v=u.textContent.length,_=Math.min(m.start,v);m=m.end===void 0?_:Math.min(m.end,v),!s.extend&&_>m&&(v=m,m=_,_=v),v=wf(u,_);var k=wf(u,m);v&&k&&(s.rangeCount!==1||s.anchorNode!==v.node||s.anchorOffset!==v.offset||s.focusNode!==k.node||s.focusOffset!==k.offset)&&(o=o.createRange(),o.setStart(v.node,v.offset),s.removeAllRanges(),_>m?(s.addRange(o),s.extend(k.node,k.offset)):(o.setEnd(k.node,k.offset),s.addRange(o)))}}for(o=[],s=u;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)s=o[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var gx=f&&"documentMode"in document&&11>=document.documentMode,Zs=null,iu=null,Zi=null,ou=!1;function kf(s,o,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ou||Zs==null||Zs!==kt(m)||(m=Zs,"selectionStart"in m&&su(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Zi&&Xi(Zi,m)||(Zi=m,m=Zo(iu,"onSelect"),0<m.length&&(o=new Yl("onSelect","select",null,o,u),s.push({event:o,listeners:m}),o.target=Zs)))}function Yo(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var ei={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionend:Yo("Transition","TransitionEnd")},au={},Sf={};f&&(Sf=document.createElement("div").style,"AnimationEvent"in window||(delete ei.animationend.animation,delete ei.animationiteration.animation,delete ei.animationstart.animation),"TransitionEvent"in window||delete ei.transitionend.transition);function Qo(s){if(au[s])return au[s];if(!ei[s])return s;var o=ei[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in Sf)return au[s]=o[u];return s}var Ef=Qo("animationend"),Tf=Qo("animationiteration"),Cf=Qo("animationstart"),Nf=Qo("transitionend"),Af=new Map,If="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function es(s,o){Af.set(s,o),a(o,[s])}for(var lu=0;lu<If.length;lu++){var uu=If[lu],mx=uu.toLowerCase(),yx=uu[0].toUpperCase()+uu.slice(1);es(mx,"on"+yx)}es(Ef,"onAnimationEnd"),es(Tf,"onAnimationIteration"),es(Cf,"onAnimationStart"),es("dblclick","onDoubleClick"),es("focusin","onFocus"),es("focusout","onBlur"),es(Nf,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vx=new Set("cancel close invalid load scroll toggle".split(" ").concat(eo));function Rf(s,o,u){var m=s.type||"unknown-event";s.currentTarget=u,_s(m,o,void 0,s),s.currentTarget=null}function Pf(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var m=s[u],v=m.event;m=m.listeners;e:{var _=void 0;if(o)for(var k=m.length-1;0<=k;k--){var C=m[k],R=C.instance,V=C.currentTarget;if(C=C.listener,R!==_&&v.isPropagationStopped())break e;Rf(v,C,V),_=R}else for(k=0;k<m.length;k++){if(C=m[k],R=C.instance,V=C.currentTarget,C=C.listener,R!==_&&v.isPropagationStopped())break e;Rf(v,C,V),_=R}}}if(mr)throw s=Ar,mr=!1,Ar=null,s}function _t(s,o){var u=o[yu];u===void 0&&(u=o[yu]=new Set);var m=s+"__bubble";u.has(m)||(Mf(o,s,2,!1),u.add(m))}function cu(s,o,u){var m=0;o&&(m|=4),Mf(u,s,m,o)}var Xo="_reactListening"+Math.random().toString(36).slice(2);function to(s){if(!s[Xo]){s[Xo]=!0,r.forEach(function(u){u!=="selectionchange"&&(vx.has(u)||cu(u,!1,s),cu(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Xo]||(o[Xo]=!0,cu("selectionchange",!1,o))}}function Mf(s,o,u,m){switch(tf(o)){case 1:var v=Pv;break;case 4:v=Mv;break;default:v=Wl}u=v.bind(null,o,u,s),v=void 0,!Zn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),m?v!==void 0?s.addEventListener(o,u,{capture:!0,passive:v}):s.addEventListener(o,u,!0):v!==void 0?s.addEventListener(o,u,{passive:v}):s.addEventListener(o,u,!1)}function du(s,o,u,m,v){var _=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var k=m.tag;if(k===3||k===4){var C=m.stateNode.containerInfo;if(C===v||C.nodeType===8&&C.parentNode===v)break;if(k===4)for(k=m.return;k!==null;){var R=k.tag;if((R===3||R===4)&&(R=k.stateNode.containerInfo,R===v||R.nodeType===8&&R.parentNode===v))return;k=k.return}for(;C!==null;){if(k=ks(C),k===null)return;if(R=k.tag,R===5||R===6){m=_=k;continue e}C=C.parentNode}}m=m.return}qr(function(){var V=_,ee=Ke(u),ie=[];e:{var X=Af.get(s);if(X!==void 0){var xe=Yl,Se=s;switch(s){case"keypress":if(qo(u)===0)break e;case"keydown":case"keyup":xe=Jv;break;case"focusin":Se="focus",xe=Zl;break;case"focusout":Se="blur",xe=Zl;break;case"beforeblur":case"afterblur":xe=Zl;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=sf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=Lv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=Qv;break;case Ef:case Tf:case Cf:xe=Fv;break;case Nf:xe=Zv;break;case"scroll":xe=Dv;break;case"wheel":xe=tx;break;case"copy":case"cut":case"paste":xe=zv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=af}var Ee=(o&4)!==0,Dt=!Ee&&s==="scroll",L=Ee?X!==null?X+"Capture":null:X;Ee=[];for(var P=V,O;P!==null;){O=P;var ae=O.stateNode;if(O.tag===5&&ae!==null&&(O=ae,L!==null&&(ae=Xn(P,L),ae!=null&&Ee.push(no(P,ae,O)))),Dt)break;P=P.return}0<Ee.length&&(X=new xe(X,Se,null,u,ee),ie.push({event:X,listeners:Ee}))}}if((o&7)===0){e:{if(X=s==="mouseover"||s==="pointerover",xe=s==="mouseout"||s==="pointerout",X&&u!==ne&&(Se=u.relatedTarget||u.fromElement)&&(ks(Se)||Se[Pr]))break e;if((xe||X)&&(X=ee.window===ee?ee:(X=ee.ownerDocument)?X.defaultView||X.parentWindow:window,xe?(Se=u.relatedTarget||u.toElement,xe=V,Se=Se?ks(Se):null,Se!==null&&(Dt=bn(Se),Se!==Dt||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(xe=null,Se=V),xe!==Se)){if(Ee=sf,ae="onMouseLeave",L="onMouseEnter",P="mouse",(s==="pointerout"||s==="pointerover")&&(Ee=af,ae="onPointerLeave",L="onPointerEnter",P="pointer"),Dt=xe==null?X:ri(xe),O=Se==null?X:ri(Se),X=new Ee(ae,P+"leave",xe,u,ee),X.target=Dt,X.relatedTarget=O,ae=null,ks(ee)===V&&(Ee=new Ee(L,P+"enter",Se,u,ee),Ee.target=O,Ee.relatedTarget=Dt,ae=Ee),Dt=ae,xe&&Se)t:{for(Ee=xe,L=Se,P=0,O=Ee;O;O=ti(O))P++;for(O=0,ae=L;ae;ae=ti(ae))O++;for(;0<P-O;)Ee=ti(Ee),P--;for(;0<O-P;)L=ti(L),O--;for(;P--;){if(Ee===L||L!==null&&Ee===L.alternate)break t;Ee=ti(Ee),L=ti(L)}Ee=null}else Ee=null;xe!==null&&Df(ie,X,xe,Ee,!1),Se!==null&&Dt!==null&&Df(ie,Dt,Se,Ee,!0)}}e:{if(X=V?ri(V):window,xe=X.nodeName&&X.nodeName.toLowerCase(),xe==="select"||xe==="input"&&X.type==="file")var Ce=lx;else if(hf(X))if(gf)Ce=fx;else{Ce=cx;var Oe=ux}else(xe=X.nodeName)&&xe.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(Ce=dx);if(Ce&&(Ce=Ce(s,V))){pf(ie,Ce,u,ee);break e}Oe&&Oe(s,X,V),s==="focusout"&&(Oe=X._wrapperState)&&Oe.controlled&&X.type==="number"&&nt(X,"number",X.value)}switch(Oe=V?ri(V):window,s){case"focusin":(hf(Oe)||Oe.contentEditable==="true")&&(Zs=Oe,iu=V,Zi=null);break;case"focusout":Zi=iu=Zs=null;break;case"mousedown":ou=!0;break;case"contextmenu":case"mouseup":case"dragend":ou=!1,kf(ie,u,ee);break;case"selectionchange":if(gx)break;case"keydown":case"keyup":kf(ie,u,ee)}var Fe;if(tu)e:{switch(s){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Xs?df(s,u)&&(Be="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Be="onCompositionStart");Be&&(lf&&u.locale!=="ko"&&(Xs||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Xs&&(Fe=nf()):(Zr=ee,Kl="value"in Zr?Zr.value:Zr.textContent,Xs=!0)),Oe=Zo(V,Be),0<Oe.length&&(Be=new of(Be,s,null,u,ee),ie.push({event:Be,listeners:Oe}),Fe?Be.data=Fe:(Fe=ff(u),Fe!==null&&(Be.data=Fe)))),(Fe=rx?sx(s,u):ix(s,u))&&(V=Zo(V,"onBeforeInput"),0<V.length&&(ee=new of("onBeforeInput","beforeinput",null,u,ee),ie.push({event:ee,listeners:V}),ee.data=Fe))}Pf(ie,o)})}function no(s,o,u){return{instance:s,listener:o,currentTarget:u}}function Zo(s,o){for(var u=o+"Capture",m=[];s!==null;){var v=s,_=v.stateNode;v.tag===5&&_!==null&&(v=_,_=Xn(s,u),_!=null&&m.unshift(no(s,_,v)),_=Xn(s,o),_!=null&&m.push(no(s,_,v))),s=s.return}return m}function ti(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Df(s,o,u,m,v){for(var _=o._reactName,k=[];u!==null&&u!==m;){var C=u,R=C.alternate,V=C.stateNode;if(R!==null&&R===m)break;C.tag===5&&V!==null&&(C=V,v?(R=Xn(u,_),R!=null&&k.unshift(no(u,R,C))):v||(R=Xn(u,_),R!=null&&k.push(no(u,R,C)))),u=u.return}k.length!==0&&s.push({event:o,listeners:k})}var xx=/\r\n?/g,wx=/\u0000|\uFFFD/g;function jf(s){return(typeof s=="string"?s:""+s).replace(xx,`
`).replace(wx,"")}function ea(s,o,u){if(o=jf(o),jf(s)!==o&&u)throw Error(n(425))}function ta(){}var fu=null,hu=null;function pu(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var gu=typeof setTimeout=="function"?setTimeout:void 0,_x=typeof clearTimeout=="function"?clearTimeout:void 0,Lf=typeof Promise=="function"?Promise:void 0,bx=typeof queueMicrotask=="function"?queueMicrotask:typeof Lf<"u"?function(s){return Lf.resolve(null).then(s).catch(kx)}:gu;function kx(s){setTimeout(function(){throw s})}function mu(s,o){var u=o,m=0;do{var v=u.nextSibling;if(s.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(m===0){s.removeChild(v),qi(o);return}m--}else u!=="$"&&u!=="$?"&&u!=="$!"||m++;u=v}while(u);qi(o)}function ts(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function Uf(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}var ni=Math.random().toString(36).slice(2),_r="__reactFiber$"+ni,ro="__reactProps$"+ni,Pr="__reactContainer$"+ni,yu="__reactEvents$"+ni,Sx="__reactListeners$"+ni,Ex="__reactHandles$"+ni;function ks(s){var o=s[_r];if(o)return o;for(var u=s.parentNode;u;){if(o=u[Pr]||u[_r]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=Uf(s);s!==null;){if(u=s[_r])return u;s=Uf(s)}return o}s=u,u=s.parentNode}return null}function so(s){return s=s[_r]||s[Pr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ri(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function na(s){return s[ro]||null}var vu=[],si=-1;function ns(s){return{current:s}}function bt(s){0>si||(s.current=vu[si],vu[si]=null,si--)}function vt(s,o){si++,vu[si]=s.current,s.current=o}var rs={},an=ns(rs),Sn=ns(!1),Ss=rs;function ii(s,o){var u=s.type.contextTypes;if(!u)return rs;var m=s.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===o)return m.__reactInternalMemoizedMaskedChildContext;var v={},_;for(_ in u)v[_]=o[_];return m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=v),v}function En(s){return s=s.childContextTypes,s!=null}function ra(){bt(Sn),bt(an)}function Of(s,o,u){if(an.current!==rs)throw Error(n(168));vt(an,o),vt(Sn,u)}function Ff(s,o,u){var m=s.stateNode;if(o=o.childContextTypes,typeof m.getChildContext!="function")return u;m=m.getChildContext();for(var v in m)if(!(v in o))throw Error(n(108,oe(s)||"Unknown",v));return G({},u,m)}function sa(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||rs,Ss=an.current,vt(an,s),vt(Sn,Sn.current),!0}function $f(s,o,u){var m=s.stateNode;if(!m)throw Error(n(169));u?(s=Ff(s,o,Ss),m.__reactInternalMemoizedMergedChildContext=s,bt(Sn),bt(an),vt(an,s)):bt(Sn),vt(Sn,u)}var Mr=null,ia=!1,xu=!1;function zf(s){Mr===null?Mr=[s]:Mr.push(s)}function Tx(s){ia=!0,zf(s)}function ss(){if(!xu&&Mr!==null){xu=!0;var s=0,o=ct;try{var u=Mr;for(ct=1;s<u.length;s++){var m=u[s];do m=m(!0);while(m!==null)}Mr=null,ia=!1}catch(v){throw Mr!==null&&(Mr=Mr.slice(s+1)),Ve(Vn,ss),v}finally{ct=o,xu=!1}}return null}var oi=[],ai=0,oa=null,aa=0,Hn=[],Gn=0,Es=null,Dr=1,jr="";function Ts(s,o){oi[ai++]=aa,oi[ai++]=oa,oa=s,aa=o}function Vf(s,o,u){Hn[Gn++]=Dr,Hn[Gn++]=jr,Hn[Gn++]=Es,Es=s;var m=Dr;s=jr;var v=32-rn(m)-1;m&=~(1<<v),u+=1;var _=32-rn(o)+v;if(30<_){var k=v-v%5;_=(m&(1<<k)-1).toString(32),m>>=k,v-=k,Dr=1<<32-rn(o)+v|u<<v|m,jr=_+s}else Dr=1<<_|u<<v|m,jr=s}function wu(s){s.return!==null&&(Ts(s,1),Vf(s,1,0))}function _u(s){for(;s===oa;)oa=oi[--ai],oi[ai]=null,aa=oi[--ai],oi[ai]=null;for(;s===Es;)Es=Hn[--Gn],Hn[Gn]=null,jr=Hn[--Gn],Hn[Gn]=null,Dr=Hn[--Gn],Hn[Gn]=null}var jn=null,Ln=null,Ct=!1,sr=null;function Bf(s,o){var u=Kn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=s,o=s.deletions,o===null?(s.deletions=[u],s.flags|=16):o.push(u)}function Hf(s,o){switch(s.tag){case 5:var u=s.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,jn=s,Ln=ts(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,jn=s,Ln=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Es!==null?{id:Dr,overflow:jr}:null,s.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Kn(18,null,null,0),u.stateNode=o,u.return=s,s.child=u,jn=s,Ln=null,!0):!1;default:return!1}}function bu(s){return(s.mode&1)!==0&&(s.flags&128)===0}function ku(s){if(Ct){var o=Ln;if(o){var u=o;if(!Hf(s,o)){if(bu(s))throw Error(n(418));o=ts(u.nextSibling);var m=jn;o&&Hf(s,o)?Bf(m,u):(s.flags=s.flags&-4097|2,Ct=!1,jn=s)}}else{if(bu(s))throw Error(n(418));s.flags=s.flags&-4097|2,Ct=!1,jn=s}}}function Gf(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;jn=s}function la(s){if(s!==jn)return!1;if(!Ct)return Gf(s),Ct=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!pu(s.type,s.memoizedProps)),o&&(o=Ln)){if(bu(s))throw qf(),Error(n(418));for(;o;)Bf(s,o),o=ts(o.nextSibling)}if(Gf(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(o===0){Ln=ts(s.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}s=s.nextSibling}Ln=null}}else Ln=jn?ts(s.stateNode.nextSibling):null;return!0}function qf(){for(var s=Ln;s;)s=ts(s.nextSibling)}function li(){Ln=jn=null,Ct=!1}function Su(s){sr===null?sr=[s]:sr.push(s)}var Cx=F.ReactCurrentBatchConfig;function io(s,o,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(n(309));var m=u.stateNode}if(!m)throw Error(n(147,s));var v=m,_=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_?o.ref:(o=function(k){var C=v.refs;k===null?delete C[_]:C[_]=k},o._stringRef=_,o)}if(typeof s!="string")throw Error(n(284));if(!u._owner)throw Error(n(290,s))}return s}function ua(s,o){throw s=Object.prototype.toString.call(o),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function Wf(s){var o=s._init;return o(s._payload)}function Jf(s){function o(L,P){if(s){var O=L.deletions;O===null?(L.deletions=[P],L.flags|=16):O.push(P)}}function u(L,P){if(!s)return null;for(;P!==null;)o(L,P),P=P.sibling;return null}function m(L,P){for(L=new Map;P!==null;)P.key!==null?L.set(P.key,P):L.set(P.index,P),P=P.sibling;return L}function v(L,P){return L=fs(L,P),L.index=0,L.sibling=null,L}function _(L,P,O){return L.index=O,s?(O=L.alternate,O!==null?(O=O.index,O<P?(L.flags|=2,P):O):(L.flags|=2,P)):(L.flags|=1048576,P)}function k(L){return s&&L.alternate===null&&(L.flags|=2),L}function C(L,P,O,ae){return P===null||P.tag!==6?(P=gc(O,L.mode,ae),P.return=L,P):(P=v(P,O),P.return=L,P)}function R(L,P,O,ae){var Ce=O.type;return Ce===B?ee(L,P,O.props.children,ae,O.key):P!==null&&(P.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Le&&Wf(Ce)===P.type)?(ae=v(P,O.props),ae.ref=io(L,P,O),ae.return=L,ae):(ae=Ma(O.type,O.key,O.props,null,L.mode,ae),ae.ref=io(L,P,O),ae.return=L,ae)}function V(L,P,O,ae){return P===null||P.tag!==4||P.stateNode.containerInfo!==O.containerInfo||P.stateNode.implementation!==O.implementation?(P=mc(O,L.mode,ae),P.return=L,P):(P=v(P,O.children||[]),P.return=L,P)}function ee(L,P,O,ae,Ce){return P===null||P.tag!==7?(P=Ds(O,L.mode,ae,Ce),P.return=L,P):(P=v(P,O),P.return=L,P)}function ie(L,P,O){if(typeof P=="string"&&P!==""||typeof P=="number")return P=gc(""+P,L.mode,O),P.return=L,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case q:return O=Ma(P.type,P.key,P.props,null,L.mode,O),O.ref=io(L,null,P),O.return=L,O;case Y:return P=mc(P,L.mode,O),P.return=L,P;case Le:var ae=P._init;return ie(L,ae(P._payload),O)}if(dt(P)||W(P))return P=Ds(P,L.mode,O,null),P.return=L,P;ua(L,P)}return null}function X(L,P,O,ae){var Ce=P!==null?P.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return Ce!==null?null:C(L,P,""+O,ae);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case q:return O.key===Ce?R(L,P,O,ae):null;case Y:return O.key===Ce?V(L,P,O,ae):null;case Le:return Ce=O._init,X(L,P,Ce(O._payload),ae)}if(dt(O)||W(O))return Ce!==null?null:ee(L,P,O,ae,null);ua(L,O)}return null}function xe(L,P,O,ae,Ce){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return L=L.get(O)||null,C(P,L,""+ae,Ce);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case q:return L=L.get(ae.key===null?O:ae.key)||null,R(P,L,ae,Ce);case Y:return L=L.get(ae.key===null?O:ae.key)||null,V(P,L,ae,Ce);case Le:var Oe=ae._init;return xe(L,P,O,Oe(ae._payload),Ce)}if(dt(ae)||W(ae))return L=L.get(O)||null,ee(P,L,ae,Ce,null);ua(P,ae)}return null}function Se(L,P,O,ae){for(var Ce=null,Oe=null,Fe=P,Be=P=0,Kt=null;Fe!==null&&Be<O.length;Be++){Fe.index>Be?(Kt=Fe,Fe=null):Kt=Fe.sibling;var at=X(L,Fe,O[Be],ae);if(at===null){Fe===null&&(Fe=Kt);break}s&&Fe&&at.alternate===null&&o(L,Fe),P=_(at,P,Be),Oe===null?Ce=at:Oe.sibling=at,Oe=at,Fe=Kt}if(Be===O.length)return u(L,Fe),Ct&&Ts(L,Be),Ce;if(Fe===null){for(;Be<O.length;Be++)Fe=ie(L,O[Be],ae),Fe!==null&&(P=_(Fe,P,Be),Oe===null?Ce=Fe:Oe.sibling=Fe,Oe=Fe);return Ct&&Ts(L,Be),Ce}for(Fe=m(L,Fe);Be<O.length;Be++)Kt=xe(Fe,L,Be,O[Be],ae),Kt!==null&&(s&&Kt.alternate!==null&&Fe.delete(Kt.key===null?Be:Kt.key),P=_(Kt,P,Be),Oe===null?Ce=Kt:Oe.sibling=Kt,Oe=Kt);return s&&Fe.forEach(function(hs){return o(L,hs)}),Ct&&Ts(L,Be),Ce}function Ee(L,P,O,ae){var Ce=W(O);if(typeof Ce!="function")throw Error(n(150));if(O=Ce.call(O),O==null)throw Error(n(151));for(var Oe=Ce=null,Fe=P,Be=P=0,Kt=null,at=O.next();Fe!==null&&!at.done;Be++,at=O.next()){Fe.index>Be?(Kt=Fe,Fe=null):Kt=Fe.sibling;var hs=X(L,Fe,at.value,ae);if(hs===null){Fe===null&&(Fe=Kt);break}s&&Fe&&hs.alternate===null&&o(L,Fe),P=_(hs,P,Be),Oe===null?Ce=hs:Oe.sibling=hs,Oe=hs,Fe=Kt}if(at.done)return u(L,Fe),Ct&&Ts(L,Be),Ce;if(Fe===null){for(;!at.done;Be++,at=O.next())at=ie(L,at.value,ae),at!==null&&(P=_(at,P,Be),Oe===null?Ce=at:Oe.sibling=at,Oe=at);return Ct&&Ts(L,Be),Ce}for(Fe=m(L,Fe);!at.done;Be++,at=O.next())at=xe(Fe,L,Be,at.value,ae),at!==null&&(s&&at.alternate!==null&&Fe.delete(at.key===null?Be:at.key),P=_(at,P,Be),Oe===null?Ce=at:Oe.sibling=at,Oe=at);return s&&Fe.forEach(function(ow){return o(L,ow)}),Ct&&Ts(L,Be),Ce}function Dt(L,P,O,ae){if(typeof O=="object"&&O!==null&&O.type===B&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case q:e:{for(var Ce=O.key,Oe=P;Oe!==null;){if(Oe.key===Ce){if(Ce=O.type,Ce===B){if(Oe.tag===7){u(L,Oe.sibling),P=v(Oe,O.props.children),P.return=L,L=P;break e}}else if(Oe.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Le&&Wf(Ce)===Oe.type){u(L,Oe.sibling),P=v(Oe,O.props),P.ref=io(L,Oe,O),P.return=L,L=P;break e}u(L,Oe);break}else o(L,Oe);Oe=Oe.sibling}O.type===B?(P=Ds(O.props.children,L.mode,ae,O.key),P.return=L,L=P):(ae=Ma(O.type,O.key,O.props,null,L.mode,ae),ae.ref=io(L,P,O),ae.return=L,L=ae)}return k(L);case Y:e:{for(Oe=O.key;P!==null;){if(P.key===Oe)if(P.tag===4&&P.stateNode.containerInfo===O.containerInfo&&P.stateNode.implementation===O.implementation){u(L,P.sibling),P=v(P,O.children||[]),P.return=L,L=P;break e}else{u(L,P);break}else o(L,P);P=P.sibling}P=mc(O,L.mode,ae),P.return=L,L=P}return k(L);case Le:return Oe=O._init,Dt(L,P,Oe(O._payload),ae)}if(dt(O))return Se(L,P,O,ae);if(W(O))return Ee(L,P,O,ae);ua(L,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,P!==null&&P.tag===6?(u(L,P.sibling),P=v(P,O),P.return=L,L=P):(u(L,P),P=gc(O,L.mode,ae),P.return=L,L=P),k(L)):u(L,P)}return Dt}var ui=Jf(!0),Kf=Jf(!1),ca=ns(null),da=null,ci=null,Eu=null;function Tu(){Eu=ci=da=null}function Cu(s){var o=ca.current;bt(ca),s._currentValue=o}function Nu(s,o,u){for(;s!==null;){var m=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),s===u)break;s=s.return}}function di(s,o){da=s,Eu=ci=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(Tn=!0),s.firstContext=null)}function qn(s){var o=s._currentValue;if(Eu!==s)if(s={context:s,memoizedValue:o,next:null},ci===null){if(da===null)throw Error(n(308));ci=s,da.dependencies={lanes:0,firstContext:s}}else ci=ci.next=s;return o}var Cs=null;function Au(s){Cs===null?Cs=[s]:Cs.push(s)}function Yf(s,o,u,m){var v=o.interleaved;return v===null?(u.next=u,Au(o)):(u.next=v.next,v.next=u),o.interleaved=u,Lr(s,m)}function Lr(s,o){s.lanes|=o;var u=s.alternate;for(u!==null&&(u.lanes|=o),u=s,s=s.return;s!==null;)s.childLanes|=o,u=s.alternate,u!==null&&(u.childLanes|=o),u=s,s=s.return;return u.tag===3?u.stateNode:null}var is=!1;function Iu(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qf(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ur(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function os(s,o,u){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(it&2)!==0){var v=m.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),m.pending=o,Lr(s,u)}return v=m.interleaved,v===null?(o.next=o,Au(m)):(o.next=v.next,v.next=o),m.interleaved=o,Lr(s,u)}function fa(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var m=o.lanes;m&=s.pendingLanes,u|=m,o.lanes=u,Jr(s,u)}}function Xf(s,o){var u=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var v=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var k={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?v=_=k:_=_.next=k,u=u.next}while(u!==null);_===null?v=_=o:_=_.next=o}else v=_=o;u={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:m.shared,effects:m.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}function ha(s,o,u,m){var v=s.updateQueue;is=!1;var _=v.firstBaseUpdate,k=v.lastBaseUpdate,C=v.shared.pending;if(C!==null){v.shared.pending=null;var R=C,V=R.next;R.next=null,k===null?_=V:k.next=V,k=R;var ee=s.alternate;ee!==null&&(ee=ee.updateQueue,C=ee.lastBaseUpdate,C!==k&&(C===null?ee.firstBaseUpdate=V:C.next=V,ee.lastBaseUpdate=R))}if(_!==null){var ie=v.baseState;k=0,ee=V=R=null,C=_;do{var X=C.lane,xe=C.eventTime;if((m&X)===X){ee!==null&&(ee=ee.next={eventTime:xe,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var Se=s,Ee=C;switch(X=o,xe=u,Ee.tag){case 1:if(Se=Ee.payload,typeof Se=="function"){ie=Se.call(xe,ie,X);break e}ie=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ee.payload,X=typeof Se=="function"?Se.call(xe,ie,X):Se,X==null)break e;ie=G({},ie,X);break e;case 2:is=!0}}C.callback!==null&&C.lane!==0&&(s.flags|=64,X=v.effects,X===null?v.effects=[C]:X.push(C))}else xe={eventTime:xe,lane:X,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ee===null?(V=ee=xe,R=ie):ee=ee.next=xe,k|=X;if(C=C.next,C===null){if(C=v.shared.pending,C===null)break;X=C,C=X.next,X.next=null,v.lastBaseUpdate=X,v.shared.pending=null}}while(!0);if(ee===null&&(R=ie),v.baseState=R,v.firstBaseUpdate=V,v.lastBaseUpdate=ee,o=v.shared.interleaved,o!==null){v=o;do k|=v.lane,v=v.next;while(v!==o)}else _===null&&(v.shared.lanes=0);Is|=k,s.lanes=k,s.memoizedState=ie}}function Zf(s,o,u){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var m=s[o],v=m.callback;if(v!==null){if(m.callback=null,m=u,typeof v!="function")throw Error(n(191,v));v.call(m)}}}var oo={},br=ns(oo),ao=ns(oo),lo=ns(oo);function Ns(s){if(s===oo)throw Error(n(174));return s}function Ru(s,o){switch(vt(lo,o),vt(ao,s),vt(br,oo),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:ge(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=ge(o,s)}bt(br),vt(br,o)}function fi(){bt(br),bt(ao),bt(lo)}function eh(s){Ns(lo.current);var o=Ns(br.current),u=ge(o,s.type);o!==u&&(vt(ao,s),vt(br,u))}function Pu(s){ao.current===s&&(bt(br),bt(ao))}var Rt=ns(0);function pa(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Mu=[];function Du(){for(var s=0;s<Mu.length;s++)Mu[s]._workInProgressVersionPrimary=null;Mu.length=0}var ga=F.ReactCurrentDispatcher,ju=F.ReactCurrentBatchConfig,As=0,Pt=null,$t=null,Wt=null,ma=!1,uo=!1,co=0,Nx=0;function ln(){throw Error(n(321))}function Lu(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!rr(s[u],o[u]))return!1;return!0}function Uu(s,o,u,m,v,_){if(As=_,Pt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,ga.current=s===null||s.memoizedState===null?Px:Mx,s=u(m,v),uo){_=0;do{if(uo=!1,co=0,25<=_)throw Error(n(301));_+=1,Wt=$t=null,o.updateQueue=null,ga.current=Dx,s=u(m,v)}while(uo)}if(ga.current=xa,o=$t!==null&&$t.next!==null,As=0,Wt=$t=Pt=null,ma=!1,o)throw Error(n(300));return s}function Ou(){var s=co!==0;return co=0,s}function kr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?Pt.memoizedState=Wt=s:Wt=Wt.next=s,Wt}function Wn(){if($t===null){var s=Pt.alternate;s=s!==null?s.memoizedState:null}else s=$t.next;var o=Wt===null?Pt.memoizedState:Wt.next;if(o!==null)Wt=o,$t=s;else{if(s===null)throw Error(n(310));$t=s,s={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Wt===null?Pt.memoizedState=Wt=s:Wt=Wt.next=s}return Wt}function fo(s,o){return typeof o=="function"?o(s):o}function Fu(s){var o=Wn(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=s;var m=$t,v=m.baseQueue,_=u.pending;if(_!==null){if(v!==null){var k=v.next;v.next=_.next,_.next=k}m.baseQueue=v=_,u.pending=null}if(v!==null){_=v.next,m=m.baseState;var C=k=null,R=null,V=_;do{var ee=V.lane;if((As&ee)===ee)R!==null&&(R=R.next={lane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),m=V.hasEagerState?V.eagerState:s(m,V.action);else{var ie={lane:ee,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null};R===null?(C=R=ie,k=m):R=R.next=ie,Pt.lanes|=ee,Is|=ee}V=V.next}while(V!==null&&V!==_);R===null?k=m:R.next=C,rr(m,o.memoizedState)||(Tn=!0),o.memoizedState=m,o.baseState=k,o.baseQueue=R,u.lastRenderedState=m}if(s=u.interleaved,s!==null){v=s;do _=v.lane,Pt.lanes|=_,Is|=_,v=v.next;while(v!==s)}else v===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function $u(s){var o=Wn(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=s;var m=u.dispatch,v=u.pending,_=o.memoizedState;if(v!==null){u.pending=null;var k=v=v.next;do _=s(_,k.action),k=k.next;while(k!==v);rr(_,o.memoizedState)||(Tn=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,m]}function th(){}function nh(s,o){var u=Pt,m=Wn(),v=o(),_=!rr(m.memoizedState,v);if(_&&(m.memoizedState=v,Tn=!0),m=m.queue,zu(ih.bind(null,u,m,s),[s]),m.getSnapshot!==o||_||Wt!==null&&Wt.memoizedState.tag&1){if(u.flags|=2048,ho(9,sh.bind(null,u,m,v,o),void 0,null),Jt===null)throw Error(n(349));(As&30)!==0||rh(u,o,v)}return v}function rh(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=Pt.updateQueue,o===null?(o={lastEffect:null,stores:null},Pt.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function sh(s,o,u,m){o.value=u,o.getSnapshot=m,oh(o)&&ah(s)}function ih(s,o,u){return u(function(){oh(o)&&ah(s)})}function oh(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!rr(s,u)}catch{return!0}}function ah(s){var o=Lr(s,1);o!==null&&lr(o,s,1,-1)}function lh(s){var o=kr();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:s},o.queue=s,s=s.dispatch=Rx.bind(null,Pt,s),[o.memoizedState,s]}function ho(s,o,u,m){return s={tag:s,create:o,destroy:u,deps:m,next:null},o=Pt.updateQueue,o===null?(o={lastEffect:null,stores:null},Pt.updateQueue=o,o.lastEffect=s.next=s):(u=o.lastEffect,u===null?o.lastEffect=s.next=s:(m=u.next,u.next=s,s.next=m,o.lastEffect=s)),s}function uh(){return Wn().memoizedState}function ya(s,o,u,m){var v=kr();Pt.flags|=s,v.memoizedState=ho(1|o,u,void 0,m===void 0?null:m)}function va(s,o,u,m){var v=Wn();m=m===void 0?null:m;var _=void 0;if($t!==null){var k=$t.memoizedState;if(_=k.destroy,m!==null&&Lu(m,k.deps)){v.memoizedState=ho(o,u,_,m);return}}Pt.flags|=s,v.memoizedState=ho(1|o,u,_,m)}function ch(s,o){return ya(8390656,8,s,o)}function zu(s,o){return va(2048,8,s,o)}function dh(s,o){return va(4,2,s,o)}function fh(s,o){return va(4,4,s,o)}function hh(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function ph(s,o,u){return u=u!=null?u.concat([s]):null,va(4,4,hh.bind(null,o,s),u)}function Vu(){}function gh(s,o){var u=Wn();o=o===void 0?null:o;var m=u.memoizedState;return m!==null&&o!==null&&Lu(o,m[1])?m[0]:(u.memoizedState=[s,o],s)}function mh(s,o){var u=Wn();o=o===void 0?null:o;var m=u.memoizedState;return m!==null&&o!==null&&Lu(o,m[1])?m[0]:(s=s(),u.memoizedState=[s,o],s)}function yh(s,o,u){return(As&21)===0?(s.baseState&&(s.baseState=!1,Tn=!0),s.memoizedState=u):(rr(u,o)||(u=qt(),Pt.lanes|=u,Is|=u,s.baseState=!0),o)}function Ax(s,o){var u=ct;ct=u!==0&&4>u?u:4,s(!0);var m=ju.transition;ju.transition={};try{s(!1),o()}finally{ct=u,ju.transition=m}}function vh(){return Wn().memoizedState}function Ix(s,o,u){var m=cs(s);if(u={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null},xh(s))wh(o,u);else if(u=Yf(s,o,u,m),u!==null){var v=vn();lr(u,s,m,v),_h(u,o,m)}}function Rx(s,o,u){var m=cs(s),v={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null};if(xh(s))wh(o,v);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var k=o.lastRenderedState,C=_(k,u);if(v.hasEagerState=!0,v.eagerState=C,rr(C,k)){var R=o.interleaved;R===null?(v.next=v,Au(o)):(v.next=R.next,R.next=v),o.interleaved=v;return}}catch{}finally{}u=Yf(s,o,v,m),u!==null&&(v=vn(),lr(u,s,m,v),_h(u,o,m))}}function xh(s){var o=s.alternate;return s===Pt||o!==null&&o===Pt}function wh(s,o){uo=ma=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function _h(s,o,u){if((u&4194240)!==0){var m=o.lanes;m&=s.pendingLanes,u|=m,o.lanes=u,Jr(s,u)}}var xa={readContext:qn,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},Px={readContext:qn,useCallback:function(s,o){return kr().memoizedState=[s,o===void 0?null:o],s},useContext:qn,useEffect:ch,useImperativeHandle:function(s,o,u){return u=u!=null?u.concat([s]):null,ya(4194308,4,hh.bind(null,o,s),u)},useLayoutEffect:function(s,o){return ya(4194308,4,s,o)},useInsertionEffect:function(s,o){return ya(4,2,s,o)},useMemo:function(s,o){var u=kr();return o=o===void 0?null:o,s=s(),u.memoizedState=[s,o],s},useReducer:function(s,o,u){var m=kr();return o=u!==void 0?u(o):o,m.memoizedState=m.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},m.queue=s,s=s.dispatch=Ix.bind(null,Pt,s),[m.memoizedState,s]},useRef:function(s){var o=kr();return s={current:s},o.memoizedState=s},useState:lh,useDebugValue:Vu,useDeferredValue:function(s){return kr().memoizedState=s},useTransition:function(){var s=lh(!1),o=s[0];return s=Ax.bind(null,s[1]),kr().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,u){var m=Pt,v=kr();if(Ct){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),Jt===null)throw Error(n(349));(As&30)!==0||rh(m,o,u)}v.memoizedState=u;var _={value:u,getSnapshot:o};return v.queue=_,ch(ih.bind(null,m,_,s),[s]),m.flags|=2048,ho(9,sh.bind(null,m,_,u,o),void 0,null),u},useId:function(){var s=kr(),o=Jt.identifierPrefix;if(Ct){var u=jr,m=Dr;u=(m&~(1<<32-rn(m)-1)).toString(32)+u,o=":"+o+"R"+u,u=co++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=Nx++,o=":"+o+"r"+u.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},Mx={readContext:qn,useCallback:gh,useContext:qn,useEffect:zu,useImperativeHandle:ph,useInsertionEffect:dh,useLayoutEffect:fh,useMemo:mh,useReducer:Fu,useRef:uh,useState:function(){return Fu(fo)},useDebugValue:Vu,useDeferredValue:function(s){var o=Wn();return yh(o,$t.memoizedState,s)},useTransition:function(){var s=Fu(fo)[0],o=Wn().memoizedState;return[s,o]},useMutableSource:th,useSyncExternalStore:nh,useId:vh,unstable_isNewReconciler:!1},Dx={readContext:qn,useCallback:gh,useContext:qn,useEffect:zu,useImperativeHandle:ph,useInsertionEffect:dh,useLayoutEffect:fh,useMemo:mh,useReducer:$u,useRef:uh,useState:function(){return $u(fo)},useDebugValue:Vu,useDeferredValue:function(s){var o=Wn();return $t===null?o.memoizedState=s:yh(o,$t.memoizedState,s)},useTransition:function(){var s=$u(fo)[0],o=Wn().memoizedState;return[s,o]},useMutableSource:th,useSyncExternalStore:nh,useId:vh,unstable_isNewReconciler:!1};function ir(s,o){if(s&&s.defaultProps){o=G({},o),s=s.defaultProps;for(var u in s)o[u]===void 0&&(o[u]=s[u]);return o}return o}function Bu(s,o,u,m){o=s.memoizedState,u=u(m,o),u=u==null?o:G({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var wa={isMounted:function(s){return(s=s._reactInternals)?bn(s)===s:!1},enqueueSetState:function(s,o,u){s=s._reactInternals;var m=vn(),v=cs(s),_=Ur(m,v);_.payload=o,u!=null&&(_.callback=u),o=os(s,_,v),o!==null&&(lr(o,s,v,m),fa(o,s,v))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var m=vn(),v=cs(s),_=Ur(m,v);_.tag=1,_.payload=o,u!=null&&(_.callback=u),o=os(s,_,v),o!==null&&(lr(o,s,v,m),fa(o,s,v))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=vn(),m=cs(s),v=Ur(u,m);v.tag=2,o!=null&&(v.callback=o),o=os(s,v,m),o!==null&&(lr(o,s,m,u),fa(o,s,m))}};function bh(s,o,u,m,v,_,k){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,_,k):o.prototype&&o.prototype.isPureReactComponent?!Xi(u,m)||!Xi(v,_):!0}function kh(s,o,u){var m=!1,v=rs,_=o.contextType;return typeof _=="object"&&_!==null?_=qn(_):(v=En(o)?Ss:an.current,m=o.contextTypes,_=(m=m!=null)?ii(s,v):rs),o=new o(u,_),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=wa,s.stateNode=o,o._reactInternals=s,m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=v,s.__reactInternalMemoizedMaskedChildContext=_),o}function Sh(s,o,u,m){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,m),o.state!==s&&wa.enqueueReplaceState(o,o.state,null)}function Hu(s,o,u,m){var v=s.stateNode;v.props=u,v.state=s.memoizedState,v.refs={},Iu(s);var _=o.contextType;typeof _=="object"&&_!==null?v.context=qn(_):(_=En(o)?Ss:an.current,v.context=ii(s,_)),v.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Bu(s,o,_,u),v.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(o=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),o!==v.state&&wa.enqueueReplaceState(v,v.state,null),ha(s,u,v,m),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308)}function hi(s,o){try{var u="",m=o;do u+=Q(m),m=m.return;while(m);var v=u}catch(_){v=`
Error generating stack: `+_.message+`
`+_.stack}return{value:s,source:o,stack:v,digest:null}}function Gu(s,o,u){return{value:s,source:null,stack:u??null,digest:o??null}}function qu(s,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var jx=typeof WeakMap=="function"?WeakMap:Map;function Eh(s,o,u){u=Ur(-1,u),u.tag=3,u.payload={element:null};var m=o.value;return u.callback=function(){Ca||(Ca=!0,ac=m),qu(s,o)},u}function Th(s,o,u){u=Ur(-1,u),u.tag=3;var m=s.type.getDerivedStateFromError;if(typeof m=="function"){var v=o.value;u.payload=function(){return m(v)},u.callback=function(){qu(s,o)}}var _=s.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){qu(s,o),typeof m!="function"&&(ls===null?ls=new Set([this]):ls.add(this));var k=o.stack;this.componentDidCatch(o.value,{componentStack:k!==null?k:""})}),u}function Ch(s,o,u){var m=s.pingCache;if(m===null){m=s.pingCache=new jx;var v=new Set;m.set(o,v)}else v=m.get(o),v===void 0&&(v=new Set,m.set(o,v));v.has(u)||(v.add(u),s=Kx.bind(null,s,o,u),o.then(s,s))}function Nh(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function Ah(s,o,u,m,v){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Ur(-1,1),o.tag=2,os(u,o,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=v,s)}var Lx=F.ReactCurrentOwner,Tn=!1;function yn(s,o,u,m){o.child=s===null?Kf(o,null,u,m):ui(o,s.child,u,m)}function Ih(s,o,u,m,v){u=u.render;var _=o.ref;return di(o,v),m=Uu(s,o,u,m,_,v),u=Ou(),s!==null&&!Tn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~v,Or(s,o,v)):(Ct&&u&&wu(o),o.flags|=1,yn(s,o,m,v),o.child)}function Rh(s,o,u,m,v){if(s===null){var _=u.type;return typeof _=="function"&&!pc(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=_,Ph(s,o,_,m,v)):(s=Ma(u.type,null,m,o,o.mode,v),s.ref=o.ref,s.return=o,o.child=s)}if(_=s.child,(s.lanes&v)===0){var k=_.memoizedProps;if(u=u.compare,u=u!==null?u:Xi,u(k,m)&&s.ref===o.ref)return Or(s,o,v)}return o.flags|=1,s=fs(_,m),s.ref=o.ref,s.return=o,o.child=s}function Ph(s,o,u,m,v){if(s!==null){var _=s.memoizedProps;if(Xi(_,m)&&s.ref===o.ref)if(Tn=!1,o.pendingProps=m=_,(s.lanes&v)!==0)(s.flags&131072)!==0&&(Tn=!0);else return o.lanes=s.lanes,Or(s,o,v)}return Wu(s,o,u,m,v)}function Mh(s,o,u){var m=o.pendingProps,v=m.children,_=s!==null?s.memoizedState:null;if(m.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(gi,Un),Un|=u;else{if((u&1073741824)===0)return s=_!==null?_.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,vt(gi,Un),Un|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=_!==null?_.baseLanes:u,vt(gi,Un),Un|=m}else _!==null?(m=_.baseLanes|u,o.memoizedState=null):m=u,vt(gi,Un),Un|=m;return yn(s,o,v,u),o.child}function Dh(s,o){var u=o.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Wu(s,o,u,m,v){var _=En(u)?Ss:an.current;return _=ii(o,_),di(o,v),u=Uu(s,o,u,m,_,v),m=Ou(),s!==null&&!Tn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~v,Or(s,o,v)):(Ct&&m&&wu(o),o.flags|=1,yn(s,o,u,v),o.child)}function jh(s,o,u,m,v){if(En(u)){var _=!0;sa(o)}else _=!1;if(di(o,v),o.stateNode===null)ba(s,o),kh(o,u,m),Hu(o,u,m,v),m=!0;else if(s===null){var k=o.stateNode,C=o.memoizedProps;k.props=C;var R=k.context,V=u.contextType;typeof V=="object"&&V!==null?V=qn(V):(V=En(u)?Ss:an.current,V=ii(o,V));var ee=u.getDerivedStateFromProps,ie=typeof ee=="function"||typeof k.getSnapshotBeforeUpdate=="function";ie||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(C!==m||R!==V)&&Sh(o,k,m,V),is=!1;var X=o.memoizedState;k.state=X,ha(o,m,k,v),R=o.memoizedState,C!==m||X!==R||Sn.current||is?(typeof ee=="function"&&(Bu(o,u,ee,m),R=o.memoizedState),(C=is||bh(o,u,C,m,X,R,V))?(ie||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(o.flags|=4194308)):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=R),k.props=m,k.state=R,k.context=V,m=C):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{k=o.stateNode,Qf(s,o),C=o.memoizedProps,V=o.type===o.elementType?C:ir(o.type,C),k.props=V,ie=o.pendingProps,X=k.context,R=u.contextType,typeof R=="object"&&R!==null?R=qn(R):(R=En(u)?Ss:an.current,R=ii(o,R));var xe=u.getDerivedStateFromProps;(ee=typeof xe=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(C!==ie||X!==R)&&Sh(o,k,m,R),is=!1,X=o.memoizedState,k.state=X,ha(o,m,k,v);var Se=o.memoizedState;C!==ie||X!==Se||Sn.current||is?(typeof xe=="function"&&(Bu(o,u,xe,m),Se=o.memoizedState),(V=is||bh(o,u,V,m,X,Se,R)||!1)?(ee||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(m,Se,R),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(m,Se,R)),typeof k.componentDidUpdate=="function"&&(o.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof k.componentDidUpdate!="function"||C===s.memoizedProps&&X===s.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&X===s.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=Se),k.props=m,k.state=Se,k.context=R,m=V):(typeof k.componentDidUpdate!="function"||C===s.memoizedProps&&X===s.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&X===s.memoizedState||(o.flags|=1024),m=!1)}return Ju(s,o,u,m,_,v)}function Ju(s,o,u,m,v,_){Dh(s,o);var k=(o.flags&128)!==0;if(!m&&!k)return v&&$f(o,u,!1),Or(s,o,_);m=o.stateNode,Lx.current=o;var C=k&&typeof u.getDerivedStateFromError!="function"?null:m.render();return o.flags|=1,s!==null&&k?(o.child=ui(o,s.child,null,_),o.child=ui(o,null,C,_)):yn(s,o,C,_),o.memoizedState=m.state,v&&$f(o,u,!0),o.child}function Lh(s){var o=s.stateNode;o.pendingContext?Of(s,o.pendingContext,o.pendingContext!==o.context):o.context&&Of(s,o.context,!1),Ru(s,o.containerInfo)}function Uh(s,o,u,m,v){return li(),Su(v),o.flags|=256,yn(s,o,u,m),o.child}var Ku={dehydrated:null,treeContext:null,retryLane:0};function Yu(s){return{baseLanes:s,cachePool:null,transitions:null}}function Oh(s,o,u){var m=o.pendingProps,v=Rt.current,_=!1,k=(o.flags&128)!==0,C;if((C=k)||(C=s!==null&&s.memoizedState===null?!1:(v&2)!==0),C?(_=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(v|=1),vt(Rt,v&1),s===null)return ku(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(k=m.children,s=m.fallback,_?(m=o.mode,_=o.child,k={mode:"hidden",children:k},(m&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=k):_=Da(k,m,0,null),s=Ds(s,m,u,null),_.return=o,s.return=o,_.sibling=s,o.child=_,o.child.memoizedState=Yu(u),o.memoizedState=Ku,s):Qu(o,k));if(v=s.memoizedState,v!==null&&(C=v.dehydrated,C!==null))return Ux(s,o,k,m,C,v,u);if(_){_=m.fallback,k=o.mode,v=s.child,C=v.sibling;var R={mode:"hidden",children:m.children};return(k&1)===0&&o.child!==v?(m=o.child,m.childLanes=0,m.pendingProps=R,o.deletions=null):(m=fs(v,R),m.subtreeFlags=v.subtreeFlags&14680064),C!==null?_=fs(C,_):(_=Ds(_,k,u,null),_.flags|=2),_.return=o,m.return=o,m.sibling=_,o.child=m,m=_,_=o.child,k=s.child.memoizedState,k=k===null?Yu(u):{baseLanes:k.baseLanes|u,cachePool:null,transitions:k.transitions},_.memoizedState=k,_.childLanes=s.childLanes&~u,o.memoizedState=Ku,m}return _=s.child,s=_.sibling,m=fs(_,{mode:"visible",children:m.children}),(o.mode&1)===0&&(m.lanes=u),m.return=o,m.sibling=null,s!==null&&(u=o.deletions,u===null?(o.deletions=[s],o.flags|=16):u.push(s)),o.child=m,o.memoizedState=null,m}function Qu(s,o){return o=Da({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function _a(s,o,u,m){return m!==null&&Su(m),ui(o,s.child,null,u),s=Qu(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function Ux(s,o,u,m,v,_,k){if(u)return o.flags&256?(o.flags&=-257,m=Gu(Error(n(422))),_a(s,o,k,m)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(_=m.fallback,v=o.mode,m=Da({mode:"visible",children:m.children},v,0,null),_=Ds(_,v,k,null),_.flags|=2,m.return=o,_.return=o,m.sibling=_,o.child=m,(o.mode&1)!==0&&ui(o,s.child,null,k),o.child.memoizedState=Yu(k),o.memoizedState=Ku,_);if((o.mode&1)===0)return _a(s,o,k,null);if(v.data==="$!"){if(m=v.nextSibling&&v.nextSibling.dataset,m)var C=m.dgst;return m=C,_=Error(n(419)),m=Gu(_,m,void 0),_a(s,o,k,m)}if(C=(k&s.childLanes)!==0,Tn||C){if(m=Jt,m!==null){switch(k&-k){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(m.suspendedLanes|k))!==0?0:v,v!==0&&v!==_.retryLane&&(_.retryLane=v,Lr(s,v),lr(m,s,v,-1))}return hc(),m=Gu(Error(n(421))),_a(s,o,k,m)}return v.data==="$?"?(o.flags|=128,o.child=s.child,o=Yx.bind(null,s),v._reactRetry=o,null):(s=_.treeContext,Ln=ts(v.nextSibling),jn=o,Ct=!0,sr=null,s!==null&&(Hn[Gn++]=Dr,Hn[Gn++]=jr,Hn[Gn++]=Es,Dr=s.id,jr=s.overflow,Es=o),o=Qu(o,m.children),o.flags|=4096,o)}function Fh(s,o,u){s.lanes|=o;var m=s.alternate;m!==null&&(m.lanes|=o),Nu(s.return,o,u)}function Xu(s,o,u,m,v){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:v}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=m,_.tail=u,_.tailMode=v)}function $h(s,o,u){var m=o.pendingProps,v=m.revealOrder,_=m.tail;if(yn(s,o,m.children,u),m=Rt.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Fh(s,u,o);else if(s.tag===19)Fh(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}if(vt(Rt,m),(o.mode&1)===0)o.memoizedState=null;else switch(v){case"forwards":for(u=o.child,v=null;u!==null;)s=u.alternate,s!==null&&pa(s)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),Xu(o,!1,v,u,_);break;case"backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(s=v.alternate,s!==null&&pa(s)===null){o.child=v;break}s=v.sibling,v.sibling=u,u=v,v=s}Xu(o,!0,u,null,_);break;case"together":Xu(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ba(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function Or(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),Is|=o.lanes,(u&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(n(153));if(o.child!==null){for(s=o.child,u=fs(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=fs(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function Ox(s,o,u){switch(o.tag){case 3:Lh(o),li();break;case 5:eh(o);break;case 1:En(o.type)&&sa(o);break;case 4:Ru(o,o.stateNode.containerInfo);break;case 10:var m=o.type._context,v=o.memoizedProps.value;vt(ca,m._currentValue),m._currentValue=v;break;case 13:if(m=o.memoizedState,m!==null)return m.dehydrated!==null?(vt(Rt,Rt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Oh(s,o,u):(vt(Rt,Rt.current&1),s=Or(s,o,u),s!==null?s.sibling:null);vt(Rt,Rt.current&1);break;case 19:if(m=(u&o.childLanes)!==0,(s.flags&128)!==0){if(m)return $h(s,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),vt(Rt,Rt.current),m)break;return null;case 22:case 23:return o.lanes=0,Mh(s,o,u)}return Or(s,o,u)}var zh,Zu,Vh,Bh;zh=function(s,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Zu=function(){},Vh=function(s,o,u,m){var v=s.memoizedProps;if(v!==m){s=o.stateNode,Ns(br.current);var _=null;switch(u){case"input":v=he(s,v),m=he(s,m),_=[];break;case"select":v=G({},v,{value:void 0}),m=G({},m,{value:void 0}),_=[];break;case"textarea":v=St(s,v),m=St(s,m),_=[];break;default:typeof v.onClick!="function"&&typeof m.onClick=="function"&&(s.onclick=ta)}It(u,m);var k;u=null;for(V in v)if(!m.hasOwnProperty(V)&&v.hasOwnProperty(V)&&v[V]!=null)if(V==="style"){var C=v[V];for(k in C)C.hasOwnProperty(k)&&(u||(u={}),u[k]="")}else V!=="dangerouslySetInnerHTML"&&V!=="children"&&V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(i.hasOwnProperty(V)?_||(_=[]):(_=_||[]).push(V,null));for(V in m){var R=m[V];if(C=v!=null?v[V]:void 0,m.hasOwnProperty(V)&&R!==C&&(R!=null||C!=null))if(V==="style")if(C){for(k in C)!C.hasOwnProperty(k)||R&&R.hasOwnProperty(k)||(u||(u={}),u[k]="");for(k in R)R.hasOwnProperty(k)&&C[k]!==R[k]&&(u||(u={}),u[k]=R[k])}else u||(_||(_=[]),_.push(V,u)),u=R;else V==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,C=C?C.__html:void 0,R!=null&&C!==R&&(_=_||[]).push(V,R)):V==="children"?typeof R!="string"&&typeof R!="number"||(_=_||[]).push(V,""+R):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&(i.hasOwnProperty(V)?(R!=null&&V==="onScroll"&&_t("scroll",s),_||C===R||(_=[])):(_=_||[]).push(V,R))}u&&(_=_||[]).push("style",u);var V=_;(o.updateQueue=V)&&(o.flags|=4)}},Bh=function(s,o,u,m){u!==m&&(o.flags|=4)};function po(s,o){if(!Ct)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function un(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,m=0;if(o)for(var v=s.child;v!==null;)u|=v.lanes|v.childLanes,m|=v.subtreeFlags&14680064,m|=v.flags&14680064,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)u|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=m,s.childLanes=u,o}function Fx(s,o,u){var m=o.pendingProps;switch(_u(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(o),null;case 1:return En(o.type)&&ra(),un(o),null;case 3:return m=o.stateNode,fi(),bt(Sn),bt(an),Du(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&(la(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,sr!==null&&(cc(sr),sr=null))),Zu(s,o),un(o),null;case 5:Pu(o);var v=Ns(lo.current);if(u=o.type,s!==null&&o.stateNode!=null)Vh(s,o,u,m,v),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!m){if(o.stateNode===null)throw Error(n(166));return un(o),null}if(s=Ns(br.current),la(o)){m=o.stateNode,u=o.type;var _=o.memoizedProps;switch(m[_r]=o,m[ro]=_,s=(o.mode&1)!==0,u){case"dialog":_t("cancel",m),_t("close",m);break;case"iframe":case"object":case"embed":_t("load",m);break;case"video":case"audio":for(v=0;v<eo.length;v++)_t(eo[v],m);break;case"source":_t("error",m);break;case"img":case"image":case"link":_t("error",m),_t("load",m);break;case"details":_t("toggle",m);break;case"input":ce(m,_),_t("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!_.multiple},_t("invalid",m);break;case"textarea":Ft(m,_),_t("invalid",m)}It(u,_),v=null;for(var k in _)if(_.hasOwnProperty(k)){var C=_[k];k==="children"?typeof C=="string"?m.textContent!==C&&(_.suppressHydrationWarning!==!0&&ea(m.textContent,C,s),v=["children",C]):typeof C=="number"&&m.textContent!==""+C&&(_.suppressHydrationWarning!==!0&&ea(m.textContent,C,s),v=["children",""+C]):i.hasOwnProperty(k)&&C!=null&&k==="onScroll"&&_t("scroll",m)}switch(u){case"input":mt(m),Xe(m,_,!0);break;case"textarea":mt(m),K(m);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(m.onclick=ta)}m=v,o.updateQueue=m,m!==null&&(o.flags|=4)}else{k=v.nodeType===9?v:v.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=ve(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=k.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof m.is=="string"?s=k.createElement(u,{is:m.is}):(s=k.createElement(u),u==="select"&&(k=s,m.multiple?k.multiple=!0:m.size&&(k.size=m.size))):s=k.createElementNS(s,u),s[_r]=o,s[ro]=m,zh(s,o,!1,!1),o.stateNode=s;e:{switch(k=pn(u,m),u){case"dialog":_t("cancel",s),_t("close",s),v=m;break;case"iframe":case"object":case"embed":_t("load",s),v=m;break;case"video":case"audio":for(v=0;v<eo.length;v++)_t(eo[v],s);v=m;break;case"source":_t("error",s),v=m;break;case"img":case"image":case"link":_t("error",s),_t("load",s),v=m;break;case"details":_t("toggle",s),v=m;break;case"input":ce(s,m),v=he(s,m),_t("invalid",s);break;case"option":v=m;break;case"select":s._wrapperState={wasMultiple:!!m.multiple},v=G({},m,{value:void 0}),_t("invalid",s);break;case"textarea":Ft(s,m),v=St(s,m),_t("invalid",s);break;default:v=m}It(u,v),C=v;for(_ in C)if(C.hasOwnProperty(_)){var R=C[_];_==="style"?Vt(s,R):_==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Ze(s,R)):_==="children"?typeof R=="string"?(u!=="textarea"||R!=="")&&ot(s,R):typeof R=="number"&&ot(s,""+R):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(i.hasOwnProperty(_)?R!=null&&_==="onScroll"&&_t("scroll",s):R!=null&&A(s,_,R,k))}switch(u){case"input":mt(s),Xe(s,m,!1);break;case"textarea":mt(s),K(s);break;case"option":m.value!=null&&s.setAttribute("value",""+Ie(m.value));break;case"select":s.multiple=!!m.multiple,_=m.value,_!=null?At(s,!!m.multiple,_,!1):m.defaultValue!=null&&At(s,!!m.multiple,m.defaultValue,!0);break;default:typeof v.onClick=="function"&&(s.onclick=ta)}switch(u){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return un(o),null;case 6:if(s&&o.stateNode!=null)Bh(s,o,s.memoizedProps,m);else{if(typeof m!="string"&&o.stateNode===null)throw Error(n(166));if(u=Ns(lo.current),Ns(br.current),la(o)){if(m=o.stateNode,u=o.memoizedProps,m[_r]=o,(_=m.nodeValue!==u)&&(s=jn,s!==null))switch(s.tag){case 3:ea(m.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&ea(m.nodeValue,u,(s.mode&1)!==0)}_&&(o.flags|=4)}else m=(u.nodeType===9?u:u.ownerDocument).createTextNode(m),m[_r]=o,o.stateNode=m}return un(o),null;case 13:if(bt(Rt),m=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Ct&&Ln!==null&&(o.mode&1)!==0&&(o.flags&128)===0)qf(),li(),o.flags|=98560,_=!1;else if(_=la(o),m!==null&&m.dehydrated!==null){if(s===null){if(!_)throw Error(n(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[_r]=o}else li(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;un(o),_=!1}else sr!==null&&(cc(sr),sr=null),_=!0;if(!_)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(m=m!==null,m!==(s!==null&&s.memoizedState!==null)&&m&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(Rt.current&1)!==0?zt===0&&(zt=3):hc())),o.updateQueue!==null&&(o.flags|=4),un(o),null);case 4:return fi(),Zu(s,o),s===null&&to(o.stateNode.containerInfo),un(o),null;case 10:return Cu(o.type._context),un(o),null;case 17:return En(o.type)&&ra(),un(o),null;case 19:if(bt(Rt),_=o.memoizedState,_===null)return un(o),null;if(m=(o.flags&128)!==0,k=_.rendering,k===null)if(m)po(_,!1);else{if(zt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(k=pa(s),k!==null){for(o.flags|=128,po(_,!1),m=k.updateQueue,m!==null&&(o.updateQueue=m,o.flags|=4),o.subtreeFlags=0,m=u,u=o.child;u!==null;)_=u,s=m,_.flags&=14680066,k=_.alternate,k===null?(_.childLanes=0,_.lanes=s,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=k.childLanes,_.lanes=k.lanes,_.child=k.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=k.memoizedProps,_.memoizedState=k.memoizedState,_.updateQueue=k.updateQueue,_.type=k.type,s=k.dependencies,_.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return vt(Rt,Rt.current&1|2),o.child}s=s.sibling}_.tail!==null&&We()>mi&&(o.flags|=128,m=!0,po(_,!1),o.lanes=4194304)}else{if(!m)if(s=pa(k),s!==null){if(o.flags|=128,m=!0,u=s.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),po(_,!0),_.tail===null&&_.tailMode==="hidden"&&!k.alternate&&!Ct)return un(o),null}else 2*We()-_.renderingStartTime>mi&&u!==1073741824&&(o.flags|=128,m=!0,po(_,!1),o.lanes=4194304);_.isBackwards?(k.sibling=o.child,o.child=k):(u=_.last,u!==null?u.sibling=k:o.child=k,_.last=k)}return _.tail!==null?(o=_.tail,_.rendering=o,_.tail=o.sibling,_.renderingStartTime=We(),o.sibling=null,u=Rt.current,vt(Rt,m?u&1|2:u&1),o):(un(o),null);case 22:case 23:return fc(),m=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==m&&(o.flags|=8192),m&&(o.mode&1)!==0?(Un&1073741824)!==0&&(un(o),o.subtreeFlags&6&&(o.flags|=8192)):un(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function $x(s,o){switch(_u(o),o.tag){case 1:return En(o.type)&&ra(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return fi(),bt(Sn),bt(an),Du(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return Pu(o),null;case 13:if(bt(Rt),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(n(340));li()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return bt(Rt),null;case 4:return fi(),null;case 10:return Cu(o.type._context),null;case 22:case 23:return fc(),null;case 24:return null;default:return null}}var ka=!1,cn=!1,zx=typeof WeakSet=="function"?WeakSet:Set,be=null;function pi(s,o){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(m){Mt(s,o,m)}else u.current=null}function ec(s,o,u){try{u()}catch(m){Mt(s,o,m)}}var Hh=!1;function Vx(s,o){if(fu=Bo,s=bf(),su(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var v=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var k=0,C=-1,R=-1,V=0,ee=0,ie=s,X=null;t:for(;;){for(var xe;ie!==u||v!==0&&ie.nodeType!==3||(C=k+v),ie!==_||m!==0&&ie.nodeType!==3||(R=k+m),ie.nodeType===3&&(k+=ie.nodeValue.length),(xe=ie.firstChild)!==null;)X=ie,ie=xe;for(;;){if(ie===s)break t;if(X===u&&++V===v&&(C=k),X===_&&++ee===m&&(R=k),(xe=ie.nextSibling)!==null)break;ie=X,X=ie.parentNode}ie=xe}u=C===-1||R===-1?null:{start:C,end:R}}else u=null}u=u||{start:0,end:0}}else u=null;for(hu={focusedElem:s,selectionRange:u},Bo=!1,be=o;be!==null;)if(o=be,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,be=s;else for(;be!==null;){o=be;try{var Se=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var Ee=Se.memoizedProps,Dt=Se.memoizedState,L=o.stateNode,P=L.getSnapshotBeforeUpdate(o.elementType===o.type?Ee:ir(o.type,Ee),Dt);L.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var O=o.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ae){Mt(o,o.return,ae)}if(s=o.sibling,s!==null){s.return=o.return,be=s;break}be=o.return}return Se=Hh,Hh=!1,Se}function go(s,o,u){var m=o.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var v=m=m.next;do{if((v.tag&s)===s){var _=v.destroy;v.destroy=void 0,_!==void 0&&ec(o,u,_)}v=v.next}while(v!==m)}}function Sa(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&s)===s){var m=u.create;u.destroy=m()}u=u.next}while(u!==o)}}function tc(s){var o=s.ref;if(o!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof o=="function"?o(s):o.current=s}}function Gh(s){var o=s.alternate;o!==null&&(s.alternate=null,Gh(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[_r],delete o[ro],delete o[yu],delete o[Sx],delete o[Ex])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function qh(s){return s.tag===5||s.tag===3||s.tag===4}function Wh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||qh(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function nc(s,o,u){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(s,o):u.insertBefore(s,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(s,u)):(o=u,o.appendChild(s)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=ta));else if(m!==4&&(s=s.child,s!==null))for(nc(s,o,u),s=s.sibling;s!==null;)nc(s,o,u),s=s.sibling}function rc(s,o,u){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(m!==4&&(s=s.child,s!==null))for(rc(s,o,u),s=s.sibling;s!==null;)rc(s,o,u),s=s.sibling}var Xt=null,or=!1;function as(s,o,u){for(u=u.child;u!==null;)Jh(s,o,u),u=u.sibling}function Jh(s,o,u){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(mn,u)}catch{}switch(u.tag){case 5:cn||pi(u,o);case 6:var m=Xt,v=or;Xt=null,as(s,o,u),Xt=m,or=v,Xt!==null&&(or?(s=Xt,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Xt.removeChild(u.stateNode));break;case 18:Xt!==null&&(or?(s=Xt,u=u.stateNode,s.nodeType===8?mu(s.parentNode,u):s.nodeType===1&&mu(s,u),qi(s)):mu(Xt,u.stateNode));break;case 4:m=Xt,v=or,Xt=u.stateNode.containerInfo,or=!0,as(s,o,u),Xt=m,or=v;break;case 0:case 11:case 14:case 15:if(!cn&&(m=u.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){v=m=m.next;do{var _=v,k=_.destroy;_=_.tag,k!==void 0&&((_&2)!==0||(_&4)!==0)&&ec(u,o,k),v=v.next}while(v!==m)}as(s,o,u);break;case 1:if(!cn&&(pi(u,o),m=u.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=u.memoizedProps,m.state=u.memoizedState,m.componentWillUnmount()}catch(C){Mt(u,o,C)}as(s,o,u);break;case 21:as(s,o,u);break;case 22:u.mode&1?(cn=(m=cn)||u.memoizedState!==null,as(s,o,u),cn=m):as(s,o,u);break;default:as(s,o,u)}}function Kh(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new zx),o.forEach(function(m){var v=Qx.bind(null,s,m);u.has(m)||(u.add(m),m.then(v,v))})}}function ar(s,o){var u=o.deletions;if(u!==null)for(var m=0;m<u.length;m++){var v=u[m];try{var _=s,k=o,C=k;e:for(;C!==null;){switch(C.tag){case 5:Xt=C.stateNode,or=!1;break e;case 3:Xt=C.stateNode.containerInfo,or=!0;break e;case 4:Xt=C.stateNode.containerInfo,or=!0;break e}C=C.return}if(Xt===null)throw Error(n(160));Jh(_,k,v),Xt=null,or=!1;var R=v.alternate;R!==null&&(R.return=null),v.return=null}catch(V){Mt(v,o,V)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Yh(o,s),o=o.sibling}function Yh(s,o){var u=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ar(o,s),Sr(s),m&4){try{go(3,s,s.return),Sa(3,s)}catch(Ee){Mt(s,s.return,Ee)}try{go(5,s,s.return)}catch(Ee){Mt(s,s.return,Ee)}}break;case 1:ar(o,s),Sr(s),m&512&&u!==null&&pi(u,u.return);break;case 5:if(ar(o,s),Sr(s),m&512&&u!==null&&pi(u,u.return),s.flags&32){var v=s.stateNode;try{ot(v,"")}catch(Ee){Mt(s,s.return,Ee)}}if(m&4&&(v=s.stateNode,v!=null)){var _=s.memoizedProps,k=u!==null?u.memoizedProps:_,C=s.type,R=s.updateQueue;if(s.updateQueue=null,R!==null)try{C==="input"&&_.type==="radio"&&_.name!=null&&Ue(v,_),pn(C,k);var V=pn(C,_);for(k=0;k<R.length;k+=2){var ee=R[k],ie=R[k+1];ee==="style"?Vt(v,ie):ee==="dangerouslySetInnerHTML"?Ze(v,ie):ee==="children"?ot(v,ie):A(v,ee,ie,V)}switch(C){case"input":Ae(v,_);break;case"textarea":Qt(v,_);break;case"select":var X=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!_.multiple;var xe=_.value;xe!=null?At(v,!!_.multiple,xe,!1):X!==!!_.multiple&&(_.defaultValue!=null?At(v,!!_.multiple,_.defaultValue,!0):At(v,!!_.multiple,_.multiple?[]:"",!1))}v[ro]=_}catch(Ee){Mt(s,s.return,Ee)}}break;case 6:if(ar(o,s),Sr(s),m&4){if(s.stateNode===null)throw Error(n(162));v=s.stateNode,_=s.memoizedProps;try{v.nodeValue=_}catch(Ee){Mt(s,s.return,Ee)}}break;case 3:if(ar(o,s),Sr(s),m&4&&u!==null&&u.memoizedState.isDehydrated)try{qi(o.containerInfo)}catch(Ee){Mt(s,s.return,Ee)}break;case 4:ar(o,s),Sr(s);break;case 13:ar(o,s),Sr(s),v=s.child,v.flags&8192&&(_=v.memoizedState!==null,v.stateNode.isHidden=_,!_||v.alternate!==null&&v.alternate.memoizedState!==null||(oc=We())),m&4&&Kh(s);break;case 22:if(ee=u!==null&&u.memoizedState!==null,s.mode&1?(cn=(V=cn)||ee,ar(o,s),cn=V):ar(o,s),Sr(s),m&8192){if(V=s.memoizedState!==null,(s.stateNode.isHidden=V)&&!ee&&(s.mode&1)!==0)for(be=s,ee=s.child;ee!==null;){for(ie=be=ee;be!==null;){switch(X=be,xe=X.child,X.tag){case 0:case 11:case 14:case 15:go(4,X,X.return);break;case 1:pi(X,X.return);var Se=X.stateNode;if(typeof Se.componentWillUnmount=="function"){m=X,u=X.return;try{o=m,Se.props=o.memoizedProps,Se.state=o.memoizedState,Se.componentWillUnmount()}catch(Ee){Mt(m,u,Ee)}}break;case 5:pi(X,X.return);break;case 22:if(X.memoizedState!==null){Zh(ie);continue}}xe!==null?(xe.return=X,be=xe):Zh(ie)}ee=ee.sibling}e:for(ee=null,ie=s;;){if(ie.tag===5){if(ee===null){ee=ie;try{v=ie.stateNode,V?(_=v.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(C=ie.stateNode,R=ie.memoizedProps.style,k=R!=null&&R.hasOwnProperty("display")?R.display:null,C.style.display=hn("display",k))}catch(Ee){Mt(s,s.return,Ee)}}}else if(ie.tag===6){if(ee===null)try{ie.stateNode.nodeValue=V?"":ie.memoizedProps}catch(Ee){Mt(s,s.return,Ee)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===s)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===s)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===s)break e;ee===ie&&(ee=null),ie=ie.return}ee===ie&&(ee=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:ar(o,s),Sr(s),m&4&&Kh(s);break;case 21:break;default:ar(o,s),Sr(s)}}function Sr(s){var o=s.flags;if(o&2){try{e:{for(var u=s.return;u!==null;){if(qh(u)){var m=u;break e}u=u.return}throw Error(n(160))}switch(m.tag){case 5:var v=m.stateNode;m.flags&32&&(ot(v,""),m.flags&=-33);var _=Wh(s);rc(s,_,v);break;case 3:case 4:var k=m.stateNode.containerInfo,C=Wh(s);nc(s,C,k);break;default:throw Error(n(161))}}catch(R){Mt(s,s.return,R)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Bx(s,o,u){be=s,Qh(s)}function Qh(s,o,u){for(var m=(s.mode&1)!==0;be!==null;){var v=be,_=v.child;if(v.tag===22&&m){var k=v.memoizedState!==null||ka;if(!k){var C=v.alternate,R=C!==null&&C.memoizedState!==null||cn;C=ka;var V=cn;if(ka=k,(cn=R)&&!V)for(be=v;be!==null;)k=be,R=k.child,k.tag===22&&k.memoizedState!==null?ep(v):R!==null?(R.return=k,be=R):ep(v);for(;_!==null;)be=_,Qh(_),_=_.sibling;be=v,ka=C,cn=V}Xh(s)}else(v.subtreeFlags&8772)!==0&&_!==null?(_.return=v,be=_):Xh(s)}}function Xh(s){for(;be!==null;){var o=be;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:cn||Sa(5,o);break;case 1:var m=o.stateNode;if(o.flags&4&&!cn)if(u===null)m.componentDidMount();else{var v=o.elementType===o.type?u.memoizedProps:ir(o.type,u.memoizedProps);m.componentDidUpdate(v,u.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var _=o.updateQueue;_!==null&&Zf(o,_,m);break;case 3:var k=o.updateQueue;if(k!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}Zf(o,k,u)}break;case 5:var C=o.stateNode;if(u===null&&o.flags&4){u=C;var R=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&u.focus();break;case"img":R.src&&(u.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var V=o.alternate;if(V!==null){var ee=V.memoizedState;if(ee!==null){var ie=ee.dehydrated;ie!==null&&qi(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}cn||o.flags&512&&tc(o)}catch(X){Mt(o,o.return,X)}}if(o===s){be=null;break}if(u=o.sibling,u!==null){u.return=o.return,be=u;break}be=o.return}}function Zh(s){for(;be!==null;){var o=be;if(o===s){be=null;break}var u=o.sibling;if(u!==null){u.return=o.return,be=u;break}be=o.return}}function ep(s){for(;be!==null;){var o=be;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Sa(4,o)}catch(R){Mt(o,u,R)}break;case 1:var m=o.stateNode;if(typeof m.componentDidMount=="function"){var v=o.return;try{m.componentDidMount()}catch(R){Mt(o,v,R)}}var _=o.return;try{tc(o)}catch(R){Mt(o,_,R)}break;case 5:var k=o.return;try{tc(o)}catch(R){Mt(o,k,R)}}}catch(R){Mt(o,o.return,R)}if(o===s){be=null;break}var C=o.sibling;if(C!==null){C.return=o.return,be=C;break}be=o.return}}var Hx=Math.ceil,Ea=F.ReactCurrentDispatcher,sc=F.ReactCurrentOwner,Jn=F.ReactCurrentBatchConfig,it=0,Jt=null,Lt=null,Zt=0,Un=0,gi=ns(0),zt=0,mo=null,Is=0,Ta=0,ic=0,yo=null,Cn=null,oc=0,mi=1/0,Fr=null,Ca=!1,ac=null,ls=null,Na=!1,us=null,Aa=0,vo=0,lc=null,Ia=-1,Ra=0;function vn(){return(it&6)!==0?We():Ia!==-1?Ia:Ia=We()}function cs(s){return(s.mode&1)===0?1:(it&2)!==0&&Zt!==0?Zt&-Zt:Cx.transition!==null?(Ra===0&&(Ra=qt()),Ra):(s=ct,s!==0||(s=window.event,s=s===void 0?16:tf(s.type)),s)}function lr(s,o,u,m){if(50<vo)throw vo=0,lc=null,Error(n(185));xr(s,u,m),((it&2)===0||s!==Jt)&&(s===Jt&&((it&2)===0&&(Ta|=u),zt===4&&ds(s,Zt)),Nn(s,m),u===1&&it===0&&(o.mode&1)===0&&(mi=We()+500,ia&&ss()))}function Nn(s,o){var u=s.callbackNode;Gt(s,o);var m=sn(s,s===Jt?Zt:0);if(m===0)u!==null&&gt(u),s.callbackNode=null,s.callbackPriority=0;else if(o=m&-m,s.callbackPriority!==o){if(u!=null&&gt(u),o===1)s.tag===0?Tx(np.bind(null,s)):zf(np.bind(null,s)),bx(function(){(it&6)===0&&ss()}),u=null;else{switch($o(m)){case 1:u=Vn;break;case 4:u=Rr;break;case 16:u=nr;break;case 536870912:u=yr;break;default:u=nr}u=cp(u,tp.bind(null,s))}s.callbackPriority=o,s.callbackNode=u}}function tp(s,o){if(Ia=-1,Ra=0,(it&6)!==0)throw Error(n(327));var u=s.callbackNode;if(yi()&&s.callbackNode!==u)return null;var m=sn(s,s===Jt?Zt:0);if(m===0)return null;if((m&30)!==0||(m&s.expiredLanes)!==0||o)o=Pa(s,m);else{o=m;var v=it;it|=2;var _=sp();(Jt!==s||Zt!==o)&&(Fr=null,mi=We()+500,Ps(s,o));do try{Wx();break}catch(C){rp(s,C)}while(!0);Tu(),Ea.current=_,it=v,Lt!==null?o=0:(Jt=null,Zt=0,o=zt)}if(o!==0){if(o===2&&(v=on(s),v!==0&&(m=v,o=uc(s,v))),o===1)throw u=mo,Ps(s,0),ds(s,m),Nn(s,We()),u;if(o===6)ds(s,m);else{if(v=s.current.alternate,(m&30)===0&&!Gx(v)&&(o=Pa(s,m),o===2&&(_=on(s),_!==0&&(m=_,o=uc(s,_))),o===1))throw u=mo,Ps(s,0),ds(s,m),Nn(s,We()),u;switch(s.finishedWork=v,s.finishedLanes=m,o){case 0:case 1:throw Error(n(345));case 2:Ms(s,Cn,Fr);break;case 3:if(ds(s,m),(m&130023424)===m&&(o=oc+500-We(),10<o)){if(sn(s,0)!==0)break;if(v=s.suspendedLanes,(v&m)!==m){vn(),s.pingedLanes|=s.suspendedLanes&v;break}s.timeoutHandle=gu(Ms.bind(null,s,Cn,Fr),o);break}Ms(s,Cn,Fr);break;case 4:if(ds(s,m),(m&4194240)===m)break;for(o=s.eventTimes,v=-1;0<m;){var k=31-rn(m);_=1<<k,k=o[k],k>v&&(v=k),m&=~_}if(m=v,m=We()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*Hx(m/1960))-m,10<m){s.timeoutHandle=gu(Ms.bind(null,s,Cn,Fr),m);break}Ms(s,Cn,Fr);break;case 5:Ms(s,Cn,Fr);break;default:throw Error(n(329))}}}return Nn(s,We()),s.callbackNode===u?tp.bind(null,s):null}function uc(s,o){var u=yo;return s.current.memoizedState.isDehydrated&&(Ps(s,o).flags|=256),s=Pa(s,o),s!==2&&(o=Cn,Cn=u,o!==null&&cc(o)),s}function cc(s){Cn===null?Cn=s:Cn.push.apply(Cn,s)}function Gx(s){for(var o=s;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var m=0;m<u.length;m++){var v=u[m],_=v.getSnapshot;v=v.value;try{if(!rr(_(),v))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ds(s,o){for(o&=~ic,o&=~Ta,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var u=31-rn(o),m=1<<u;s[u]=-1,o&=~m}}function np(s){if((it&6)!==0)throw Error(n(327));yi();var o=sn(s,0);if((o&1)===0)return Nn(s,We()),null;var u=Pa(s,o);if(s.tag!==0&&u===2){var m=on(s);m!==0&&(o=m,u=uc(s,m))}if(u===1)throw u=mo,Ps(s,0),ds(s,o),Nn(s,We()),u;if(u===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,Ms(s,Cn,Fr),Nn(s,We()),null}function dc(s,o){var u=it;it|=1;try{return s(o)}finally{it=u,it===0&&(mi=We()+500,ia&&ss())}}function Rs(s){us!==null&&us.tag===0&&(it&6)===0&&yi();var o=it;it|=1;var u=Jn.transition,m=ct;try{if(Jn.transition=null,ct=1,s)return s()}finally{ct=m,Jn.transition=u,it=o,(it&6)===0&&ss()}}function fc(){Un=gi.current,bt(gi)}function Ps(s,o){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,_x(u)),Lt!==null)for(u=Lt.return;u!==null;){var m=u;switch(_u(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&ra();break;case 3:fi(),bt(Sn),bt(an),Du();break;case 5:Pu(m);break;case 4:fi();break;case 13:bt(Rt);break;case 19:bt(Rt);break;case 10:Cu(m.type._context);break;case 22:case 23:fc()}u=u.return}if(Jt=s,Lt=s=fs(s.current,null),Zt=Un=o,zt=0,mo=null,ic=Ta=Is=0,Cn=yo=null,Cs!==null){for(o=0;o<Cs.length;o++)if(u=Cs[o],m=u.interleaved,m!==null){u.interleaved=null;var v=m.next,_=u.pending;if(_!==null){var k=_.next;_.next=v,m.next=k}u.pending=m}Cs=null}return s}function rp(s,o){do{var u=Lt;try{if(Tu(),ga.current=xa,ma){for(var m=Pt.memoizedState;m!==null;){var v=m.queue;v!==null&&(v.pending=null),m=m.next}ma=!1}if(As=0,Wt=$t=Pt=null,uo=!1,co=0,sc.current=null,u===null||u.return===null){zt=1,mo=o,Lt=null;break}e:{var _=s,k=u.return,C=u,R=o;if(o=Zt,C.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var V=R,ee=C,ie=ee.tag;if((ee.mode&1)===0&&(ie===0||ie===11||ie===15)){var X=ee.alternate;X?(ee.updateQueue=X.updateQueue,ee.memoizedState=X.memoizedState,ee.lanes=X.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var xe=Nh(k);if(xe!==null){xe.flags&=-257,Ah(xe,k,C,_,o),xe.mode&1&&Ch(_,V,o),o=xe,R=V;var Se=o.updateQueue;if(Se===null){var Ee=new Set;Ee.add(R),o.updateQueue=Ee}else Se.add(R);break e}else{if((o&1)===0){Ch(_,V,o),hc();break e}R=Error(n(426))}}else if(Ct&&C.mode&1){var Dt=Nh(k);if(Dt!==null){(Dt.flags&65536)===0&&(Dt.flags|=256),Ah(Dt,k,C,_,o),Su(hi(R,C));break e}}_=R=hi(R,C),zt!==4&&(zt=2),yo===null?yo=[_]:yo.push(_),_=k;do{switch(_.tag){case 3:_.flags|=65536,o&=-o,_.lanes|=o;var L=Eh(_,R,o);Xf(_,L);break e;case 1:C=R;var P=_.type,O=_.stateNode;if((_.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(ls===null||!ls.has(O)))){_.flags|=65536,o&=-o,_.lanes|=o;var ae=Th(_,C,o);Xf(_,ae);break e}}_=_.return}while(_!==null)}op(u)}catch(Ce){o=Ce,Lt===u&&u!==null&&(Lt=u=u.return);continue}break}while(!0)}function sp(){var s=Ea.current;return Ea.current=xa,s===null?xa:s}function hc(){(zt===0||zt===3||zt===2)&&(zt=4),Jt===null||(Is&268435455)===0&&(Ta&268435455)===0||ds(Jt,Zt)}function Pa(s,o){var u=it;it|=2;var m=sp();(Jt!==s||Zt!==o)&&(Fr=null,Ps(s,o));do try{qx();break}catch(v){rp(s,v)}while(!0);if(Tu(),it=u,Ea.current=m,Lt!==null)throw Error(n(261));return Jt=null,Zt=0,zt}function qx(){for(;Lt!==null;)ip(Lt)}function Wx(){for(;Lt!==null&&!Tt();)ip(Lt)}function ip(s){var o=up(s.alternate,s,Un);s.memoizedProps=s.pendingProps,o===null?op(s):Lt=o,sc.current=null}function op(s){var o=s;do{var u=o.alternate;if(s=o.return,(o.flags&32768)===0){if(u=Fx(u,o,Un),u!==null){Lt=u;return}}else{if(u=$x(u,o),u!==null){u.flags&=32767,Lt=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{zt=6,Lt=null;return}}if(o=o.sibling,o!==null){Lt=o;return}Lt=o=s}while(o!==null);zt===0&&(zt=5)}function Ms(s,o,u){var m=ct,v=Jn.transition;try{Jn.transition=null,ct=1,Jx(s,o,u,m)}finally{Jn.transition=v,ct=m}return null}function Jx(s,o,u,m){do yi();while(us!==null);if((it&6)!==0)throw Error(n(327));u=s.finishedWork;var v=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var _=u.lanes|u.childLanes;if(kn(s,_),s===Jt&&(Lt=Jt=null,Zt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Na||(Na=!0,cp(nr,function(){return yi(),null})),_=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||_){_=Jn.transition,Jn.transition=null;var k=ct;ct=1;var C=it;it|=4,sc.current=null,Vx(s,u),Yh(u,s),px(hu),Bo=!!fu,hu=fu=null,s.current=u,Bx(u),Qe(),it=C,ct=k,Jn.transition=_}else s.current=u;if(Na&&(Na=!1,us=s,Aa=v),_=s.pendingLanes,_===0&&(ls=null),vr(u.stateNode),Nn(s,We()),o!==null)for(m=s.onRecoverableError,u=0;u<o.length;u++)v=o[u],m(v.value,{componentStack:v.stack,digest:v.digest});if(Ca)throw Ca=!1,s=ac,ac=null,s;return(Aa&1)!==0&&s.tag!==0&&yi(),_=s.pendingLanes,(_&1)!==0?s===lc?vo++:(vo=0,lc=s):vo=0,ss(),null}function yi(){if(us!==null){var s=$o(Aa),o=Jn.transition,u=ct;try{if(Jn.transition=null,ct=16>s?16:s,us===null)var m=!1;else{if(s=us,us=null,Aa=0,(it&6)!==0)throw Error(n(331));var v=it;for(it|=4,be=s.current;be!==null;){var _=be,k=_.child;if((be.flags&16)!==0){var C=_.deletions;if(C!==null){for(var R=0;R<C.length;R++){var V=C[R];for(be=V;be!==null;){var ee=be;switch(ee.tag){case 0:case 11:case 15:go(8,ee,_)}var ie=ee.child;if(ie!==null)ie.return=ee,be=ie;else for(;be!==null;){ee=be;var X=ee.sibling,xe=ee.return;if(Gh(ee),ee===V){be=null;break}if(X!==null){X.return=xe,be=X;break}be=xe}}}var Se=_.alternate;if(Se!==null){var Ee=Se.child;if(Ee!==null){Se.child=null;do{var Dt=Ee.sibling;Ee.sibling=null,Ee=Dt}while(Ee!==null)}}be=_}}if((_.subtreeFlags&2064)!==0&&k!==null)k.return=_,be=k;else e:for(;be!==null;){if(_=be,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:go(9,_,_.return)}var L=_.sibling;if(L!==null){L.return=_.return,be=L;break e}be=_.return}}var P=s.current;for(be=P;be!==null;){k=be;var O=k.child;if((k.subtreeFlags&2064)!==0&&O!==null)O.return=k,be=O;else e:for(k=P;be!==null;){if(C=be,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Sa(9,C)}}catch(Ce){Mt(C,C.return,Ce)}if(C===k){be=null;break e}var ae=C.sibling;if(ae!==null){ae.return=C.return,be=ae;break e}be=C.return}}if(it=v,ss(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(mn,s)}catch{}m=!0}return m}finally{ct=u,Jn.transition=o}}return!1}function ap(s,o,u){o=hi(u,o),o=Eh(s,o,1),s=os(s,o,1),o=vn(),s!==null&&(xr(s,1,o),Nn(s,o))}function Mt(s,o,u){if(s.tag===3)ap(s,s,u);else for(;o!==null;){if(o.tag===3){ap(o,s,u);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ls===null||!ls.has(m))){s=hi(u,s),s=Th(o,s,1),o=os(o,s,1),s=vn(),o!==null&&(xr(o,1,s),Nn(o,s));break}}o=o.return}}function Kx(s,o,u){var m=s.pingCache;m!==null&&m.delete(o),o=vn(),s.pingedLanes|=s.suspendedLanes&u,Jt===s&&(Zt&u)===u&&(zt===4||zt===3&&(Zt&130023424)===Zt&&500>We()-oc?Ps(s,0):ic|=u),Nn(s,o)}function lp(s,o){o===0&&((s.mode&1)===0?o=1:(o=le,le<<=1,(le&130023424)===0&&(le=4194304)));var u=vn();s=Lr(s,o),s!==null&&(xr(s,o,u),Nn(s,u))}function Yx(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),lp(s,u)}function Qx(s,o){var u=0;switch(s.tag){case 13:var m=s.stateNode,v=s.memoizedState;v!==null&&(u=v.retryLane);break;case 19:m=s.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(o),lp(s,u)}var up;up=function(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps||Sn.current)Tn=!0;else{if((s.lanes&u)===0&&(o.flags&128)===0)return Tn=!1,Ox(s,o,u);Tn=(s.flags&131072)!==0}else Tn=!1,Ct&&(o.flags&1048576)!==0&&Vf(o,aa,o.index);switch(o.lanes=0,o.tag){case 2:var m=o.type;ba(s,o),s=o.pendingProps;var v=ii(o,an.current);di(o,u),v=Uu(null,o,m,s,v,u);var _=Ou();return o.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,En(m)?(_=!0,sa(o)):_=!1,o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Iu(o),v.updater=wa,o.stateNode=v,v._reactInternals=o,Hu(o,m,s,u),o=Ju(null,o,m,!0,_,u)):(o.tag=0,Ct&&_&&wu(o),yn(null,o,v,u),o=o.child),o;case 16:m=o.elementType;e:{switch(ba(s,o),s=o.pendingProps,v=m._init,m=v(m._payload),o.type=m,v=o.tag=Zx(m),s=ir(m,s),v){case 0:o=Wu(null,o,m,s,u);break e;case 1:o=jh(null,o,m,s,u);break e;case 11:o=Ih(null,o,m,s,u);break e;case 14:o=Rh(null,o,m,ir(m.type,s),u);break e}throw Error(n(306,m,""))}return o;case 0:return m=o.type,v=o.pendingProps,v=o.elementType===m?v:ir(m,v),Wu(s,o,m,v,u);case 1:return m=o.type,v=o.pendingProps,v=o.elementType===m?v:ir(m,v),jh(s,o,m,v,u);case 3:e:{if(Lh(o),s===null)throw Error(n(387));m=o.pendingProps,_=o.memoizedState,v=_.element,Qf(s,o),ha(o,m,null,u);var k=o.memoizedState;if(m=k.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){v=hi(Error(n(423)),o),o=Uh(s,o,m,u,v);break e}else if(m!==v){v=hi(Error(n(424)),o),o=Uh(s,o,m,u,v);break e}else for(Ln=ts(o.stateNode.containerInfo.firstChild),jn=o,Ct=!0,sr=null,u=Kf(o,null,m,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(li(),m===v){o=Or(s,o,u);break e}yn(s,o,m,u)}o=o.child}return o;case 5:return eh(o),s===null&&ku(o),m=o.type,v=o.pendingProps,_=s!==null?s.memoizedProps:null,k=v.children,pu(m,v)?k=null:_!==null&&pu(m,_)&&(o.flags|=32),Dh(s,o),yn(s,o,k,u),o.child;case 6:return s===null&&ku(o),null;case 13:return Oh(s,o,u);case 4:return Ru(o,o.stateNode.containerInfo),m=o.pendingProps,s===null?o.child=ui(o,null,m,u):yn(s,o,m,u),o.child;case 11:return m=o.type,v=o.pendingProps,v=o.elementType===m?v:ir(m,v),Ih(s,o,m,v,u);case 7:return yn(s,o,o.pendingProps,u),o.child;case 8:return yn(s,o,o.pendingProps.children,u),o.child;case 12:return yn(s,o,o.pendingProps.children,u),o.child;case 10:e:{if(m=o.type._context,v=o.pendingProps,_=o.memoizedProps,k=v.value,vt(ca,m._currentValue),m._currentValue=k,_!==null)if(rr(_.value,k)){if(_.children===v.children&&!Sn.current){o=Or(s,o,u);break e}}else for(_=o.child,_!==null&&(_.return=o);_!==null;){var C=_.dependencies;if(C!==null){k=_.child;for(var R=C.firstContext;R!==null;){if(R.context===m){if(_.tag===1){R=Ur(-1,u&-u),R.tag=2;var V=_.updateQueue;if(V!==null){V=V.shared;var ee=V.pending;ee===null?R.next=R:(R.next=ee.next,ee.next=R),V.pending=R}}_.lanes|=u,R=_.alternate,R!==null&&(R.lanes|=u),Nu(_.return,u,o),C.lanes|=u;break}R=R.next}}else if(_.tag===10)k=_.type===o.type?null:_.child;else if(_.tag===18){if(k=_.return,k===null)throw Error(n(341));k.lanes|=u,C=k.alternate,C!==null&&(C.lanes|=u),Nu(k,u,o),k=_.sibling}else k=_.child;if(k!==null)k.return=_;else for(k=_;k!==null;){if(k===o){k=null;break}if(_=k.sibling,_!==null){_.return=k.return,k=_;break}k=k.return}_=k}yn(s,o,v.children,u),o=o.child}return o;case 9:return v=o.type,m=o.pendingProps.children,di(o,u),v=qn(v),m=m(v),o.flags|=1,yn(s,o,m,u),o.child;case 14:return m=o.type,v=ir(m,o.pendingProps),v=ir(m.type,v),Rh(s,o,m,v,u);case 15:return Ph(s,o,o.type,o.pendingProps,u);case 17:return m=o.type,v=o.pendingProps,v=o.elementType===m?v:ir(m,v),ba(s,o),o.tag=1,En(m)?(s=!0,sa(o)):s=!1,di(o,u),kh(o,m,v),Hu(o,m,v,u),Ju(null,o,m,!0,s,u);case 19:return $h(s,o,u);case 22:return Mh(s,o,u)}throw Error(n(156,o.tag))};function cp(s,o){return Ve(s,o)}function Xx(s,o,u,m){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(s,o,u,m){return new Xx(s,o,u,m)}function pc(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Zx(s){if(typeof s=="function")return pc(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Pe)return 11;if(s===Je)return 14}return 2}function fs(s,o){var u=s.alternate;return u===null?(u=Kn(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function Ma(s,o,u,m,v,_){var k=2;if(m=s,typeof s=="function")pc(s)&&(k=1);else if(typeof s=="string")k=5;else e:switch(s){case B:return Ds(u.children,v,_,o);case ue:k=8,v|=8;break;case Z:return s=Kn(12,u,o,v|2),s.elementType=Z,s.lanes=_,s;case we:return s=Kn(13,u,o,v),s.elementType=we,s.lanes=_,s;case $e:return s=Kn(19,u,o,v),s.elementType=$e,s.lanes=_,s;case Te:return Da(u,v,_,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case me:k=10;break e;case _e:k=9;break e;case Pe:k=11;break e;case Je:k=14;break e;case Le:k=16,m=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return o=Kn(k,u,o,v),o.elementType=s,o.type=m,o.lanes=_,o}function Ds(s,o,u,m){return s=Kn(7,s,m,o),s.lanes=u,s}function Da(s,o,u,m){return s=Kn(22,s,m,o),s.elementType=Te,s.lanes=u,s.stateNode={isHidden:!1},s}function gc(s,o,u){return s=Kn(6,s,null,o),s.lanes=u,s}function mc(s,o,u){return o=Kn(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function ew(s,o,u,m,v){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bn(0),this.expirationTimes=Bn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bn(0),this.identifierPrefix=m,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function yc(s,o,u,m,v,_,k,C,R){return s=new ew(s,o,u,C,R),o===1?(o=1,_===!0&&(o|=8)):o=0,_=Kn(3,null,null,o),s.current=_,_.stateNode=s,_.memoizedState={element:m,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Iu(_),s}function tw(s,o,u){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Y,key:m==null?null:""+m,children:s,containerInfo:o,implementation:u}}function dp(s){if(!s)return rs;s=s._reactInternals;e:{if(bn(s)!==s||s.tag!==1)throw Error(n(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(En(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(s.tag===1){var u=s.type;if(En(u))return Ff(s,u,o)}return o}function fp(s,o,u,m,v,_,k,C,R){return s=yc(u,m,!0,s,v,_,k,C,R),s.context=dp(null),u=s.current,m=vn(),v=cs(u),_=Ur(m,v),_.callback=o??null,os(u,_,v),s.current.lanes=v,xr(s,v,m),Nn(s,m),s}function ja(s,o,u,m){var v=o.current,_=vn(),k=cs(v);return u=dp(u),o.context===null?o.context=u:o.pendingContext=u,o=Ur(_,k),o.payload={element:s},m=m===void 0?null:m,m!==null&&(o.callback=m),s=os(v,o,k),s!==null&&(lr(s,v,k,_),fa(s,v,k)),k}function La(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function hp(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function vc(s,o){hp(s,o),(s=s.alternate)&&hp(s,o)}function nw(){return null}var pp=typeof reportError=="function"?reportError:function(s){console.error(s)};function xc(s){this._internalRoot=s}Ua.prototype.render=xc.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(n(409));ja(s,o,null,null)},Ua.prototype.unmount=xc.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Rs(function(){ja(null,s,null,null)}),o[Pr]=null}};function Ua(s){this._internalRoot=s}Ua.prototype.unstable_scheduleHydration=function(s){if(s){var o=Yd();s={blockedOn:null,target:s,priority:o};for(var u=0;u<Xr.length&&o!==0&&o<Xr[u].priority;u++);Xr.splice(u,0,s),u===0&&Zd(s)}};function wc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Oa(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function gp(){}function rw(s,o,u,m,v){if(v){if(typeof m=="function"){var _=m;m=function(){var V=La(k);_.call(V)}}var k=fp(o,m,s,0,null,!1,!1,"",gp);return s._reactRootContainer=k,s[Pr]=k.current,to(s.nodeType===8?s.parentNode:s),Rs(),k}for(;v=s.lastChild;)s.removeChild(v);if(typeof m=="function"){var C=m;m=function(){var V=La(R);C.call(V)}}var R=yc(s,0,!1,null,null,!1,!1,"",gp);return s._reactRootContainer=R,s[Pr]=R.current,to(s.nodeType===8?s.parentNode:s),Rs(function(){ja(o,R,u,m)}),R}function Fa(s,o,u,m,v){var _=u._reactRootContainer;if(_){var k=_;if(typeof v=="function"){var C=v;v=function(){var R=La(k);C.call(R)}}ja(o,k,s,v)}else k=rw(u,o,s,v,m);return La(k)}wr=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var u=tt(o.pendingLanes);u!==0&&(Jr(o,u|1),Nn(o,We()),(it&6)===0&&(mi=We()+500,ss()))}break;case 13:Rs(function(){var m=Lr(s,1);if(m!==null){var v=vn();lr(m,s,1,v)}}),vc(s,1)}},Ks=function(s){if(s.tag===13){var o=Lr(s,134217728);if(o!==null){var u=vn();lr(o,s,134217728,u)}vc(s,134217728)}},Kd=function(s){if(s.tag===13){var o=cs(s),u=Lr(s,o);if(u!==null){var m=vn();lr(u,s,o,m)}vc(s,o)}},Yd=function(){return ct},Qd=function(s,o){var u=ct;try{return ct=s,o()}finally{ct=u}},rt=function(s,o,u){switch(o){case"input":if(Ae(s,u),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var m=u[o];if(m!==s&&m.form===s.form){var v=na(m);if(!v)throw Error(n(90));yt(m),Ae(m,v)}}}break;case"textarea":Qt(s,u);break;case"select":o=u.value,o!=null&&At(s,!!u.multiple,o,!1)}},Mn=dc,gn=Rs;var sw={usingClientEntryPoint:!1,Events:[so,ri,na,ut,Bt,dc]},xo={findFiberByHostInstance:ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iw={bundleType:xo.bundleType,version:xo.version,rendererPackageName:xo.rendererPackageName,rendererConfig:xo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=D(s),s===null?null:s.stateNode},findFiberByHostInstance:xo.findFiberByHostInstance||nw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$a.isDisabled&&$a.supportsFiber)try{mn=$a.inject(iw),nn=$a}catch{}}return An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sw,An.createPortal=function(s,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wc(o))throw Error(n(200));return tw(s,o,null,u)},An.createRoot=function(s,o){if(!wc(s))throw Error(n(299));var u=!1,m="",v=pp;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),o=yc(s,1,!1,null,null,u,!1,m,v),s[Pr]=o.current,to(s.nodeType===8?s.parentNode:s),new xc(o)},An.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=D(o),s=s===null?null:s.stateNode,s},An.flushSync=function(s){return Rs(s)},An.hydrate=function(s,o,u){if(!Oa(o))throw Error(n(200));return Fa(null,s,o,!0,u)},An.hydrateRoot=function(s,o,u){if(!wc(s))throw Error(n(405));var m=u!=null&&u.hydratedSources||null,v=!1,_="",k=pp;if(u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(k=u.onRecoverableError)),o=fp(o,null,s,1,u??null,v,!1,_,k),s[Pr]=o.current,to(s),m)for(s=0;s<m.length;s++)u=m[s],v=u._getVersion,v=v(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,v]:o.mutableSourceEagerHydrationData.push(u,v);return new Ua(o)},An.render=function(s,o,u){if(!Oa(o))throw Error(n(200));return Fa(null,s,o,!1,u)},An.unmountComponentAtNode=function(s){if(!Oa(s))throw Error(n(40));return s._reactRootContainer?(Rs(function(){Fa(null,null,s,!1,function(){s._reactRootContainer=null,s[Pr]=null})}),!0):!1},An.unstable_batchedUpdates=dc,An.unstable_renderSubtreeIntoContainer=function(s,o,u,m){if(!Oa(u))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return Fa(s,o,u,!1,m)},An.version="18.3.1-next-f1338f8080-20240426",An}var kp;function pw(){if(kp)return kc.exports;kp=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),kc.exports=hw(),kc.exports}var Sp;function gw(){if(Sp)return za;Sp=1;var t=pw();return za.createRoot=t.createRoot,za.hydrateRoot=t.hydrateRoot,za}var mw=gw();const yw=_d(mw);var pt=(t=>(t.DASHBOARD="dashboard",t.CALENDAR="calendar",t.NEWS="news",t.LISTS="lists",t.MEALS="meals",t.ACTIVITIES="activities",t.SETTINGS="settings",t.WEATHER="weather",t))(pt||{});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(t,e)=>{const n=j.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:f="",children:p,...g},y)=>j.createElement("svg",{ref:y,...vw,width:i,height:i,stroke:r,strokeWidth:l?Number(a)*24/Number(i):a,className:["lucide",`lucide-${xw(t)}`,f].join(" "),...g},[...e.map(([x,w])=>j.createElement(x,w)),...Array.isArray(p)?p:[p]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=te("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=te("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=te("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=te("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=te("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=te("CalendarHeart",[["path",{d:"M3 10h18V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7",key:"136lmk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21.29 14.7a2.43 2.43 0 0 0-2.65-.52c-.3.12-.57.3-.8.53l-.34.34-.35-.34a2.43 2.43 0 0 0-2.65-.53c-.3.12-.56.3-.79.53-.95.94-1 2.53.2 3.74L17.5 22l3.6-3.55c1.2-1.21 1.14-2.8.19-3.74Z",key:"1t7hil"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=te("Carrot",[["path",{d:"M2.27 21.7s9.87-3.5 12.73-6.36a4.5 4.5 0 0 0-6.36-6.37C5.77 11.84 2.27 21.7 2.27 21.7zM8.64 14l-2.05-2.04M15.34 15l-2.46-2.46",key:"rfqxbe"}],["path",{d:"M22 9s-1.33-2-3.5-2C16.86 7 15 9 15 9s1.33 2 3.5 2S22 9 22 9z",key:"6b25w4"}],["path",{d:"M15 2s-2 1.33-2 3.5S15 9 15 9s2-1.84 2-3.5C17 3.33 15 2 15 2z",key:"fn65lo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=te("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=te("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=te("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=te("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=te("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=te("CloudFog",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 17H7",key:"pygtm1"}],["path",{d:"M17 21H9",key:"1u2q02"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=te("CloudLightning",[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=te("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=te("CloudSnow",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M8 19h.01",key:"puxtts"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M12 21h.01",key:"h35vbk"}],["path",{d:"M16 15h.01",key:"rnfrdf"}],["path",{d:"M16 19h.01",key:"1vcnzz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=te("CloudSun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=te("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=te("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=te("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=te("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=te("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=te("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=te("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=te("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=te("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=te("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=te("GripHorizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=te("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=te("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=te("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=te("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=te("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=te("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=te("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=te("ListPlus",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=te("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=te("MapPinOff",[["path",{d:"M5.43 5.43A8.06 8.06 0 0 0 4 10c0 6 8 12 8 12a29.94 29.94 0 0 0 5-5",key:"12a8pk"}],["path",{d:"M19.18 13.52A8.66 8.66 0 0 0 20 10a8 8 0 0 0-8-8 7.88 7.88 0 0 0-3.52.82",key:"1r9f6y"}],["path",{d:"M9.13 9.13A2.78 2.78 0 0 0 9 10a3 3 0 0 0 3 3 2.78 2.78 0 0 0 .87-.13",key:"erynq7"}],["path",{d:"M14.9 9.25a3 3 0 0 0-2.15-2.16",key:"1hwwmx"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=te("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=te("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=te("MessageCircleHeart",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M15.8 9.2a2.5 2.5 0 0 0-3.5 0l-.3.4-.35-.3a2.42 2.42 0 1 0-3.2 3.6l3.6 3.5 3.6-3.5c1.2-1.2 1.1-2.7.2-3.7",key:"43lnbm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=te("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=te("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=te("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=te("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=te("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=te("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=te("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=te("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=te("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=te("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=te("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=te("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=te("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=te("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=te("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=te("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=te("Sunrise",[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=te("Sunset",[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=te("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=te("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=te("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=te("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=te("Umbrella",[["path",{d:"M22 12a10.06 10.06 1 0 0-20 0Z",key:"1teyop"}],["path",{d:"M12 12v8a2 2 0 0 0 4 0",key:"ulpmoc"}],["path",{d:"M12 2v1",key:"11qlp1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=te("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=te("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=te("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=te("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=te("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ye=(t,e)=>{const n=t.split(".");let r=d_[e];for(const i of n){if(r[i]===void 0)return t;r=r[i]}return r},d_={de:{nav:{dashboard:"Home",weather:"Wetter",calendar:"Kalender",meals:"Essen",lists:"Listen"},dashboard:{greeting:"Hallo",good_day:"Einen schnen Tag.",weather_details:"DETAILS",shopping_list:"Einkaufsliste",all_done:"Alles erledigt",items_open:"offen",meal_plan:"Heute essen",nothing_planned:"Nichts geplant",my_tasks:"Meine Aufgaben",tasks_open:"Aufgaben offen",all_tasks_done:"Alles erledigt! ",appointments_today:"Termine heute",all:"Alle",no_appointments:"Keine Termine fr heute.",location_error:"Standort?",loading:"Lade..."},settings:{title:"Einstellungen",profile:"MEIN PROFIL",display_name:"Anzeigename",change_password:"Passwort ndern",new_password:"Neues Passwort",your_color:"DEINE FARBE",generate_avatar:"KI-Avatar generieren",app_settings:"APP EINSTELLUNGEN",dark_mode:"Dunkelmodus",notifications:"Benachrichtigungen",notifications_desc:"Fr Aufgaben und Termine",language:"Sprache",family_management:"FAMILIENVERWALTUNG",set_temp_pass:"Passwort setzen",set_pass_confirm:"Neues Passwort fr {name} setzen:",reset_success:"Gespeichert",info_help:"INFO & HILFE",about:"ber die App",feedback:"Feedback geben",save:"Speichern",logout:"Abmelden",logout_confirm_title:"Abmelden?",logout_confirm_text:"Mchtest du dich wirklich abmelden?",cancel:"Abbrechen",confirm:"Besttigen",only_parents:"Nur fr Eltern sichtbar"},login:{welcome:"Willkommen zuhause.",hello:"Hallo",enter_pass:"Bitte Passwort eingeben",create_pass:"Erstelle ein Passwort",pass_placeholder:"Passwort",new_pass_placeholder:"Neues Passwort",wrong_pass:"Falsches Passwort",login_btn:"Anmelden",set_pass_btn:"Passwort festlegen"},header:{logged_in_as:"Angemeldet als"}},en:{nav:{dashboard:"Home",weather:"Weather",calendar:"Calendar",meals:"Meals",lists:"Lists"},dashboard:{greeting:"Hello",good_day:"Have a wonderful day.",weather_details:"DETAILS",shopping_list:"Shopping List",all_done:"All clear",items_open:"items",meal_plan:"On the Menu",nothing_planned:"Nothing planned",my_tasks:"My Tasks",tasks_open:"pending",all_tasks_done:"All done! ",appointments_today:"Today's Schedule",all:"View All",no_appointments:"No appointments for today.",location_error:"Location?",loading:"Loading..."},settings:{title:"Settings",profile:"MY PROFILE",display_name:"Display Name",change_password:"Change Password",new_password:"New Password",your_color:"THEME COLOR",generate_avatar:"Generate AI Avatar",app_settings:"APP SETTINGS",dark_mode:"Dark Mode",notifications:"Notifications",notifications_desc:"For tasks and events",language:"Language",family_management:"FAMILY MANAGEMENT",set_temp_pass:"Set Password",set_pass_confirm:"Set new password for {name}:",reset_success:"Saved",info_help:"INFO & HELP",about:"About",feedback:"Send Feedback",save:"Save Changes",logout:"Sign Out",logout_confirm_title:"Sign Out?",logout_confirm_text:"Are you sure you want to sign out?",cancel:"Cancel",confirm:"Confirm",only_parents:"Visible to parents only"},login:{welcome:"Welcome home.",hello:"Hello",enter_pass:"Please enter your password",create_pass:"Create a password",pass_placeholder:"Password",new_pass_placeholder:"New Password",wrong_pass:"Incorrect password",login_btn:"Sign In",set_pass_btn:"Set Password"},header:{logged_in_as:"Signed in as"}}},f_=({currentRoute:t,onNavigate:e,lang:n,christmasMode:r})=>{const i=t===pt.WEATHER,a=[{route:pt.DASHBOARD,icon:r?i_:Ed,label:Ye("nav.dashboard",n)},{route:pt.WEATHER,icon:r?Cd:Aw,label:Ye("nav.weather",n)},{route:pt.CALENDAR,icon:r?Sw:ul,label:Ye("nav.calendar",n)},{route:pt.MEALS,icon:r?Iw:No,label:Ye("nav.meals",n)},{route:pt.LISTS,icon:r?Mw:t0,label:Ye("nav.lists",n)}];return c.jsx("nav",{className:`fixed bottom-0 left-0 right-0 px-2 py-2 flex justify-around items-center z-50 safe-area-pb transition-all duration-500 ${i?"bg-black/20 backdrop-blur-lg border-t border-white/10":"bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800"}`,children:a.map(l=>{const f=t===l.route;let p="";return i?p=f?"text-white drop-shadow-md":"text-white/60 hover:text-white drop-shadow-sm":r?p=f?"text-red-600 dark:text-red-500 drop-shadow-sm":"text-green-800/70 dark:text-green-400/60 hover:text-green-700 dark:hover:text-green-300":p=f?"text-blue-600 dark:text-blue-400":"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",c.jsxs("button",{onClick:()=>e(l.route),className:`flex flex-col items-center justify-center w-full space-y-1 transition-all duration-300 ${p} ${f&&(i||r)?"scale-110":""}`,children:[c.jsx(l.icon,{size:22,strokeWidth:f?2.5:2,className:i?"filter drop-shadow-sm":""}),c.jsx("span",{className:"text-[10px] font-medium truncate w-full text-center drop-shadow-sm",children:l.label})]},l.route)})})},gl=({className:t="",size:e=40})=>c.jsxs("svg",{width:e,height:e,viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",className:t,children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"logo_grad_sunset",x1:"0",y1:"0",x2:"1",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#f59e0b"})," ",c.jsx("stop",{offset:"50%",stopColor:"#ec4899"})," ",c.jsx("stop",{offset:"100%",stopColor:"#8b5cf6"})," "]})}),c.jsx("path",{fill:"url(#logo_grad_sunset)",fillRule:"evenodd",d:`
          M256 80
          L80 240
          V432
          C80 449.6 94.4 464 112 464
          H400
          C417.6 464 432 449.6 432 432
          V240
          L256 80
          Z
          M256 380
          C256 380 346 325 346 270
          C346 240 321 220 291 220
          C274 220 263 230 256 240
          C249 230 238 220 221 220
          C191 220 166 240 166 270
          C166 325 256 380 256 380
          Z
        `})]}),Lo=({title:t,currentUser:e,onProfileClick:n})=>c.jsxs("header",{className:"sticky top-0 bg-white/90 dark:bg-gray-900/90 backdrop-blur-md border-b border-gray-100 dark:border-gray-800 px-4 py-4 flex justify-between items-center z-40 transition-colors duration-300",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(gl,{size:32}),c.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white tracking-tight",children:t})]}),e&&c.jsxs("button",{onClick:n,className:"flex items-center space-x-2 focus:outline-none group",children:[c.jsxs("div",{className:"text-right hidden sm:block",children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:"Angemeldet"}),c.jsx("p",{className:"text-sm font-bold text-gray-800 dark:text-gray-200",children:e.name})]}),c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:e.avatar,alt:e.name,className:"w-10 h-10 rounded-full border-2 border-white dark:border-gray-700 shadow-sm object-cover group-hover:ring-2 group-hover:ring-blue-200 dark:group-hover:ring-blue-800 transition-all"}),c.jsx("div",{className:"absolute -bottom-1 -right-1 bg-white dark:bg-gray-800 rounded-full p-0.5 shadow-sm border border-gray-100 dark:border-gray-700",children:c.jsx(Jw,{size:10,className:"text-gray-400 dark:text-gray-300"})})]})]})]}),Nd=async(t,e)=>{try{const n=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${e}&current=temperature_2m,relative_humidity_2m,apparent_temperature,is_day,precipitation,weather_code,cloud_cover,surface_pressure,wind_speed_10m,visibility&hourly=temperature_2m,weather_code&daily=weather_code,temperature_2m_max,temperature_2m_min,sunrise,sunset,uv_index_max,precipitation_probability_max&timezone=auto`);if(!n.ok)throw new Error("Weather fetch failed");return await n.json()}catch(n){return console.error("Weather fetch error:",n),null}},h_=async t=>{try{const n=await(await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(t)}&count=1&language=de&format=json`)).json();if(n.results&&n.results.length>0){const r=n.results[0];return{lat:r.latitude,lng:r.longitude,name:`${r.name}${r.admin1?", "+r.admin1:""}`}}return null}catch(e){return console.error("Geocoding error:",e),null}},Ad=t=>t===0?"Klar":t===1?"Leicht bewlkt":t===2?"Bewlkt":t===3?"Bedeckt":t>=45&&t<=48?"Nebel":t>=51&&t<=55?"Nieselregen":t>=56&&t<=57?"Gefrierender Niesel":t>=61&&t<=65?"Regen":t>=66&&t<=67?"Gefrierender Regen":t>=71&&t<=77?"Schnee":t>=80&&t<=82?"Regenschauer":t>=85&&t<=86?"Schneeschauer":t>=95&&t<=99?"Gewitter":"Wetter",p_="modulepreload",g_=function(t,e){return new URL(t,e).href},Up={},h0=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(y){return Promise.all(y.map(x=>Promise.resolve(x).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};const f=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),g=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));i=l(n.map(y=>{if(y=g_(y,r),y in Up)return;Up[y]=!0;const x=y.endsWith(".css"),w=x?'[rel="stylesheet"]':"";if(!!r)for(let T=f.length-1;T>=0;T--){const E=f[T];if(E.href===y&&(!x||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${y}"]${w}`))return;const S=document.createElement("link");if(S.rel=x?"stylesheet":p_,x||(S.as="script"),S.crossOrigin="",S.href=y,g&&S.setAttribute("nonce",g),document.head.appendChild(S),x)return new Promise((T,E)=>{S.addEventListener("load",T),S.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${y}`)))})}))}function a(l){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=l,window.dispatchEvent(f),!f.defaultPrevented)throw l}return i.then(l=>{for(const f of l||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */const m_=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(a,l)=>{n.platforms.set(a,l)},i=a=>{n.platforms.has(a)&&(n.currentPlatform=n.platforms.get(a))};return n.addPlatform=r,n.setPlatform=i,n},y_=t=>t.CapacitorPlatforms=m_(t),p0=y_(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});p0.addPlatform;p0.setPlatform;var Di;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Di||(Di={}));class Tc extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const v_=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},x_=t=>{var e,n,r,i,a;const l=t.CapacitorCustomPlatform||null,f=t.Capacitor||{},p=f.Plugins=f.Plugins||{},g=t.CapacitorPlatforms,y=()=>l!==null?l.name:v_(t),x=((e=g==null?void 0:g.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||y,w=()=>x()!=="web",b=((n=g==null?void 0:g.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||w,S=B=>{const ue=F.get(B);return!!(ue!=null&&ue.platforms.has(x())||N(B))},T=((r=g==null?void 0:g.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||S,E=B=>{var ue;return(ue=f.PluginHeaders)===null||ue===void 0?void 0:ue.find(Z=>Z.name===B)},N=((i=g==null?void 0:g.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||E,U=B=>t.console.error(B),A=(B,ue,Z)=>Promise.reject(`${Z} does not have an implementation of "${ue}".`),F=new Map,q=(B,ue={})=>{const Z=F.get(B);if(Z)return console.warn(`Capacitor plugin "${B}" already registered. Cannot register plugins twice.`),Z.proxy;const me=x(),_e=N(B);let Pe;const we=async()=>(!Pe&&me in ue?Pe=typeof ue[me]=="function"?Pe=await ue[me]():Pe=ue[me]:l!==null&&!Pe&&"web"in ue&&(Pe=typeof ue.web=="function"?Pe=await ue.web():Pe=ue.web),Pe),$e=(G,I)=>{var z,pe;if(_e){const $=_e==null?void 0:_e.methods.find(Q=>I===Q.name);if($)return $.rtype==="promise"?Q=>f.nativePromise(B,I.toString(),Q):(Q,de)=>f.nativeCallback(B,I.toString(),Q,de);if(G)return(z=G[I])===null||z===void 0?void 0:z.bind(G)}else{if(G)return(pe=G[I])===null||pe===void 0?void 0:pe.bind(G);throw new Tc(`"${B}" plugin is not implemented on ${me}`,Di.Unimplemented)}},Je=G=>{let I;const z=(...pe)=>{const $=we().then(Q=>{const de=$e(Q,G);if(de){const oe=de(...pe);return I=oe==null?void 0:oe.remove,oe}else throw new Tc(`"${B}.${G}()" is not implemented on ${me}`,Di.Unimplemented)});return G==="addListener"&&($.remove=async()=>I()),$};return z.toString=()=>`${G.toString()}() { [capacitor code] }`,Object.defineProperty(z,"name",{value:G,writable:!1,configurable:!1}),z},Le=Je("addListener"),Te=Je("removeListener"),J=(G,I)=>{const z=Le({eventName:G},I),pe=async()=>{const Q=await z;Te({eventName:G,callbackId:Q},I)},$=new Promise(Q=>z.then(()=>Q({remove:pe})));return $.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await pe()},$},W=new Proxy({},{get(G,I){switch(I){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return _e?J:Le;case"removeListener":return Te;default:return Je(I)}}});return p[B]=W,F.set(B,{name:B,proxy:W,platforms:new Set([...Object.keys(ue),..._e?[me]:[]])}),W},Y=((a=g==null?void 0:g.currentPlatform)===null||a===void 0?void 0:a.registerPlugin)||q;return f.convertFileSrc||(f.convertFileSrc=B=>B),f.getPlatform=x,f.handleError=U,f.isNativePlatform=b,f.isPluginAvailable=T,f.pluginMethodNoop=A,f.registerPlugin=Y,f.Exception=Tc,f.DEBUG=!!f.DEBUG,f.isLoggingEnabled=!!f.isLoggingEnabled,f.platform=f.getPlatform(),f.isNative=f.isNativePlatform(),f},w_=t=>t.Capacitor=x_(t),ml=w_(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Pl=ml.registerPlugin;ml.Plugins;class g0{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a),r&&this.sendRetainedArgumentsForEvent(e);const l=async()=>this.removeListener(e,n);return Promise.resolve({remove:l})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const i=this.listeners[e];if(!i){if(r){let a=this.retainedEventArguments[e];a||(a=[]),a.push(n),this.retainedEventArguments[e]=a}return}i.forEach(a=>a(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new ml.Exception(e,Di.Unimplemented)}unavailable(e="not available"){return new ml.Exception(e,Di.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const Op=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Fp=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class __ extends g0{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,a]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=Fp(i).trim(),a=Fp(a).trim(),n[i]=a}),n}async setCookie(e){try{const n=Op(e.key),r=Op(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,a=(e.path||"/").replace("path=",""),l=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${a}; ${l};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Pl("CapacitorCookies",{web:()=>new __});const b_=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(t)}),k_=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,a,l)=>(i[a]=t[e[l]],i),{})},S_=(t,e=!0)=>t?Object.entries(t).reduce((r,i)=>{const[a,l]=i;let f,p;return Array.isArray(l)?(p="",l.forEach(g=>{f=e?encodeURIComponent(g):g,p+=`${a}=${f}&`}),p.slice(0,-1)):(f=e?encodeURIComponent(l):l,p=`${a}=${f}`),`${r}&${p}`},"").substr(1):null,E_=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=k_(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[l,f]of Object.entries(t.data||{}))a.set(l,f);n.body=a.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const a=new FormData;if(t.data instanceof FormData)t.data.forEach((f,p)=>{a.append(p,f)});else for(const f of Object.keys(t.data))a.append(f,t.data[f]);n.body=a;const l=new Headers(n.headers);l.delete("content-type"),n.headers=l}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class T_ extends g0{async request(e){const n=E_(e,e.webFetchExtra),r=S_(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,a=await fetch(i,n),l=a.headers.get("content-type")||"";let{responseType:f="text"}=a.ok?e:{};l.includes("application/json")&&(f="json");let p,g;switch(f){case"arraybuffer":case"blob":g=await a.blob(),p=await b_(g);break;case"json":p=await a.json();break;case"document":case"text":default:p=await a.text()}const y={};return a.headers.forEach((x,w)=>{y[w]=x}),{data:p,headers:y,status:a.status,url:a.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Pl("CapacitorHttp",{web:()=>new T_});const Ml=Pl("Geolocation",{web:()=>h0(()=>import("./web-ay-HOBs_.js"),[],import.meta.url).then(t=>new t.GeolocationWeb)}),C_=({family:t,currentUser:e,events:n,shoppingCount:r,openTaskCount:i=0,todayMeal:a,onNavigate:l,onProfileClick:f,lang:p,weatherFavorites:g=[],currentWeatherLocation:y,onUpdateWeatherLocation:x,news:w})=>{const[b,S]=j.useState("family"),T=new Date().toISOString().split("T")[0],[E,N]=j.useState(null),A=n.filter($=>$.date===T?b==="private"?$.assignedTo.includes(e.id):!0:!1).sort(($,Q)=>$.time.localeCompare(Q.time)),F=w.filter($=>{var Q;return!((Q=$.tag)!=null&&Q.startsWith("PRIVATE:"))&&$.tag!=="#Admin"&&$.tag!=="#ToAdmin"}).sort(($,Q)=>new Date(Q.createdAt).getTime()-new Date($.createdAt).getTime()).slice(0,5),[q,Y]=j.useState(!0),[B,ue]=j.useState(!1),[Z,me]=j.useState("--"),[_e,Pe]=j.useState(Ye("dashboard.loading",p)),[we,$e]=j.useState(0),[Je,Le]=j.useState(1),[Te,J]=j.useState(""),W=async($,Q,de)=>{Y(!0),ue(!1);try{const oe=await Nd($,Q);oe?(me(`${Math.round(oe.current.temperature_2m)}`),Pe(Ad(oe.current.weather_code)),$e(oe.current.weather_code),Le(oe.current.is_day),J(de||"")):ue(!0)}catch{ue(!0)}finally{Y(!1)}};j.useEffect(()=>{Pe(Ye("dashboard.loading",p));const $=()=>{ue(!0),Y(!1)};if(y){W(y.lat,y.lng,y.name);return}(async()=>{try{const de=await Ml.getCurrentPosition({enableHighAccuracy:!1,timeout:1e4,maximumAge:1/0}),oe={lat:de.coords.latitude,lng:de.coords.longitude,name:"Aktueller Standort"};W(oe.lat,oe.lng,oe.name),x(oe)}catch(de){console.log("Capacitor GPS error in Dashboard, trying fallback:",de),navigator.geolocation?navigator.geolocation.getCurrentPosition(oe=>{const Ie={lat:oe.coords.latitude,lng:oe.coords.longitude,name:"Aktueller Standort"};W(Ie.lat,Ie.lng,Ie.name),x(Ie)},()=>$(),{enableHighAccuracy:!1,timeout:5e3}):$()}})()},[p]);const G=$=>{x({lat:$.lat,lng:$.lng,name:$.name}),W($.lat,$.lng,$.name)},I=($,Q)=>$===0?Q?c.jsx($n,{className:"text-yellow-300 animate-spin-slow",size:48}):c.jsx(Mi,{className:"text-gray-200",size:48}):$>=1&&$<=3?c.jsx(hl,{className:"text-gray-200",size:48}):$>=45&&$<=48?c.jsx(cl,{className:"text-gray-300",size:48}):$>=51&&$<=67?c.jsx(Io,{className:"text-blue-300",size:48}):$>=71&&$<=77?c.jsx(fl,{className:"text-white",size:48}):$>=95?c.jsx(dl,{className:"text-purple-300",size:48}):c.jsx($n,{className:"text-yellow-300",size:48}),z=($,Q)=>$===0?Q?c.jsx($n,{className:"text-orange-500",size:24}):c.jsx(Mi,{className:"text-indigo-500",size:24}):$>=1&&$<=3?c.jsx(hl,{className:"text-gray-500",size:24}):$>=45&&$<=48?c.jsx(cl,{className:"text-slate-500",size:24}):$>=51&&$<=67?c.jsx(Io,{className:"text-blue-500",size:24}):$>=71&&$<=77?c.jsx(fl,{className:"text-cyan-500",size:24}):$>=95?c.jsx(dl,{className:"text-purple-500",size:24}):c.jsx($n,{className:"text-orange-500",size:24}),pe=($,Q)=>Q?$===0?"from-blue-500 to-blue-400":$>=1&&$<=3?"from-blue-400 to-slate-400":$>=45&&$<=48?"from-gray-400 to-slate-500":$>=51?"from-slate-500 to-gray-600":"from-blue-500 to-cyan-600":"from-slate-800 to-indigo-900";return c.jsxs(c.Fragment,{children:[c.jsx(Lo,{title:"bersicht",currentUser:e,onProfileClick:f}),c.jsxs("main",{className:"p-4 space-y-6 pb-24",children:[c.jsxs("div",{className:`bg-gradient-to-r ${pe(we,Je)} rounded-2xl p-6 text-white shadow-lg relative overflow-hidden transition-colors duration-1000`,children:[c.jsxs("div",{className:"relative z-10 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-3xl font-bold",children:[Ye("dashboard.greeting",p)," ",e.name,"!"]}),c.jsx("p",{className:"text-blue-50/80 text-sm font-medium mt-1",children:Ye("dashboard.good_day",p)})]}),c.jsx("div",{className:"filter drop-shadow-md",children:I(we,Je)})]}),c.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-white opacity-10 rounded-full blur-2xl"}),c.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white opacity-5 rounded-full blur-xl"})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>l(pt.WEATHER),className:"w-full bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700 relative overflow-hidden flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700/40 transition",children:[q&&c.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-800/80 z-20 flex items-center justify-center",children:c.jsx(Cr,{className:"animate-spin text-blue-500",size:24})}),c.jsxs("div",{className:"flex items-center space-x-4",children:[B?c.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 p-2 rounded-full",children:c.jsx(Gs,{className:"text-gray-400",size:20})}):c.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-2 rounded-full",children:z(we,Je)}),c.jsxs("div",{className:"text-left",children:[c.jsx("span",{className:"text-2xl font-bold text-gray-800 dark:text-white block leading-none mb-1",children:B?"--":Z}),c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center",children:B?"Ort suchen...":c.jsxs("span",{children:[Te?`${Te}  `:""," ",_e]})})]})]}),c.jsxs("div",{className:"flex items-center text-blue-600 dark:text-blue-400 text-xs font-bold uppercase tracking-wider",children:[Ye("dashboard.weather_details",p)," ",c.jsx(ms,{size:16,className:"ml-1"})]})]}),g.length>0&&c.jsx("div",{className:"absolute top-16 left-0 right-0 z-30 flex flex-wrap gap-2 justify-center mt-2 pointer-events-none",children:c.jsx("div",{className:"pointer-events-auto flex flex-wrap gap-2 justify-center",children:g.map($=>c.jsxs("button",{onClick:()=>G($),className:"bg-white dark:bg-gray-700 shadow-md border border-gray-100 dark:border-gray-600 rounded-full px-3 py-1 text-xs font-bold text-gray-600 dark:text-gray-200 flex items-center hover:bg-blue-50 dark:hover:bg-blue-900/30 transition",children:[c.jsx(qs,{size:10,className:"mr-1 text-yellow-500 fill-current"}),$.name]},$.id))})})]}),F.length>0&&c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-white flex items-center",children:[c.jsx(Bw,{size:18,className:"mr-2 text-indigo-500"}),"Pinnwand"]}),c.jsx("button",{onClick:()=>l(pt.NEWS),className:"text-indigo-600 dark:text-indigo-400 text-xs font-bold bg-indigo-50 dark:bg-indigo-900/20 px-2 py-1 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/30 transition",children:"Alle anzeigen"})]}),c.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-hide snap-x -mx-4 px-4",children:F.map($=>{const Q=t.find(oe=>oe.id===$.authorId),de=Date.now()-new Date($.createdAt).getTime()<2880*60*1e3;return c.jsxs("div",{onClick:()=>N($),className:"min-w-[240px] max-w-[240px] bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-0 snap-start cursor-pointer hover:shadow-lg transition-all active:scale-[0.98] flex flex-col relative overflow-hidden group",children:[de&&c.jsx("div",{className:"absolute top-2 right-2 bg-red-500 text-white text-[9px] font-bold px-1.5 py-0.5 rounded-full z-10 shadow-sm animate-pulse",children:"NEU"}),$.image?c.jsxs("div",{className:"h-28 w-full bg-gray-100 dark:bg-gray-900 overflow-hidden relative",children:[c.jsx("img",{src:$.image,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",alt:""}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),c.jsxs("div",{className:"absolute bottom-2 left-3 right-3 text-white",children:[$.tag&&c.jsx("span",{className:"text-[9px] font-bold bg-white/20 backdrop-blur-md px-1.5 py-0.5 rounded uppercase tracking-wide mb-1 inline-block",children:$.tag.replace("#","")}),c.jsx("h4",{className:"font-bold text-sm line-clamp-1 leading-tight drop-shadow-sm",children:$.title})]})]}):c.jsxs("div",{className:"h-20 bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-indigo-900/20 dark:to-blue-900/20 flex flex-col justify-end p-3 relative",children:[$.tag&&c.jsx("span",{className:"text-[9px] font-bold text-indigo-600 dark:text-indigo-300 bg-white/50 dark:bg-black/20 px-1.5 py-0.5 rounded uppercase tracking-wide inline-block absolute top-2 left-3",children:$.tag.replace("#","")}),c.jsx("h4",{className:"font-bold text-gray-800 dark:text-white text-sm line-clamp-1",children:$.title})]}),c.jsxs("div",{className:"p-3 flex flex-col flex-1",children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2 mb-2 flex-1 leading-relaxed",children:$.description}),c.jsxs("div",{className:"flex items-center mt-auto pt-2 border-t border-gray-50 dark:border-gray-700/50",children:[Q&&c.jsx("img",{src:Q.avatar,className:"w-4 h-4 rounded-full mr-1.5 border border-white dark:border-gray-600"}),c.jsx("span",{className:"text-[10px] text-gray-400 font-medium",children:Q?Q.name:"System"}),c.jsx("span",{className:"text-[10px] text-gray-300 ml-auto",children:new Date($.createdAt).toLocaleDateString([],{day:"2-digit",month:"2-digit"})})]})]})]},$.id)})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("button",{onClick:()=>l(pt.LISTS),className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col items-start hover:bg-gray-50 dark:hover:bg-gray-700/40 transition group",children:[c.jsxs("div",{className:"flex justify-between w-full mb-2",children:[c.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/30 p-2 rounded-lg text-orange-600 dark:text-orange-400 group-hover:scale-110 transition-transform",children:c.jsx(t0,{size:20})}),r>0&&c.jsx("span",{className:"bg-orange-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full h-fit",children:r})]}),c.jsx("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-200",children:Ye("dashboard.shopping_list",p)}),c.jsx("span",{className:"text-xs text-gray-400 mt-0.5",children:r===0?Ye("dashboard.all_done",p):`${r} ${Ye("dashboard.items_open",p)}`})]}),c.jsxs("button",{onClick:()=>l(pt.MEALS),className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col items-start hover:bg-gray-50 dark:hover:bg-gray-700/40 transition group",children:[c.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-2 rounded-lg text-green-600 dark:text-green-400 mb-2 group-hover:scale-110 transition-transform",children:c.jsx(No,{size:20})}),c.jsx("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-200 line-clamp-1 w-full text-left",children:a?a.mealName:Ye("dashboard.nothing_planned",p)}),c.jsx("span",{className:"text-xs text-gray-400 mt-0.5",children:Ye("dashboard.meal_plan",p)})]})]}),c.jsxs("button",{onClick:()=>l(pt.LISTS),className:"w-full bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/40 transition",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/30 p-2 rounded-lg text-purple-600 dark:text-purple-400",children:c.jsx(Tw,{size:20})}),c.jsxs("div",{className:"text-left",children:[c.jsx("span",{className:"block text-sm font-bold text-gray-800 dark:text-gray-200",children:Ye("dashboard.my_tasks",p)}),c.jsx("span",{className:"block text-xs text-gray-500 dark:text-gray-400",children:i===0?Ye("dashboard.all_tasks_done",p):`${i} ${Ye("dashboard.tasks_open",p)}`})]})]}),c.jsx(ms,{size:18,className:"text-gray-400"})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:Ye("dashboard.appointments_today",p)}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs("div",{className:"flex bg-gray-200 dark:bg-gray-700 rounded-lg p-0.5",children:[c.jsx("button",{onClick:()=>S("family"),className:`px-2 py-1 rounded-md text-[10px] font-bold transition ${b==="family"?"bg-white dark:bg-gray-600 shadow-sm text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400"}`,children:"Alle"}),c.jsx("button",{onClick:()=>S("private"),className:`px-2 py-1 rounded-md text-[10px] font-bold transition ${b==="private"?"bg-white dark:bg-gray-600 shadow-sm text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400"}`,children:"Meine"})]}),c.jsx("button",{onClick:()=>l(pt.CALENDAR),className:"text-blue-600 dark:text-blue-400 text-sm font-medium flex items-center",children:c.jsx(ms,{size:20})})]})]}),c.jsx("div",{className:"space-y-3",children:A.length>0?A.map($=>c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border-l-4 border-blue-500 flex items-center animate-fade-in",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200",children:$.title}),c.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-400 text-xs mt-1 space-x-2",children:[c.jsxs("span",{className:"flex items-center",children:[c.jsx(n0,{size:12,className:"mr-1"})," ",$.time]}),$.location&&c.jsxs("span",{children:[" ",$.location]})]})]}),c.jsx("div",{className:"flex -space-x-2",children:$.assignedTo.map(Q=>{const de=t.find(oe=>oe.id===Q);return de?c.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-[10px] text-white font-bold ring-2 ring-white dark:ring-gray-800 ${de.color.split(" ")[0].replace("bg-","bg-")}`,children:de.name[0]},Q):null})})]},$.id)):c.jsx("div",{className:"text-center py-8 bg-white dark:bg-gray-800 rounded-xl border border-dashed border-gray-200 dark:border-gray-700",children:c.jsx("p",{className:"text-gray-400 text-sm",children:Ye("dashboard.no_appointments",p)})})})]})]}),E&&c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-md animate-fade-in p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden relative max-h-[90vh] flex flex-col animate-slide-up",children:[c.jsx("button",{onClick:()=>N(null),className:"absolute top-4 right-4 bg-black/20 hover:bg-black/40 text-white p-2 rounded-full backdrop-blur-sm transition z-10",children:c.jsx(wt,{size:24})}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[E.image?c.jsx("div",{className:"w-full",children:c.jsx("img",{src:E.image,alt:E.title,className:"w-full h-auto object-cover max-h-[50vh]"})}):c.jsx("div",{className:"h-24 bg-gradient-to-r from-blue-500 to-indigo-600"}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"mb-4",children:[E.tag&&c.jsx("span",{className:"inline-block bg-indigo-100 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300 text-xs font-bold px-2 py-1 rounded mb-2",children:E.tag}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white leading-tight",children:E.title})]}),c.jsx("div",{className:"flex items-center space-x-3 mb-6 pb-4 border-b border-gray-100 dark:border-gray-700",children:(()=>{const $=t.find(Q=>Q.id===E.authorId);return $?c.jsxs(c.Fragment,{children:[c.jsx("img",{src:$.avatar,alt:$.name,className:"w-10 h-10 rounded-full border-2 border-white dark:border-gray-700 shadow-sm"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-gray-800 dark:text-gray-200",children:$.name}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(E.createdAt).toLocaleDateString([],{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}):c.jsx("span",{className:"text-sm text-gray-500",children:"Unbekannter Autor"})})()}),c.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-base leading-relaxed whitespace-pre-wrap line-clamp-[8] mb-4",children:E.description}),c.jsxs("button",{onClick:()=>{N(null),l(pt.NEWS)},className:"w-full bg-indigo-600 text-white font-bold py-3.5 rounded-xl shadow-lg active:scale-95 transition flex items-center justify-center hover:bg-indigo-700",children:[c.jsx(a0,{size:18,className:"mr-2"}),c.jsx("span",{children:"Pinnwand ffnen"})]})]})]})]})})]})},Bs=(t,e=800,n=.7)=>new Promise(r=>{const i=new Image;i.src=t,i.onload=()=>{const a=document.createElement("canvas");let l=i.width,f=i.height;l>e&&(f=Math.round(f*e/l),l=e),a.width=l,a.height=f;const p=a.getContext("2d");p?(p.drawImage(i,0,0,l,f),r(a.toDataURL("image/jpeg",n))):r(t)},i.onerror=()=>{r(t)}}),$p=({events:t,news:e,polls:n=[],family:r,currentUser:i,onAddEvent:a,onUpdateEvent:l,onDeleteEvent:f,onAddNews:p,onUpdateNews:g,onDeleteNews:y,onAddPoll:x,onUpdatePoll:w,onDeletePoll:b,onProfileClick:S,initialTab:T="calendar",onMarkNewsRead:E})=>{var Ir;const[N,U]=j.useState(T),[A,F]=j.useState("family");j.useEffect(()=>{U(T)},[T]);const[q,Y]=j.useState(new Date),[B,ue]=j.useState(null),[Z,me]=j.useState(!1),[_e,Pe]=j.useState(null),[we,$e]=j.useState(""),[Je,Le]=j.useState(""),[Te,J]=j.useState("12:00"),[W,G]=j.useState("13:00"),[I,z]=j.useState(""),[pe,$]=j.useState(""),[Q,de]=j.useState([i.id]),[oe,Ie]=j.useState(!1),[He,qe]=j.useState(null),[mt,yt]=j.useState(""),[kt,he]=j.useState(""),[ce,Ue]=j.useState(""),[Ae,Xe]=j.useState(""),[nt,dt]=j.useState("upload"),[At,St]=j.useState(""),Ft=j.useRef(null),[Qt,K]=j.useState(!1),[ve,ge]=j.useState(null),[ft,Ze]=j.useState(!1),[ot,Et]=j.useState(""),[_n,hn]=j.useState(["",""]),[Vt,zn]=j.useState(!1),[It,pn]=j.useState(new Date().toISOString().slice(0,16)),[ne,Ke]=j.useState(new Date(Date.now()+1440*60*1e3).toISOString().slice(0,16)),rt=i.role==="admin",Re=t.filter(re=>{const Me=re.assignedTo.includes(i.id),D=re.assignedTo.length>1||re.assignedTo.length===1&&!Me;return A==="private"?Me&&re.assignedTo.length===1:D}).reduce((re,Me)=>(re[Me.date]||(re[Me.date]=[]),re[Me.date].push(Me),re),{}),je=re=>{ue(re),me(!1)},ut=()=>{ue(null),me(!1),Pe(null)},Bt=()=>{Pe(null),$e(""),Le(B||new Date().toISOString().split("T")[0]),J("12:00"),G("13:00"),z(""),$(""),de(A==="private"?[i.id]:[i.id]),me(!0)},Mn=re=>{Pe(re.id),$e(re.title),Le(re.date),J(re.time),G(re.endTime||""),z(re.location||""),$(re.description||""),de(re.assignedTo),me(!0)},gn=re=>{if(re.preventDefault(),!!we.trim()){if(_e)l(_e,{title:we,date:Je,time:Te,endTime:W,location:I,description:pe,assignedTo:Q});else{const Me={id:Date.now().toString(),title:we,date:Je,time:Te,endTime:W,location:I,description:pe,assignedTo:Q};a(Me)}ue(Je),me(!1),Pe(null)}},Nr=()=>{_e&&(f(_e),me(!1),Pe(null))},qr=re=>{Q.includes(re)?Q.length>1&&de(Q.filter(Me=>Me!==re)):de([...Q,re])},Xn=re=>{const Me=re.getFullYear(),D=re.getMonth(),fe=new Date(Me,D,1).getDay(),Ve=new Date(Me,D+1,0).getDate(),gt=fe===0?6:fe-1;return{year:Me,month:D,daysInMonth:Ve,startOffset:gt}},Zn=re=>{Y(new Date(q.getFullYear(),q.getMonth()+re,1))},er=async re=>{var D;const Me=(D=re.target.files)==null?void 0:D[0];if(Me){K(!0);const fe=new FileReader;fe.onloadend=async()=>{const Ve=fe.result,gt=await Bs(Ve,800,.7);Xe(gt),K(!1)},fe.readAsDataURL(Me)}},Wr=re=>{var Me;qe(re.id),yt(re.title),he(re.description),Ue(((Me=re.tag)==null?void 0:Me.replace("#",""))||""),Xe(re.image||""),dt("upload"),St(""),Ie(!0),ge(null)},tr=re=>{if(re.preventDefault(),!mt.trim())return;const Me=nt==="url"?At:Ae,D=ce.startsWith("#")?ce:ce?`#${ce}`:void 0;if(He&&g)g(He,{title:mt,description:kt,tag:D,image:Me||void 0});else{const fe={id:Date.now().toString(),title:mt,description:kt,tag:D,image:Me,createdAt:new Date().toISOString(),authorId:i.id,readBy:[]};p(fe)}Ie(!1),qe(null),yt(""),he(""),Ue(""),Xe(""),St("")},gr=()=>{Ie(!1),qe(null),yt(""),he(""),Ue(""),Xe(""),St("")},mr=()=>{hn([..._n,""])},Ar=(re,Me)=>{const D=[..._n];D[re]=Me,hn(D)},xs=re=>{if(re.preventDefault(),!x)return;const Me=_n.filter(Tt=>Tt.trim()!=="").map(Tt=>({id:Date.now().toString()+Math.random(),text:Tt,votes:[]}));if(!ot.trim()||Me.length<2)return;const D=new Date(It),fe=new Date(ne);if(fe<=D){alert("Das Enddatum muss nach dem Startdatum liegen.");return}const Ve={id:Date.now().toString(),question:ot,options:Me,createdAt:new Date().toISOString(),startsAt:D.toISOString(),expiresAt:fe.toISOString(),authorId:i.id,allowMultipleVotes:Vt};x(Ve),Ze(!1),Et(""),hn(["",""]),zn(!1);const gt=new Date;pn(gt.toISOString().slice(0,16)),Ke(new Date(gt.getTime()+1440*60*1e3).toISOString().slice(0,16))},ws=(re,Me)=>{if(!w)return;const D=n.find(Tt=>Tt.id===re);if(!D)return;const fe=new Date;if(fe>new Date(D.expiresAt)){alert("Abstimmung ist beendet.");return}if(D.startsAt&&fe<new Date(D.startsAt)){alert("Abstimmung hat noch nicht begonnen.");return}const Ve=D.allowMultipleVotes,gt=D.options.map(Tt=>{let Qe=[...Tt.votes];return Tt.id===Me?Qe.includes(i.id)?Qe=Qe.filter(We=>We!==i.id):Qe.push(i.id):Ve||(Qe=Qe.filter(We=>We!==i.id)),{...Tt,votes:Qe}});w(re,{options:gt})},_s=()=>{const{year:re,month:Me,daysInMonth:D,startOffset:fe}=Xn(q),Ve=q.toLocaleDateString("de-DE",{month:"long",year:"numeric"}),gt=Array.from({length:fe}),Tt=Array.from({length:D},(We,jt)=>jt+1),Qe=["Mo","Di","Mi","Do","Fr","Sa","So"];return c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden animate-fade-in transition-colors mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800",children:[c.jsx("button",{onClick:()=>Zn(-1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-600 dark:text-gray-300 transition",children:c.jsx(Ap,{size:20})}),c.jsx("span",{className:"font-bold text-lg text-gray-800 dark:text-white capitalize",children:Ve}),c.jsx("button",{onClick:()=>Zn(1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-600 dark:text-gray-300 transition",children:c.jsx(ms,{size:20})})]}),c.jsx("div",{className:"grid grid-cols-7 bg-gray-50 dark:bg-gray-900 border-b border-gray-100 dark:border-gray-700",children:Qe.map(We=>c.jsx("div",{className:"py-3 text-center text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider",children:We},We))}),c.jsxs("div",{className:"grid grid-cols-7 auto-rows-[minmax(80px,auto)] divide-x divide-y divide-gray-100 dark:divide-gray-700 border-b dark:border-gray-700",children:[gt.map((We,jt)=>c.jsx("div",{className:"bg-gray-50/30 dark:bg-gray-800/30"},`empty-${jt}`)),Tt.map(We=>{const jt=`${re}-${String(Me+1).padStart(2,"0")}-${String(We).padStart(2,"0")}`,Vn=Re[jt]||[],Rr=jt===new Date().toISOString().split("T")[0];return c.jsxs("div",{onClick:()=>je(jt),className:"relative flex flex-col items-center justify-start pt-2 pb-1 cursor-pointer transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/20 active:bg-blue-100 dark:active:bg-blue-900/40",children:[c.jsx("span",{className:`text-sm font-semibold w-7 h-7 flex items-center justify-center rounded-full mb-1 ${Rr?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300"}`,children:We}),c.jsxs("div",{className:"flex flex-col space-y-1 w-full px-1 items-center overflow-hidden",children:[Vn.slice(0,3).map(nr=>c.jsx("div",{className:"w-full max-w-[80%] h-1.5 rounded-full bg-blue-400 dark:bg-blue-500/80 transition-colors",title:nr.title},nr.id)),Vn.length>3&&c.jsxs("div",{className:"text-[9px] text-gray-400 leading-none font-bold",children:["+ ",Vn.length-3]})]})]},We)})]})]})},bn=()=>{const Me=[...e.filter(D=>{var fe;return!((fe=D.tag)!=null&&fe.startsWith("PRIVATE:"))&&D.tag!=="#Admin"&&D.tag!=="#ToAdmin"}).map(D=>({...D,type:"news"})),...n.map(D=>({...D,type:"poll"}))].sort((D,fe)=>new Date(fe.createdAt).getTime()-new Date(D.createdAt).getTime());return c.jsxs("div",{className:"animate-fade-in space-y-6",children:[!oe&&!ft&&c.jsxs("div",{className:"flex justify-center gap-3",children:[c.jsxs("button",{onClick:()=>Ie(!0),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl shadow-lg font-bold flex items-center space-x-2 hover:bg-indigo-700 transition active:scale-95 text-sm",children:[c.jsx(Po,{size:18})," ",c.jsx("span",{children:"Neuigkeit"})]}),c.jsxs("button",{onClick:()=>Ze(!0),className:"bg-emerald-600 text-white px-5 py-3 rounded-xl shadow-lg font-bold flex items-center space-x-2 hover:bg-emerald-700 transition active:scale-95 text-sm",children:[c.jsx(Tp,{size:18})," ",c.jsx("span",{children:"Umfrage"})]})]}),oe&&c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 p-4 animate-slide-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"font-bold text-gray-800 dark:text-white",children:He?"Neuigkeit bearbeiten":"Neue Pinnwand-Notiz"}),c.jsx("button",{onClick:gr,className:"text-gray-400 hover:text-gray-600",children:c.jsx(wt,{size:20})})]}),c.jsxs("form",{onSubmit:tr,className:"space-y-4",children:[c.jsx("input",{type:"text",placeholder:"Titel (z.B. Unser Urlaub)",value:mt,onChange:D=>yt(D.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl p-3 text-sm focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white",required:!0}),c.jsx("textarea",{placeholder:"Beschreibung...",value:kt,onChange:D=>he(D.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl p-3 text-sm focus:ring-2 focus:ring-indigo-500 outline-none resize-none dark:text-white",rows:3}),c.jsxs("div",{className:"relative",children:[c.jsx(Lw,{size:16,className:"absolute left-3 top-3.5 text-gray-400"}),c.jsx("input",{type:"text",placeholder:"Tag (optional, z.B. #Sommer)",value:ce,onChange:D=>Ue(D.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl p-3 pl-9 text-sm focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white"})]}),c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-xl border border-dashed border-gray-300 dark:border-gray-600",children:[c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("button",{type:"button",onClick:()=>dt("upload"),className:`flex-1 py-1 text-xs font-bold rounded-lg transition ${nt==="upload"?"bg-white dark:bg-gray-600 shadow-sm":"text-gray-400"}`,children:"Foto hochladen"}),c.jsx("button",{type:"button",onClick:()=>dt("url"),className:`flex-1 py-1 text-xs font-bold rounded-lg transition ${nt==="url"?"bg-white dark:bg-gray-600 shadow-sm":"text-gray-400"}`,children:"Bild URL"})]}),nt==="upload"?c.jsxs("div",{className:"text-center py-2",children:[c.jsx("input",{type:"file",ref:Ft,onChange:er,accept:"image/*",className:"hidden"}),Ae?c.jsxs("div",{className:"relative inline-block",children:[c.jsx("img",{src:Ae,className:"h-32 rounded-lg shadow-sm"}),c.jsx("button",{type:"button",onClick:()=>Xe(""),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1",children:c.jsx(wt,{size:12})})]}):c.jsxs("button",{type:"button",onClick:()=>{var D;return(D=Ft.current)==null?void 0:D.click()},className:"flex flex-col items-center justify-center w-full py-4 text-gray-400 hover:text-indigo-500 transition",children:[Qt?c.jsx(Cr,{className:"animate-spin mb-1",size:24}):c.jsx(Ao,{size:24,className:"mb-1"}),c.jsx("span",{className:"text-xs",children:"Tippen zum Auswhlen"})]})]}):c.jsx("input",{type:"text",placeholder:"https://...",value:At,onChange:D=>St(D.target.value),className:"w-full bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-2 text-xs dark:text-white"})]}),c.jsx("button",{type:"submit",disabled:!mt.trim()||Qt,className:"w-full bg-indigo-600 text-white font-bold py-3 rounded-xl shadow-lg active:scale-95 transition disabled:opacity-50",children:He?"Speichern":"Verffentlichen"})]})]}),ft&&c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 p-4 animate-slide-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"font-bold text-gray-800 dark:text-white",children:"Neue Abstimmung"}),c.jsx("button",{onClick:()=>Ze(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx(wt,{size:20})})]}),c.jsxs("form",{onSubmit:xs,className:"space-y-4",children:[c.jsx("input",{type:"text",placeholder:"Frage (z.B. Was essen wir?)",value:ot,onChange:D=>Et(D.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl p-3 text-sm focus:ring-2 focus:ring-emerald-500 outline-none font-bold dark:text-white",required:!0}),c.jsxs("div",{className:"space-y-2",children:[_n.map((D,fe)=>c.jsx("input",{type:"text",placeholder:`Option ${fe+1}`,value:D,onChange:Ve=>Ar(fe,Ve.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-2 text-sm focus:ring-2 focus:ring-emerald-500 outline-none dark:text-white"},fe)),c.jsx("button",{type:"button",onClick:mr,className:"text-xs text-emerald-600 font-bold hover:underline",children:"+ Option hinzufgen"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-xs font-bold text-gray-500 mb-1 flex items-center",children:[c.jsx(kw,{size:12,className:"mr-1"})," Start"]}),c.jsx("input",{type:"datetime-local",value:It,onChange:D=>pn(D.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-2 text-xs outline-none dark:text-white"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"text-xs font-bold text-gray-500 mb-1 flex items-center",children:[c.jsx(s_,{size:12,className:"mr-1"})," Ende"]}),c.jsx("input",{type:"datetime-local",value:ne,onChange:D=>Ke(D.target.value),min:new Date().toISOString().slice(0,16),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-2 text-xs outline-none dark:text-white"})]})]}),c.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[c.jsx("button",{type:"button",onClick:()=>zn(!Vt),className:`w-5 h-5 rounded border flex items-center justify-center transition ${Vt?"bg-emerald-500 border-emerald-500 text-white":"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"}`,children:Vt&&c.jsx(kd,{size:14})}),c.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Mehrfachauswahl erlauben"})]}),c.jsx("button",{type:"submit",disabled:!ot.trim(),className:"w-full bg-emerald-600 text-white font-bold py-3 rounded-xl shadow-lg active:scale-95 transition disabled:opacity-50",children:"Abstimmung planen"})]})]}),c.jsxs("div",{className:"grid gap-4",children:[Me.length===0&&!oe&&!ft&&c.jsxs("div",{className:"text-center py-10 opacity-50",children:[c.jsx(zc,{size:48,className:"mx-auto text-gray-300 dark:text-gray-600 mb-2"}),c.jsx("p",{className:"text-gray-500",children:"Die Pinnwand ist leer."})]}),Me.map(D=>{var Tt;const fe=r.find(Qe=>Qe.id===D.authorId);if(D.type==="poll"){const Qe=D,We=Qe.options.reduce((mn,nn)=>mn+nn.votes.length,0),jt=Qe.allowMultipleVotes,Vn=new Date,Rr=new Date(Qe.startsAt||Qe.createdAt),nr=new Date(Qe.expiresAt),bs=Vn>=Rr,yr=Vn>nr;return c.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-2xl shadow-sm border ${yr?"border-red-100 dark:border-red-900/30":bs?"border-gray-100 dark:border-gray-700":"border-yellow-100 dark:border-yellow-900/30"} overflow-hidden p-4 relative`,children:[yr&&c.jsx("div",{className:"bg-red-500 text-white text-center text-xs font-bold py-1 mb-3 rounded-md animate-fade-in uppercase tracking-wider shadow-sm",children:"Die Umfrage ist beendet"}),!bs&&!yr&&c.jsxs("div",{className:"bg-yellow-500 text-white text-center text-xs font-bold py-1 mb-3 rounded-md animate-fade-in uppercase tracking-wider shadow-sm",children:["Geplant fr ",Rr.toLocaleString([],{dateStyle:"short",timeStyle:"short"})]}),c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[fe&&c.jsx("img",{src:fe.avatar,alt:fe.name,className:"w-10 h-10 rounded-full border border-gray-100 dark:border-gray-700"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white leading-tight",children:Qe.question}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["von ",(fe==null?void 0:fe.name)||"Unbekannt"]}),jt&&c.jsx("span",{className:"text-[9px] text-emerald-600 bg-emerald-50 dark:bg-emerald-900/20 px-1.5 py-0.5 rounded font-bold uppercase tracking-wide",children:"Mehrfachauswahl"})]})]})]}),c.jsx("div",{className:"flex items-start gap-1",children:b&&(rt||i.id===Qe.authorId)&&c.jsx("button",{onClick:()=>b(Qe.id),className:"text-gray-300 hover:text-red-500 p-1",children:c.jsx(Tr,{size:16})})})]}),c.jsx("div",{className:`space-y-4 mt-2 ${yr||!bs?"opacity-80 pointer-events-none grayscale-[0.3]":""}`,children:Qe.options.map(mn=>{const nn=mn.votes.length,vr=We>0?nn/We*100:0,rn=mn.votes.includes(i.id),Js=mn.votes.map(M=>r.find(H=>H.id===M)).filter(Boolean);return c.jsxs("div",{onClick:()=>ws(Qe.id,mn.id),className:"relative group cursor-pointer",children:[c.jsxs("div",{className:"flex justify-between text-sm mb-1.5 text-gray-700 dark:text-gray-200 z-10 relative font-medium",children:[c.jsx("span",{className:rn?"text-emerald-600 dark:text-emerald-400":"",children:mn.text}),c.jsxs("span",{children:[Math.round(vr),"%"]})]}),c.jsx("div",{className:"h-3 w-full bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden mb-1.5",children:c.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-500",style:{width:`${vr}%`}})}),Js.length>0&&c.jsx("div",{className:"flex -space-x-1.5 pl-1 h-5 items-center",children:Js.map(M=>c.jsx("img",{src:M==null?void 0:M.avatar,title:M==null?void 0:M.name,className:"w-5 h-5 rounded-full border border-white dark:border-gray-800"},M==null?void 0:M.id))}),rn&&c.jsx("div",{className:"absolute right-0 top-0 mt-[-2px] mr-[-8px] text-emerald-500 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(Tp,{size:12})})]},mn.id)})}),c.jsxs("div",{className:"mt-4 pt-2 border-t border-gray-50 dark:border-gray-700 flex justify-between text-[10px] text-gray-400",children:[c.jsx("span",{children:yr?"Beendet":`Endet: ${new Date(Qe.expiresAt).toLocaleTimeString([],{weekday:"short",hour:"2-digit",minute:"2-digit"})}`}),c.jsxs("span",{children:[We," Stimmen gesamt"]})]})]},Qe.id)}const Ve=D,gt=(Tt=Ve.readBy)==null?void 0:Tt.includes(i.id);return c.jsxs("div",{onClick:()=>ge(Ve),className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden group cursor-pointer active:scale-[0.98] transition-transform",children:[Ve.image&&c.jsx("div",{className:"h-48 w-full overflow-hidden bg-gray-100 dark:bg-gray-900 relative",children:c.jsx("img",{src:Ve.image,className:"w-full h-full object-cover transition duration-500 group-hover:scale-105",alt:"News"})}),c.jsxs("div",{className:"p-4",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("div",{children:[Ve.tag&&c.jsx("span",{className:"text-xs font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 px-2 py-0.5 rounded-md mb-2 inline-block",children:Ve.tag}),c.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white leading-tight",children:Ve.title})]}),c.jsxs("div",{className:"flex gap-2",children:[!gt&&E&&c.jsx("button",{onClick:Qe=>{Qe.stopPropagation(),E(Ve.id)},className:"text-blue-500 hover:text-blue-700 p-1",title:"Als gelesen markieren",children:c.jsx(Ro,{size:16})}),(rt||i.id===Ve.authorId)&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:Qe=>{Qe.stopPropagation(),Wr(Ve)},className:"text-gray-300 hover:text-blue-500 p-1",title:"Bearbeiten",children:c.jsx(u0,{size:16})}),c.jsx("button",{onClick:Qe=>{Qe.stopPropagation(),y(Ve.id)},className:"text-gray-300 hover:text-red-500 p-1",title:"Lschen",children:c.jsx(Tr,{size:16})})]})]})]}),Ve.description&&c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4 whitespace-pre-line line-clamp-3",children:Ve.description}),c.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-50 dark:border-gray-700",children:[c.jsx("div",{className:"flex items-center space-x-2",children:fe?c.jsxs(c.Fragment,{children:[c.jsx("img",{src:fe.avatar,className:"w-6 h-6 rounded-full"}),c.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:fe.name})]}):c.jsx("span",{className:"text-xs text-gray-400",children:"Unbekannt"})}),c.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(Ve.createdAt).toLocaleDateString()})]})]})]},Ve.id)})]})]})};return c.jsxs(c.Fragment,{children:[c.jsx(Lo,{title:N==="calendar"?"Kalender":"Pinnwand",currentUser:i,onProfileClick:S}),c.jsx("div",{className:"px-4 mt-2 mb-2",children:c.jsxs("div",{className:"flex p-1 bg-gray-200 dark:bg-gray-800 rounded-xl relative",children:[c.jsxs("button",{onClick:()=>U("calendar"),className:`flex-1 py-2 rounded-lg text-xs font-bold flex items-center justify-center space-x-1 transition-all z-10 ${N==="calendar"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[c.jsx(ul,{size:14})," ",c.jsx("span",{children:"Termine"})]}),c.jsxs("button",{onClick:()=>U("news"),className:`flex-1 py-2 rounded-lg text-xs font-bold flex items-center justify-center space-x-1 transition-all z-10 ${N==="news"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[c.jsx(a0,{size:14})," ",c.jsx("span",{children:"Pinnwand"})]})]})}),N==="calendar"&&c.jsx("div",{className:"px-4 mb-2 flex justify-center",children:c.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 p-0.5 rounded-lg",children:[c.jsxs("button",{onClick:()=>F("family"),className:`flex items-center px-4 py-1.5 rounded-md text-xs font-bold transition space-x-1 ${A==="family"?"bg-white dark:bg-gray-700 shadow-sm text-blue-600 dark:text-white":"text-gray-500 dark:text-gray-400"}`,children:[c.jsx(l_,{size:12,className:"mr-1"})," Familie"]}),c.jsxs("button",{onClick:()=>F("private"),className:`flex items-center px-4 py-1.5 rounded-md text-xs font-bold transition space-x-1 ${A==="private"?"bg-white dark:bg-gray-700 shadow-sm text-blue-600 dark:text-white":"text-gray-500 dark:text-gray-400"}`,children:[c.jsx(f0,{size:12,className:"mr-1"})," Privat"]})]})}),c.jsxs("div",{className:"p-4 pb-24 relative min-h-[calc(100vh-140px)]",children:[N==="calendar"&&_s(),N==="news"&&bn(),B&&N==="calendar"&&c.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center pointer-events-none",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm pointer-events-auto transition-opacity",onClick:ut}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-md sm:rounded-2xl rounded-t-2xl shadow-2xl pointer-events-auto transform transition-transform duration-300 max-h-[85vh] flex flex-col animate-slide-up",children:[c.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 rounded-t-2xl flex-shrink-0",children:[c.jsx("div",{children:Z?c.jsxs("button",{onClick:()=>me(!1),className:"flex items-center text-blue-600 text-sm font-bold hover:bg-blue-50 dark:hover:bg-gray-700 px-2 py-1 rounded-lg transition",children:[c.jsx(Ap,{size:16,className:"mr-1"})," Zurck"]}):c.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white capitalize",children:new Date(B).toLocaleDateString("de-DE",{weekday:"long",day:"numeric",month:"long"})})}),c.jsx("button",{onClick:ut,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 transition",children:c.jsx(wt,{size:20})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:Z?c.jsxs("form",{id:"eventForm",onSubmit:gn,className:"space-y-5",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1.5 block",children:"Titel"}),c.jsx("input",{type:"text",required:!0,placeholder:"Was steht an?",value:we,onChange:re=>$e(re.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl p-3.5 text-base text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-all"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1.5 block",children:"Start"}),c.jsx("input",{type:"time",required:!0,value:Te,onChange:re=>J(re.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl p-3 text-base text-gray-800 dark:text-white outline-none"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1.5 block",children:"Ende"}),c.jsx("input",{type:"time",required:!0,value:W,onChange:re=>G(re.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl p-3 text-base text-gray-800 dark:text-white outline-none"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1.5 block",children:"Ort"}),c.jsxs("div",{className:"relative",children:[c.jsx(ys,{size:18,className:"absolute left-3 top-3.5 text-gray-400"}),c.jsx("input",{type:"text",placeholder:"Wo findet es statt?",value:I,onChange:re=>z(re.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl p-3 pl-10 text-base text-gray-800 dark:text-white outline-none focus:ring-2 focus:ring-blue-500"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1.5 block",children:"Notizen"}),c.jsx("textarea",{placeholder:"Details...",value:pe,onChange:re=>$(re.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl p-3 text-sm text-gray-800 dark:text-white outline-none resize-none focus:ring-2 focus:ring-blue-500",rows:3})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-2 block",children:"Teilnehmer"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:[...r].sort((re,Me)=>{const D=["Mama","Papa","Tim","Jan"],fe=D.indexOf(re.name),Ve=D.indexOf(Me.name);return fe!==-1&&Ve!==-1?fe-Ve:fe!==-1?-1:Ve!==-1?1:re.role==="parent"&&Me.role!=="parent"?-1:re.role!=="parent"&&Me.role==="parent"?1:re.name.localeCompare(Me.name)}).map(re=>c.jsxs("button",{type:"button",onClick:()=>qr(re.id),className:`flex items-center space-x-2 px-3 py-2 rounded-xl text-xs font-bold border transition-all ${Q.includes(re.id)?`${re.color} border-transparent ring-2 ring-offset-1 ring-blue-100`:"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-500 dark:text-gray-400 opacity-60"}`,children:[c.jsx("img",{src:re.avatar,className:"w-5 h-5 rounded-full"}),c.jsx("span",{children:re.name})]},re.id))})]})]}):c.jsx("div",{className:"space-y-4",children:(Re[B]||[]).length===0?c.jsxs("div",{className:"text-center py-12 flex flex-col items-center",children:[c.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 p-4 rounded-full mb-3",children:c.jsx(ul,{className:"w-8 h-8 text-gray-400"})}),c.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Nichts geplant."})]}):(Re[B]||[]).map(re=>c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-750 p-4 rounded-xl border-l-4 border-blue-500 relative group shadow-sm hover:shadow-md transition-all",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200 text-base",children:re.title}),c.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 flex items-center",children:[c.jsx(n0,{size:14,className:"mr-1.5 text-blue-500"})," ",re.time," - ",re.endTime]}),re.location&&c.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5 flex items-center",children:[c.jsx(ys,{size:14,className:"mr-1.5 text-red-500"})," ",re.location]}),re.description&&c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2 bg-white dark:bg-gray-800 p-2 rounded-lg border border-gray-100 dark:border-gray-700",children:re.description})]}),c.jsx("button",{onClick:()=>Mn(re),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",children:c.jsx(Bc,{size:18})})]}),c.jsx("div",{className:"flex -space-x-2 mt-3 pl-1",children:re.assignedTo.map(Me=>{const D=r.find(fe=>fe.id===Me);return D?c.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center text-[10px] text-white font-bold ring-2 ring-white dark:ring-gray-800 shadow-sm ${D.color.split(" ")[0].replace("bg-","bg-")}`,children:D.name[0]},Me):null})})]},re.id))})}),c.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-gray-700 bg-gray-50/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-b-2xl flex-shrink-0",children:Z?c.jsxs("div",{className:"flex space-x-3",children:[_e&&(rt||((Ir=t.find(re=>re.id===_e))==null?void 0:Ir.assignedTo.includes(i.id)))&&c.jsx("button",{type:"button",onClick:Nr,className:"bg-red-50 dark:bg-red-900/20 text-red-500 p-3.5 rounded-xl hover:bg-red-100 transition",children:c.jsx(Tr,{size:22})}),c.jsx("button",{type:"submit",form:"eventForm",className:"flex-1 bg-blue-600 text-white font-bold py-3.5 rounded-xl shadow-lg active:scale-[0.98] transition hover:bg-blue-700",children:_e?"Speichern":"Erstellen"})]}):c.jsxs("button",{onClick:Bt,className:"w-full bg-blue-600 text-white font-bold py-3.5 rounded-xl shadow-lg active:scale-[0.98] transition flex items-center justify-center hover:bg-blue-700",children:[c.jsx(Po,{size:20,className:"mr-2"})," Termin hinzufgen"]})})]})]}),ve&&c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-md animate-fade-in p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden relative max-h-[90vh] flex flex-col animate-slide-up",children:[c.jsx("button",{onClick:()=>ge(null),className:"absolute top-4 right-4 bg-black/20 hover:bg-black/40 text-white p-2 rounded-full backdrop-blur-sm transition z-10",children:c.jsx(wt,{size:24})}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[ve.image?c.jsx("div",{className:"w-full",children:c.jsx("img",{src:ve.image,alt:ve.title,className:"w-full h-auto object-cover max-h-[50vh]"})}):c.jsx("div",{className:"h-24 bg-gradient-to-r from-blue-500 to-indigo-600"}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"mb-4",children:[ve.tag&&c.jsx("span",{className:"inline-block bg-indigo-100 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300 text-xs font-bold px-2 py-1 rounded mb-2",children:ve.tag}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white leading-tight",children:ve.title})]}),c.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-100 dark:border-gray-700",children:[c.jsx("div",{className:"flex items-center space-x-3",children:(()=>{const re=r.find(Me=>Me.id===ve.authorId);return re?c.jsxs(c.Fragment,{children:[c.jsx("img",{src:re.avatar,alt:re.name,className:"w-10 h-10 rounded-full border-2 border-white dark:border-gray-700 shadow-sm"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-gray-800 dark:text-gray-200",children:re.name}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(ve.createdAt).toLocaleDateString([],{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}):c.jsx("span",{className:"text-sm text-gray-500",children:"Unbekannter Autor"})})()}),(rt||i.id===ve.authorId)&&c.jsx("button",{onClick:()=>Wr(ve),className:"text-gray-400 hover:text-blue-500 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition",title:"Bearbeiten",children:c.jsx(Bc,{size:20})})]}),c.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-base leading-relaxed whitespace-pre-wrap",children:ve.description})]})]})]})})]})]})};var N_={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let A_,I_;function R_(){return{geminiUrl:A_,vertexUrl:I_}}function P_(t,e,n,r){var i,a;if(!(t!=null&&t.baseUrl)){const l=R_();return e?(i=l.vertexUrl)!==null&&i!==void 0?i:n:(a=l.geminiUrl)!==null&&a!==void 0?a:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Br{}function ye(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const a=e[i];return a!=null?String(a):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function h(t,e,n){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const f=l.slice(0,-2);if(!(f in t))if(Array.isArray(n))t[f]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[f])){const p=t[f];if(Array.isArray(n))for(let g=0;g<p.length;g++){const y=p[g];h(y,e.slice(a+1),n[g])}else for(const g of p)h(g,e.slice(a+1),n)}return}else if(l.endsWith("[0]")){const f=l.slice(0,-3);f in t||(t[f]=[{}]);const p=t[f];h(p[0],e.slice(a+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function d(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const a=i.slice(0,-2);if(a in t){const l=t[a];return Array.isArray(l)?l.map(f=>d(f,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function M_(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),a=r.split("."),l=new Set;let f=-1;for(let p=0;p<i.length;p++)if(i[p]==="*"){f=p;break}if(f!==-1&&a.length>f)for(let p=f;p<a.length;p++){const g=a[p];g!=="*"&&!g.endsWith("[]")&&!g.endsWith("[0]")&&l.add(g)}Hc(t,i,a,0,l)}}function Hc(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const a=e[r];if(a.endsWith("[]")){const l=a.slice(0,-2),f=t;if(l in f&&Array.isArray(f[l]))for(const p of f[l])Hc(p,e,n,r+1,i)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,f=Object.keys(l).filter(g=>!g.startsWith("_")&&!i.has(g)),p={};for(const g of f)p[g]=l[g];for(const[g,y]of Object.entries(p)){const x=[];for(const w of n.slice(r))w==="*"?x.push(g):x.push(w);h(l,x,y)}for(const g of f)delete l[g]}}else{const l=t;a in l&&Hc(l[a],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Id(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D_(t){const e={},n=d(t,["operationName"]);n!=null&&h(e,["operationName"],n);const r=d(t,["resourceName"]);return r!=null&&h(e,["_url","resourceName"],r),e}function j_(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const r=d(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=d(t,["done"]);i!=null&&h(e,["done"],i);const a=d(t,["error"]);a!=null&&h(e,["error"],a);const l=d(t,["response","generateVideoResponse"]);return l!=null&&h(e,["response"],U_(l)),e}function L_(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const r=d(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=d(t,["done"]);i!=null&&h(e,["done"],i);const a=d(t,["error"]);a!=null&&h(e,["error"],a);const l=d(t,["response"]);return l!=null&&h(e,["response"],O_(l)),e}function U_(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>F_(l))),h(e,["generatedVideos"],a)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const i=d(t,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function O_(t){const e={},n=d(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>$_(l))),h(e,["generatedVideos"],a)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const i=d(t,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function F_(t){const e={},n=d(t,["video"]);return n!=null&&h(e,["video"],q_(n)),e}function $_(t){const e={},n=d(t,["_self"]);return n!=null&&h(e,["video"],W_(n)),e}function z_(t){const e={},n=d(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function V_(t){const e={},n=d(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function B_(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const r=d(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=d(t,["done"]);i!=null&&h(e,["done"],i);const a=d(t,["error"]);a!=null&&h(e,["error"],a);const l=d(t,["response"]);return l!=null&&h(e,["response"],H_(l)),e}function H_(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["parent"]);r!=null&&h(e,["parent"],r);const i=d(t,["documentName"]);return i!=null&&h(e,["documentName"],i),e}function m0(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const r=d(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=d(t,["done"]);i!=null&&h(e,["done"],i);const a=d(t,["error"]);a!=null&&h(e,["error"],a);const l=d(t,["response"]);return l!=null&&h(e,["response"],G_(l)),e}function G_(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["parent"]);r!=null&&h(e,["parent"],r);const i=d(t,["documentName"]);return i!=null&&h(e,["documentName"],i),e}function q_(t){const e={},n=d(t,["uri"]);n!=null&&h(e,["uri"],n);const r=d(t,["encodedVideo"]);r!=null&&h(e,["videoBytes"],Id(r));const i=d(t,["encoding"]);return i!=null&&h(e,["mimeType"],i),e}function W_(t){const e={},n=d(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const r=d(t,["bytesBase64Encoded"]);r!=null&&h(e,["videoBytes"],Id(r));const i=d(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var zp;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(zp||(zp={}));var Vp;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Vp||(Vp={}));var Bp;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Bp||(Bp={}));var st;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(st||(st={}));var Hp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Hp||(Hp={}));var Gp;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Gp||(Gp={}));var qp;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(qp||(qp={}));var Wp;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Wp||(Wp={}));var Jp;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Jp||(Jp={}));var Kp;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(Kp||(Kp={}));var Yp;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Yp||(Yp={}));var Qp;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Qp||(Qp={}));var Xp;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Xp||(Xp={}));var Zp;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Zp||(Zp={}));var eg;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(eg||(eg={}));var tg;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(tg||(tg={}));var ng;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(ng||(ng={}));var rg;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(rg||(rg={}));var sg;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(sg||(sg={}));var yl;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(yl||(yl={}));var ig;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ig||(ig={}));var og;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(og||(og={}));var ag;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ag||(ag={}));var Gc;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Gc||(Gc={}));var lg;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(lg||(lg={}));var ug;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ug||(ug={}));var cg;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(cg||(cg={}));var dg;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(dg||(dg={}));var fg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(fg||(fg={}));var hg;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(hg||(hg={}));var pg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(pg||(pg={}));var gg;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(gg||(gg={}));var mg;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(mg||(mg={}));var yg;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(yg||(yg={}));var vg;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(vg||(vg={}));var xg;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(xg||(xg={}));var wg;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(wg||(wg={}));var _g;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(_g||(_g={}));var bg;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(bg||(bg={}));var kg;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(kg||(kg={}));var Sg;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Sg||(Sg={}));var Eg;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Eg||(Eg={}));var Tg;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Tg||(Tg={}));var Cg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Cg||(Cg={}));var Ng;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Ng||(Ng={}));var Ag;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Ag||(Ag={}));var Ig;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Ig||(Ig={}));var Rg;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Rg||(Rg={}));var Pg;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Pg||(Pg={}));var Mg;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Mg||(Mg={}));var Dg;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Dg||(Dg={}));var jg;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(jg||(jg={}));var Lg;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Lg||(Lg={}));var Ug;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ug||(Ug={}));var Og;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Og||(Og={}));var Ti;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ti||(Ti={}));class qc{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class _o{get text(){var e,n,r,i,a,l,f,p;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let g="",y=!1;const x=[];for(const w of(p=(f=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[b,S]of Object.entries(w))b!=="text"&&b!=="thought"&&b!=="thoughtSignature"&&(S!==null||S!==void 0)&&x.push(b);if(typeof w.text=="string"){if(typeof w.thought=="boolean"&&w.thought)continue;y=!0,g+=w.text}}return x.length>0&&console.warn(`there are non-text parts ${x} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?g:void 0}get data(){var e,n,r,i,a,l,f,p;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let g="";const y=[];for(const x of(p=(f=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[w,b]of Object.entries(x))w!=="inlineData"&&(b!==null||b!==void 0)&&y.push(w);x.inlineData&&typeof x.inlineData.data=="string"&&(g+=atob(x.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),g.length>0?btoa(g):void 0}get functionCalls(){var e,n,r,i,a,l,f,p;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const g=(p=(f=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((g==null?void 0:g.length)!==0)return g}get executableCode(){var e,n,r,i,a,l,f,p,g;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(p=(f=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(x=>x.executableCode).map(x=>x.executableCode).filter(x=>x!==void 0);if((y==null?void 0:y.length)!==0)return(g=y==null?void 0:y[0])===null||g===void 0?void 0:g.code}get codeExecutionResult(){var e,n,r,i,a,l,f,p,g;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(p=(f=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(x=>x.codeExecutionResult).map(x=>x.codeExecutionResult).filter(x=>x!==void 0);if((y==null?void 0:y.length)!==0)return(g=y==null?void 0:y[0])===null||g===void 0?void 0:g.output}}class Fg{}class $g{}class J_{}class K_{}class Y_{}class Q_{}class zg{}class Vg{}class Bg{}class X_{}class vl{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new vl;let i;const a=e;return n?i=L_(a):i=j_(a),Object.assign(r,i),r}}class Hg{}class Gg{}class qg{}class Wg{}class Z_{}class eb{}class tb{}class Rd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Rd,a=B_(e);return Object.assign(r,a),r}}class nb{}class rb{}class sb{}class Jg{}class ib{get text(){var e,n,r;let i="",a=!1;const l=[];for(const f of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[p,g]of Object.entries(f))p!=="text"&&p!=="thought"&&g!==null&&l.push(p);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;a=!0,i+=f.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?i:void 0}get data(){var e,n,r;let i="";const a=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[f,p]of Object.entries(l))f!=="inlineData"&&p!==null&&a.push(f);l.inlineData&&typeof l.inlineData.data=="string"&&(i+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class ob{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Pd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Pd,a=m0(e);return Object.assign(r,a),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function y0(t,e){const n=lt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function v0(t){return Array.isArray(t)?t.map(e=>xl(e)):[xl(t)]}function xl(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function x0(t){const e=xl(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function w0(t){const e=xl(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Kg(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function _0(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Kg(e)):[Kg(t)]}function Wc(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Yg(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Qg(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function fn(t){if(t==null)throw new Error("ContentUnion is required");return Wc(t)?t:{role:"user",parts:_0(t)}}function Md(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=fn(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=fn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>fn(n)):[fn(e)]}function Yn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Yg(t)||Qg(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[fn(t)]}const e=[],n=[],r=Wc(t[0]);for(const i of t){const a=Wc(i);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(i);else{if(Yg(i)||Qg(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:_0(n)}),e}function ab(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(st).includes(n[0].toUpperCase())?n[0].toUpperCase():st.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(st).includes(r.toUpperCase())?r.toUpperCase():st.TYPE_UNSPECIFIED})}}function Ai(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&ab(t.type,e);for(const[l,f]of Object.entries(t))if(f!=null)if(l=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(st).includes(f.toUpperCase())?f.toUpperCase():st.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=Ai(f);else if(r.includes(l)){const p=[];for(const g of f){if(g.type=="null"){e.nullable=!0;continue}p.push(Ai(g))}e[l]=p}else if(i.includes(l)){const p={};for(const[g,y]of Object.entries(f))p[g]=Ai(y);e[l]=p}else{if(l==="additionalProperties")continue;e[l]=f}return e}function Dd(t){return Ai(t)}function jd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Ld(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ui(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ai(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ai(e.response));return t}function Oi(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function lb(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Hr(t,e){if(typeof e!="string")throw new Error("name must be a string");return lb(t,e,"cachedContents")}function b0(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function vs(t){return Id(t)}function ub(t){return t!=null&&typeof t=="object"&&"name"in t}function cb(t){return t!=null&&typeof t=="object"&&"video"in t}function db(t){return t!=null&&typeof t=="object"&&"uri"in t}function k0(t){var e;let n;if(ub(t)&&(n=t.name),!(db(t)&&(n=t.uri,n===void 0))&&!(cb(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function S0(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function E0(t){for(const e of["models","tunedModels","publisherModels"])if(fb(t,e))return t[e];return[]}function fb(t,e){return t!==null&&typeof t=="object"&&e in t}function hb(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function pb(t,e={}){const n=[],r=new Set;for(const i of t){const a=i.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const l=hb(i,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function T0(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function gb(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function C0(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let a=!1;for(const l of i){if(typeof l!="object"||l===null)continue;const p=l.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Fi(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function N0(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mb(t){const e={},n=d(t,["responsesFile"]);n!=null&&h(e,["fileName"],n);const r=d(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>Yb(l))),h(e,["inlinedResponses"],a)}const i=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["inlinedEmbedContentResponses"],a)}return e}function yb(t){const e={},n=d(t,["predictionsFormat"]);n!=null&&h(e,["format"],n);const r=d(t,["gcsDestination","outputUriPrefix"]);r!=null&&h(e,["gcsUri"],r);const i=d(t,["bigqueryDestination","outputUri"]);return i!=null&&h(e,["bigqueryUri"],i),e}function vb(t){const e={},n=d(t,["format"]);n!=null&&h(e,["predictionsFormat"],n);const r=d(t,["gcsUri"]);r!=null&&h(e,["gcsDestination","outputUriPrefix"],r);const i=d(t,["bigqueryUri"]);if(i!=null&&h(e,["bigqueryDestination","outputUri"],i),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function rl(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const r=d(t,["metadata","displayName"]);r!=null&&h(e,["displayName"],r);const i=d(t,["metadata","state"]);i!=null&&h(e,["state"],N0(i));const a=d(t,["metadata","createTime"]);a!=null&&h(e,["createTime"],a);const l=d(t,["metadata","endTime"]);l!=null&&h(e,["endTime"],l);const f=d(t,["metadata","updateTime"]);f!=null&&h(e,["updateTime"],f);const p=d(t,["metadata","model"]);p!=null&&h(e,["model"],p);const g=d(t,["metadata","output"]);return g!=null&&h(e,["dest"],mb(C0(g))),e}function Jc(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const r=d(t,["displayName"]);r!=null&&h(e,["displayName"],r);const i=d(t,["state"]);i!=null&&h(e,["state"],N0(i));const a=d(t,["error"]);a!=null&&h(e,["error"],a);const l=d(t,["createTime"]);l!=null&&h(e,["createTime"],l);const f=d(t,["startTime"]);f!=null&&h(e,["startTime"],f);const p=d(t,["endTime"]);p!=null&&h(e,["endTime"],p);const g=d(t,["updateTime"]);g!=null&&h(e,["updateTime"],g);const y=d(t,["model"]);y!=null&&h(e,["model"],y);const x=d(t,["inputConfig"]);x!=null&&h(e,["src"],xb(x));const w=d(t,["outputConfig"]);w!=null&&h(e,["dest"],yb(C0(w)));const b=d(t,["completionStats"]);return b!=null&&h(e,["completionStats"],b),e}function xb(t){const e={},n=d(t,["instancesFormat"]);n!=null&&h(e,["format"],n);const r=d(t,["gcsSource","uris"]);r!=null&&h(e,["gcsUri"],r);const i=d(t,["bigquerySource","inputUri"]);return i!=null&&h(e,["bigqueryUri"],i),e}function wb(t,e){const n={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=d(e,["fileName"]);r!=null&&h(n,["fileName"],r);const i=d(e,["inlinedRequests"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Kb(t,l))),h(n,["requests","requests"],a)}return n}function _b(t){const e={},n=d(t,["format"]);n!=null&&h(e,["instancesFormat"],n);const r=d(t,["gcsUri"]);r!=null&&h(e,["gcsSource","uris"],r);const i=d(t,["bigqueryUri"]);if(i!=null&&h(e,["bigquerySource","inputUri"],i),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function bb(t){const e={},n=d(t,["data"]);if(n!=null&&h(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function kb(t,e){const n={},r=d(e,["name"]);return r!=null&&h(n,["_url","name"],Fi(t,r)),n}function Sb(t,e){const n={},r=d(e,["name"]);return r!=null&&h(n,["_url","name"],Fi(t,r)),n}function Eb(t){const e={},n=d(t,["content"]);n!=null&&h(e,["content"],n);const r=d(t,["citationMetadata"]);r!=null&&h(e,["citationMetadata"],Tb(r));const i=d(t,["tokenCount"]);i!=null&&h(e,["tokenCount"],i);const a=d(t,["finishReason"]);a!=null&&h(e,["finishReason"],a);const l=d(t,["avgLogprobs"]);l!=null&&h(e,["avgLogprobs"],l);const f=d(t,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const p=d(t,["index"]);p!=null&&h(e,["index"],p);const g=d(t,["logprobsResult"]);g!=null&&h(e,["logprobsResult"],g);const y=d(t,["safetyRatings"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(b=>b)),h(e,["safetyRatings"],w)}const x=d(t,["urlContextMetadata"]);return x!=null&&h(e,["urlContextMetadata"],x),e}function Tb(t){const e={},n=d(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),h(e,["citations"],r)}return e}function A0(t){const e={},n=d(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>rk(a))),h(e,["parts"],i)}const r=d(t,["role"]);return r!=null&&h(e,["role"],r),e}function Cb(t,e){const n={},r=d(t,["displayName"]);if(e!==void 0&&r!=null&&h(e,["batch","displayName"],r),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Nb(t,e){const n={},r=d(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const i=d(t,["dest"]);return e!==void 0&&i!=null&&h(e,["outputConfig"],vb(gb(i))),n}function Xg(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","model"],lt(t,r));const i=d(e,["src"]);i!=null&&h(n,["batch","inputConfig"],wb(t,T0(t,i)));const a=d(e,["config"]);return a!=null&&Cb(a,n),n}function Ab(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["model"],lt(t,r));const i=d(e,["src"]);i!=null&&h(n,["inputConfig"],_b(T0(t,i)));const a=d(e,["config"]);return a!=null&&Nb(a,n),n}function Ib(t,e){const n={},r=d(t,["displayName"]);return e!==void 0&&r!=null&&h(e,["batch","displayName"],r),n}function Rb(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","model"],lt(t,r));const i=d(e,["src"]);i!=null&&h(n,["batch","inputConfig"],Ob(t,i));const a=d(e,["config"]);return a!=null&&Ib(a,n),n}function Pb(t,e){const n={},r=d(e,["name"]);return r!=null&&h(n,["_url","name"],Fi(t,r)),n}function Mb(t,e){const n={},r=d(e,["name"]);return r!=null&&h(n,["_url","name"],Fi(t,r)),n}function Db(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["name"]);r!=null&&h(e,["name"],r);const i=d(t,["done"]);i!=null&&h(e,["done"],i);const a=d(t,["error"]);return a!=null&&h(e,["error"],a),e}function jb(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["name"]);r!=null&&h(e,["name"],r);const i=d(t,["done"]);i!=null&&h(e,["done"],i);const a=d(t,["error"]);return a!=null&&h(e,["error"],a),e}function Lb(t,e){const n={},r=d(e,["contents"]);if(r!=null){let a=Md(t,r);Array.isArray(a)&&(a=a.map(l=>l)),h(n,["requests[]","request","content"],a)}const i=d(e,["config"]);return i!=null&&(h(n,["_self"],Ub(i,n)),M_(n,{"requests[].*":"requests[].request.*"})),n}function Ub(t,e){const n={},r=d(t,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const i=d(t,["title"]);e!==void 0&&i!=null&&h(e,["requests[]","title"],i);const a=d(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&h(e,["requests[]","outputDimensionality"],a),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Ob(t,e){const n={},r=d(e,["fileName"]);r!=null&&h(n,["file_name"],r);const i=d(e,["inlinedRequests"]);return i!=null&&h(n,["requests"],Lb(t,i)),n}function Fb(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function $b(t){const e={},n=d(t,["id"]);n!=null&&h(e,["id"],n);const r=d(t,["args"]);r!=null&&h(e,["args"],r);const i=d(t,["name"]);if(i!=null&&h(e,["name"],i),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zb(t){const e={},n=d(t,["mode"]);n!=null&&h(e,["mode"],n);const r=d(t,["allowedFunctionNames"]);if(r!=null&&h(e,["allowedFunctionNames"],r),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Vb(t,e,n){const r={},i=d(e,["systemInstruction"]);n!==void 0&&i!=null&&h(n,["systemInstruction"],A0(fn(i)));const a=d(e,["temperature"]);a!=null&&h(r,["temperature"],a);const l=d(e,["topP"]);l!=null&&h(r,["topP"],l);const f=d(e,["topK"]);f!=null&&h(r,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&h(r,["candidateCount"],p);const g=d(e,["maxOutputTokens"]);g!=null&&h(r,["maxOutputTokens"],g);const y=d(e,["stopSequences"]);y!=null&&h(r,["stopSequences"],y);const x=d(e,["responseLogprobs"]);x!=null&&h(r,["responseLogprobs"],x);const w=d(e,["logprobs"]);w!=null&&h(r,["logprobs"],w);const b=d(e,["presencePenalty"]);b!=null&&h(r,["presencePenalty"],b);const S=d(e,["frequencyPenalty"]);S!=null&&h(r,["frequencyPenalty"],S);const T=d(e,["seed"]);T!=null&&h(r,["seed"],T);const E=d(e,["responseMimeType"]);E!=null&&h(r,["responseMimeType"],E);const N=d(e,["responseSchema"]);N!=null&&h(r,["responseSchema"],Dd(N));const U=d(e,["responseJsonSchema"]);if(U!=null&&h(r,["responseJsonSchema"],U),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=d(e,["safetySettings"]);if(n!==void 0&&A!=null){let we=A;Array.isArray(we)&&(we=we.map($e=>sk($e))),h(n,["safetySettings"],we)}const F=d(e,["tools"]);if(n!==void 0&&F!=null){let we=Oi(F);Array.isArray(we)&&(we=we.map($e=>ok(Ui($e)))),h(n,["tools"],we)}const q=d(e,["toolConfig"]);if(n!==void 0&&q!=null&&h(n,["toolConfig"],ik(q)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=d(e,["cachedContent"]);n!==void 0&&Y!=null&&h(n,["cachedContent"],Hr(t,Y));const B=d(e,["responseModalities"]);B!=null&&h(r,["responseModalities"],B);const ue=d(e,["mediaResolution"]);ue!=null&&h(r,["mediaResolution"],ue);const Z=d(e,["speechConfig"]);if(Z!=null&&h(r,["speechConfig"],jd(Z)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const me=d(e,["thinkingConfig"]);me!=null&&h(r,["thinkingConfig"],me);const _e=d(e,["imageConfig"]);_e!=null&&h(r,["imageConfig"],Jb(_e));const Pe=d(e,["enableEnhancedCivicAnswers"]);return Pe!=null&&h(r,["enableEnhancedCivicAnswers"],Pe),r}function Bb(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(g=>Eb(g))),h(e,["candidates"],p)}const i=d(t,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const a=d(t,["promptFeedback"]);a!=null&&h(e,["promptFeedback"],a);const l=d(t,["responseId"]);l!=null&&h(e,["responseId"],l);const f=d(t,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function Hb(t,e){const n={},r=d(e,["name"]);return r!=null&&h(n,["_url","name"],Fi(t,r)),n}function Gb(t,e){const n={},r=d(e,["name"]);return r!=null&&h(n,["_url","name"],Fi(t,r)),n}function qb(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function Wb(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function Jb(t){const e={},n=d(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const r=d(t,["imageSize"]);if(r!=null&&h(e,["imageSize"],r),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Kb(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["request","model"],lt(t,r));const i=d(e,["contents"]);if(i!=null){let f=Yn(i);Array.isArray(f)&&(f=f.map(p=>A0(p))),h(n,["request","contents"],f)}const a=d(e,["metadata"]);a!=null&&h(n,["metadata"],a);const l=d(e,["config"]);return l!=null&&h(n,["request","generationConfig"],Vb(t,l,d(n,["request"],{}))),n}function Yb(t){const e={},n=d(t,["response"]);n!=null&&h(e,["response"],Bb(n));const r=d(t,["error"]);return r!=null&&h(e,["error"],r),e}function Qb(t,e){const n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=d(t,["pageToken"]);if(e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Xb(t,e){const n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=d(t,["pageToken"]);e!==void 0&&i!=null&&h(e,["_query","pageToken"],i);const a=d(t,["filter"]);return e!==void 0&&a!=null&&h(e,["_query","filter"],a),n}function Zb(t){const e={},n=d(t,["config"]);return n!=null&&Qb(n,e),e}function ek(t){const e={},n=d(t,["config"]);return n!=null&&Xb(n,e),e}function tk(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=d(t,["operations"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>rl(l))),h(e,["batchJobs"],a)}return e}function nk(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=d(t,["batchPredictionJobs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Jc(l))),h(e,["batchJobs"],a)}return e}function rk(t){const e={},n=d(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=d(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=d(t,["executableCode"]);i!=null&&h(e,["executableCode"],i);const a=d(t,["fileData"]);a!=null&&h(e,["fileData"],Fb(a));const l=d(t,["functionCall"]);l!=null&&h(e,["functionCall"],$b(l));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&h(e,["inlineData"],bb(p));const g=d(t,["text"]);g!=null&&h(e,["text"],g);const y=d(t,["thought"]);y!=null&&h(e,["thought"],y);const x=d(t,["thoughtSignature"]);x!=null&&h(e,["thoughtSignature"],x);const w=d(t,["videoMetadata"]);return w!=null&&h(e,["videoMetadata"],w),e}function sk(t){const e={},n=d(t,["category"]);if(n!=null&&h(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=d(t,["threshold"]);return r!=null&&h(e,["threshold"],r),e}function ik(t){const e={},n=d(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],zb(n));const r=d(t,["retrievalConfig"]);return r!=null&&h(e,["retrievalConfig"],r),e}function ok(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(x=>x)),h(e,["functionDeclarations"],y)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const i=d(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const a=d(t,["fileSearch"]);a!=null&&h(e,["fileSearch"],a);const l=d(t,["codeExecution"]);if(l!=null&&h(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&h(e,["googleMaps"],qb(f));const p=d(t,["googleSearch"]);p!=null&&h(e,["googleSearch"],Wb(p));const g=d(t,["urlContext"]);return g!=null&&h(e,["urlContext"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Vr||(Vr={}));class Ws{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!r||Object.keys(r).length===0?l={config:{}}:typeof r=="object"?l=Object.assign({},r):l=r,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(i=l.config)===null||i===void 0?void 0:i.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ak extends Br{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ws(Vr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Xg(this.apiClient,e),r=n._url,i=ye("{model}:batchGenerateContent",r),f=n.batch.inputConfig.requests,p=f.requests,g=[];for(const y of p){const x=Object.assign({},y);if(x.systemInstruction){const w=x.systemInstruction;delete x.systemInstruction;const b=x.request;b.systemInstruction=w,x.request=b}g.push(x)}return f.requests=g,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?r.dest=`${a.slice(0,-6)}/dest`:r.dest=`${a}_dest_${i}`;else if(l)r.dest=`${l}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=Ab(this.apiClient,e);return f=ye("batchPredictionJobs",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>Jc(y))}else{const g=Xg(this.apiClient,e);return f=ye("{model}:batchGenerateContent",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>rl(y))}}async createEmbeddingsInternal(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Rb(this.apiClient,e);return a=ye("{model}:asyncBatchEmbedContent",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>rl(p))}}async get(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=Gb(this.apiClient,e);return f=ye("batchPredictionJobs/{name}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>Jc(y))}else{const g=Hb(this.apiClient,e);return f=ye("batches/{name}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>rl(y))}}async cancel(e){var n,r,i,a;let l="",f={};if(this.apiClient.isVertexAI()){const p=Sb(this.apiClient,e);l=ye("batchPredictionJobs/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const p=kb(this.apiClient,e);l=ye("batches/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=ek(e);return f=ye("batchPredictionJobs",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=nk(y),w=new Jg;return Object.assign(w,x),w})}else{const g=Zb(e);return f=ye("batches",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=tk(y),w=new Jg;return Object.assign(w,x),w})}}async delete(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=Mb(this.apiClient,e);return f=ye("batchPredictionJobs/{name}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>jb(y))}else{const g=Pb(this.apiClient,e);return f=ye("batches/{name}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>Db(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lk(t){const e={},n=d(t,["data"]);if(n!=null&&h(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Zg(t){const e={},n=d(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Rk(a))),h(e,["parts"],i)}const r=d(t,["role"]);return r!=null&&h(e,["role"],r),e}function uk(t,e){const n={},r=d(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const i=d(t,["expireTime"]);e!==void 0&&i!=null&&h(e,["expireTime"],i);const a=d(t,["displayName"]);e!==void 0&&a!=null&&h(e,["displayName"],a);const l=d(t,["contents"]);if(e!==void 0&&l!=null){let y=Yn(l);Array.isArray(y)&&(y=y.map(x=>Zg(x))),h(e,["contents"],y)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],Zg(fn(f)));const p=d(t,["tools"]);if(e!==void 0&&p!=null){let y=p;Array.isArray(y)&&(y=y.map(x=>Mk(x))),h(e,["tools"],y)}const g=d(t,["toolConfig"]);if(e!==void 0&&g!=null&&h(e,["toolConfig"],Pk(g)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function ck(t,e){const n={},r=d(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const i=d(t,["expireTime"]);e!==void 0&&i!=null&&h(e,["expireTime"],i);const a=d(t,["displayName"]);e!==void 0&&a!=null&&h(e,["displayName"],a);const l=d(t,["contents"]);if(e!==void 0&&l!=null){let x=Yn(l);Array.isArray(x)&&(x=x.map(w=>w)),h(e,["contents"],x)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],fn(f));const p=d(t,["tools"]);if(e!==void 0&&p!=null){let x=p;Array.isArray(x)&&(x=x.map(w=>Dk(w))),h(e,["tools"],x)}const g=d(t,["toolConfig"]);e!==void 0&&g!=null&&h(e,["toolConfig"],g);const y=d(t,["kmsKeyName"]);return e!==void 0&&y!=null&&h(e,["encryption_spec","kmsKeyName"],y),n}function dk(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["model"],y0(t,r));const i=d(e,["config"]);return i!=null&&uk(i,n),n}function fk(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["model"],y0(t,r));const i=d(e,["config"]);return i!=null&&ck(i,n),n}function hk(t,e){const n={},r=d(e,["name"]);return r!=null&&h(n,["_url","name"],Hr(t,r)),n}function pk(t,e){const n={},r=d(e,["name"]);return r!=null&&h(n,["_url","name"],Hr(t,r)),n}function gk(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function mk(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function yk(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function vk(t){const e={},n=d(t,["id"]);n!=null&&h(e,["id"],n);const r=d(t,["args"]);r!=null&&h(e,["args"],r);const i=d(t,["name"]);if(i!=null&&h(e,["name"],i),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function xk(t){const e={},n=d(t,["mode"]);n!=null&&h(e,["mode"],n);const r=d(t,["allowedFunctionNames"]);if(r!=null&&h(e,["allowedFunctionNames"],r),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function wk(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(t,["description"]);n!=null&&h(e,["description"],n);const r=d(t,["name"]);r!=null&&h(e,["name"],r);const i=d(t,["parameters"]);i!=null&&h(e,["parameters"],i);const a=d(t,["parametersJsonSchema"]);a!=null&&h(e,["parametersJsonSchema"],a);const l=d(t,["response"]);l!=null&&h(e,["response"],l);const f=d(t,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function _k(t,e){const n={},r=d(e,["name"]);return r!=null&&h(n,["_url","name"],Hr(t,r)),n}function bk(t,e){const n={},r=d(e,["name"]);return r!=null&&h(n,["_url","name"],Hr(t,r)),n}function kk(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function Sk(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function Ek(t,e){const n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=d(t,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),n}function Tk(t,e){const n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=d(t,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),n}function Ck(t){const e={},n=d(t,["config"]);return n!=null&&Ek(n,e),e}function Nk(t){const e={},n=d(t,["config"]);return n!=null&&Tk(n,e),e}function Ak(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=d(t,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["cachedContents"],a)}return e}function Ik(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=d(t,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["cachedContents"],a)}return e}function Rk(t){const e={},n=d(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=d(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=d(t,["executableCode"]);i!=null&&h(e,["executableCode"],i);const a=d(t,["fileData"]);a!=null&&h(e,["fileData"],yk(a));const l=d(t,["functionCall"]);l!=null&&h(e,["functionCall"],vk(l));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&h(e,["inlineData"],lk(p));const g=d(t,["text"]);g!=null&&h(e,["text"],g);const y=d(t,["thought"]);y!=null&&h(e,["thought"],y);const x=d(t,["thoughtSignature"]);x!=null&&h(e,["thoughtSignature"],x);const w=d(t,["videoMetadata"]);return w!=null&&h(e,["videoMetadata"],w),e}function Pk(t){const e={},n=d(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],xk(n));const r=d(t,["retrievalConfig"]);return r!=null&&h(e,["retrievalConfig"],r),e}function Mk(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(x=>x)),h(e,["functionDeclarations"],y)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const i=d(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const a=d(t,["fileSearch"]);a!=null&&h(e,["fileSearch"],a);const l=d(t,["codeExecution"]);if(l!=null&&h(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&h(e,["googleMaps"],kk(f));const p=d(t,["googleSearch"]);p!=null&&h(e,["googleSearch"],Sk(p));const g=d(t,["urlContext"]);return g!=null&&h(e,["urlContext"],g),e}function Dk(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let x=n;Array.isArray(x)&&(x=x.map(w=>wk(w))),h(e,["functionDeclarations"],x)}const r=d(t,["retrieval"]);r!=null&&h(e,["retrieval"],r);const i=d(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const a=d(t,["computerUse"]);if(a!=null&&h(e,["computerUse"],a),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&h(e,["codeExecution"],l);const f=d(t,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const p=d(t,["googleMaps"]);p!=null&&h(e,["googleMaps"],p);const g=d(t,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const y=d(t,["urlContext"]);return y!=null&&h(e,["urlContext"],y),e}function jk(t,e){const n={},r=d(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const i=d(t,["expireTime"]);return e!==void 0&&i!=null&&h(e,["expireTime"],i),n}function Lk(t,e){const n={},r=d(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const i=d(t,["expireTime"]);return e!==void 0&&i!=null&&h(e,["expireTime"],i),n}function Uk(t,e){const n={},r=d(e,["name"]);r!=null&&h(n,["_url","name"],Hr(t,r));const i=d(e,["config"]);return i!=null&&jk(i,n),n}function Ok(t,e){const n={},r=d(e,["name"]);r!=null&&h(n,["_url","name"],Hr(t,r));const i=d(e,["config"]);return i!=null&&Lk(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fk extends Br{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ws(Vr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=fk(this.apiClient,e);return f=ye("cachedContents",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const g=dk(this.apiClient,e);return f=ye("cachedContents",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async get(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=bk(this.apiClient,e);return f=ye("{name}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const g=_k(this.apiClient,e);return f=ye("{name}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async delete(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=pk(this.apiClient,e);return f=ye("{name}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=mk(y),w=new qg;return Object.assign(w,x),w})}else{const g=hk(this.apiClient,e);return f=ye("{name}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=gk(y),w=new qg;return Object.assign(w,x),w})}}async update(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=Ok(this.apiClient,e);return f=ye("{name}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const g=Uk(this.apiClient,e);return f=ye("{name}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async listInternal(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=Nk(e);return f=ye("cachedContents",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=Ik(y),w=new Wg;return Object.assign(w,x),w})}else{const g=Ck(e);return f=ye("cachedContents",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=Ak(y),w=new Wg;return Object.assign(w,x),w})}}}function wl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function em(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ge(t){return this instanceof Ge?(this.v=t,this):new Ge(t)}function fr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(b){return function(S){return Promise.resolve(S).then(b,x)}}function f(b,S){r[b]&&(i[b]=function(T){return new Promise(function(E,N){a.push([b,T,E,N])>1||p(b,T)})},S&&(i[b]=S(i[b])))}function p(b,S){try{g(r[b](S))}catch(T){w(a[0][3],T)}}function g(b){b.value instanceof Ge?Promise.resolve(b.value.v).then(y,x):w(a[0][2],b)}function y(b){p("next",b)}function x(b){p("throw",b)}function w(b,S){b(S),a.shift(),a.length&&p(a[0][0],a[0][1])}}function hr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof em=="function"?em(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(l){return new Promise(function(f,p){l=t[a](l),i(f,p,l.done,l.value)})}}function i(a,l,f,p){Promise.resolve(p).then(function(g){a({value:g,done:f})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $k(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:I0(n)}function I0(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function zk(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function tm(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let a=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),a&&!I0(t[r])&&(a=!1),r++;a?e.push(...i):e.pop()}return e}class Vk{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Bk(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Bk{constructor(e,n,r,i={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=a,this.sendPromise=Promise.resolve(),zk(a)}async sendMessage(e){var n;await this.sendPromise;const r=fn(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,l,f;const p=await i,g=(l=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,y=p.automaticFunctionCallingHistory,x=this.getHistory(!0).length;let w=[];y!=null&&(w=(f=y.slice(x))!==null&&f!==void 0?f:[]);const b=g?[g]:[];this.recordHistory(r,b,w)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=fn(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const a=await i;return this.processStreamResponse(a,r)}getHistory(e=!1){const n=e?tm(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return fr(this,arguments,function*(){var i,a,l,f,p,g;const y=[];try{for(var x=!0,w=hr(e),b;b=yield Ge(w.next()),i=b.done,!i;x=!0){f=b.value,x=!1;const S=f;if($k(S)){const T=(g=(p=S.candidates)===null||p===void 0?void 0:p[0])===null||g===void 0?void 0:g.content;T!==void 0&&y.push(T)}yield yield Ge(S)}}catch(S){a={error:S}}finally{try{!x&&!i&&(l=w.return)&&(yield Ge(l.call(w)))}finally{if(a)throw a.error}}this.recordHistory(n,y)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(a=>a.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...tm(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Dl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hk(t){const e={},n=d(t,["file"]);return n!=null&&h(e,["file"],n),e}function Gk(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function qk(t){const e={},n=d(t,["name"]);return n!=null&&h(e,["_url","file"],k0(n)),e}function Wk(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function Jk(t){const e={},n=d(t,["name"]);return n!=null&&h(e,["_url","file"],k0(n)),e}function Kk(t,e){const n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=d(t,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),n}function Yk(t){const e={},n=d(t,["config"]);return n!=null&&Kk(n,e),e}function Qk(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=d(t,["files"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xk extends Br{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ws(Vr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Yk(e);return a=ye("files",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:p.headers},y})),i.then(p=>{const g=Qk(p),y=new nb;return Object.assign(y,g),y})}}async createInternal(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Hk(e);return a=ye("upload/v1beta/files",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const g=Gk(p),y=new rb;return Object.assign(y,g),y})}}async get(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Jk(e);return a=ye("files/{file}",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async delete(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=qk(e);return a=ye("files/{file}",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:p.headers},y})),i.then(p=>{const g=Wk(p),y=new sb;return Object.assign(y,g),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sl(t){const e={},n=d(t,["data"]);if(n!=null&&h(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Zk(t){const e={},n=d(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>gS(a))),h(e,["parts"],i)}const r=d(t,["role"]);return r!=null&&h(e,["role"],r),e}function eS(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function tS(t){const e={},n=d(t,["id"]);n!=null&&h(e,["id"],n);const r=d(t,["args"]);r!=null&&h(e,["args"],r);const i=d(t,["name"]);if(i!=null&&h(e,["name"],i),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nS(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(t,["description"]);n!=null&&h(e,["description"],n);const r=d(t,["name"]);r!=null&&h(e,["name"],r);const i=d(t,["parameters"]);i!=null&&h(e,["parameters"],i);const a=d(t,["parametersJsonSchema"]);a!=null&&h(e,["parametersJsonSchema"],a);const l=d(t,["response"]);l!=null&&h(e,["response"],l);const f=d(t,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function rS(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const r=d(t,["responseJsonSchema"]);r!=null&&h(e,["responseJsonSchema"],r);const i=d(t,["audioTimestamp"]);i!=null&&h(e,["audioTimestamp"],i);const a=d(t,["candidateCount"]);a!=null&&h(e,["candidateCount"],a);const l=d(t,["enableAffectiveDialog"]);l!=null&&h(e,["enableAffectiveDialog"],l);const f=d(t,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);const p=d(t,["logprobs"]);p!=null&&h(e,["logprobs"],p);const g=d(t,["maxOutputTokens"]);g!=null&&h(e,["maxOutputTokens"],g);const y=d(t,["mediaResolution"]);y!=null&&h(e,["mediaResolution"],y);const x=d(t,["presencePenalty"]);x!=null&&h(e,["presencePenalty"],x);const w=d(t,["responseLogprobs"]);w!=null&&h(e,["responseLogprobs"],w);const b=d(t,["responseMimeType"]);b!=null&&h(e,["responseMimeType"],b);const S=d(t,["responseModalities"]);S!=null&&h(e,["responseModalities"],S);const T=d(t,["responseSchema"]);T!=null&&h(e,["responseSchema"],T);const E=d(t,["routingConfig"]);E!=null&&h(e,["routingConfig"],E);const N=d(t,["seed"]);N!=null&&h(e,["seed"],N);const U=d(t,["speechConfig"]);U!=null&&h(e,["speechConfig"],R0(U));const A=d(t,["stopSequences"]);A!=null&&h(e,["stopSequences"],A);const F=d(t,["temperature"]);F!=null&&h(e,["temperature"],F);const q=d(t,["thinkingConfig"]);q!=null&&h(e,["thinkingConfig"],q);const Y=d(t,["topK"]);Y!=null&&h(e,["topK"],Y);const B=d(t,["topP"]);if(B!=null&&h(e,["topP"],B),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function sS(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function iS(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function oS(t,e){const n={},r=d(t,["generationConfig"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig"],r);const i=d(t,["responseModalities"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","responseModalities"],i);const a=d(t,["temperature"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","temperature"],a);const l=d(t,["topP"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","topP"],l);const f=d(t,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const p=d(t,["maxOutputTokens"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","maxOutputTokens"],p);const g=d(t,["mediaResolution"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","mediaResolution"],g);const y=d(t,["seed"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","seed"],y);const x=d(t,["speechConfig"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","speechConfig"],Ld(x));const w=d(t,["thinkingConfig"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","thinkingConfig"],w);const b=d(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],b);const S=d(t,["systemInstruction"]);e!==void 0&&S!=null&&h(e,["setup","systemInstruction"],Zk(fn(S)));const T=d(t,["tools"]);if(e!==void 0&&T!=null){let Y=Oi(T);Array.isArray(Y)&&(Y=Y.map(B=>yS(Ui(B)))),h(e,["setup","tools"],Y)}const E=d(t,["sessionResumption"]);e!==void 0&&E!=null&&h(e,["setup","sessionResumption"],mS(E));const N=d(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","inputAudioTranscription"],N);const U=d(t,["outputAudioTranscription"]);e!==void 0&&U!=null&&h(e,["setup","outputAudioTranscription"],U);const A=d(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&h(e,["setup","realtimeInputConfig"],A);const F=d(t,["contextWindowCompression"]);e!==void 0&&F!=null&&h(e,["setup","contextWindowCompression"],F);const q=d(t,["proactivity"]);if(e!==void 0&&q!=null&&h(e,["setup","proactivity"],q),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function aS(t,e){const n={},r=d(t,["generationConfig"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig"],rS(r));const i=d(t,["responseModalities"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","responseModalities"],i);const a=d(t,["temperature"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","temperature"],a);const l=d(t,["topP"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","topP"],l);const f=d(t,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const p=d(t,["maxOutputTokens"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","maxOutputTokens"],p);const g=d(t,["mediaResolution"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","mediaResolution"],g);const y=d(t,["seed"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","seed"],y);const x=d(t,["speechConfig"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","speechConfig"],R0(Ld(x)));const w=d(t,["thinkingConfig"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","thinkingConfig"],w);const b=d(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],b);const S=d(t,["systemInstruction"]);e!==void 0&&S!=null&&h(e,["setup","systemInstruction"],fn(S));const T=d(t,["tools"]);if(e!==void 0&&T!=null){let B=Oi(T);Array.isArray(B)&&(B=B.map(ue=>vS(Ui(ue)))),h(e,["setup","tools"],B)}const E=d(t,["sessionResumption"]);e!==void 0&&E!=null&&h(e,["setup","sessionResumption"],E);const N=d(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","inputAudioTranscription"],N);const U=d(t,["outputAudioTranscription"]);e!==void 0&&U!=null&&h(e,["setup","outputAudioTranscription"],U);const A=d(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&h(e,["setup","realtimeInputConfig"],A);const F=d(t,["contextWindowCompression"]);e!==void 0&&F!=null&&h(e,["setup","contextWindowCompression"],F);const q=d(t,["proactivity"]);e!==void 0&&q!=null&&h(e,["setup","proactivity"],q);const Y=d(t,["explicitVadSignal"]);return e!==void 0&&Y!=null&&h(e,["setup","explicitVadSignal"],Y),n}function lS(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["setup","model"],lt(t,r));const i=d(e,["config"]);return i!=null&&h(n,["config"],oS(i,n)),n}function uS(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["setup","model"],lt(t,r));const i=d(e,["config"]);return i!=null&&h(n,["config"],aS(i,n)),n}function cS(t){const e={},n=d(t,["musicGenerationConfig"]);return n!=null&&h(e,["musicGenerationConfig"],n),e}function dS(t){const e={},n=d(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),h(e,["weightedPrompts"],r)}return e}function fS(t){const e={},n=d(t,["media"]);if(n!=null){let g=v0(n);Array.isArray(g)&&(g=g.map(y=>sl(y))),h(e,["mediaChunks"],g)}const r=d(t,["audio"]);r!=null&&h(e,["audio"],sl(w0(r)));const i=d(t,["audioStreamEnd"]);i!=null&&h(e,["audioStreamEnd"],i);const a=d(t,["video"]);a!=null&&h(e,["video"],sl(x0(a)));const l=d(t,["text"]);l!=null&&h(e,["text"],l);const f=d(t,["activityStart"]);f!=null&&h(e,["activityStart"],f);const p=d(t,["activityEnd"]);return p!=null&&h(e,["activityEnd"],p),e}function hS(t){const e={},n=d(t,["media"]);if(n!=null){let g=v0(n);Array.isArray(g)&&(g=g.map(y=>y)),h(e,["mediaChunks"],g)}const r=d(t,["audio"]);r!=null&&h(e,["audio"],w0(r));const i=d(t,["audioStreamEnd"]);i!=null&&h(e,["audioStreamEnd"],i);const a=d(t,["video"]);a!=null&&h(e,["video"],x0(a));const l=d(t,["text"]);l!=null&&h(e,["text"],l);const f=d(t,["activityStart"]);f!=null&&h(e,["activityStart"],f);const p=d(t,["activityEnd"]);return p!=null&&h(e,["activityEnd"],p),e}function pS(t){const e={},n=d(t,["setupComplete"]);n!=null&&h(e,["setupComplete"],n);const r=d(t,["serverContent"]);r!=null&&h(e,["serverContent"],r);const i=d(t,["toolCall"]);i!=null&&h(e,["toolCall"],i);const a=d(t,["toolCallCancellation"]);a!=null&&h(e,["toolCallCancellation"],a);const l=d(t,["usageMetadata"]);l!=null&&h(e,["usageMetadata"],xS(l));const f=d(t,["goAway"]);f!=null&&h(e,["goAway"],f);const p=d(t,["sessionResumptionUpdate"]);p!=null&&h(e,["sessionResumptionUpdate"],p);const g=d(t,["voiceActivityDetectionSignal"]);return g!=null&&h(e,["voiceActivityDetectionSignal"],g),e}function gS(t){const e={},n=d(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=d(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=d(t,["executableCode"]);i!=null&&h(e,["executableCode"],i);const a=d(t,["fileData"]);a!=null&&h(e,["fileData"],eS(a));const l=d(t,["functionCall"]);l!=null&&h(e,["functionCall"],tS(l));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&h(e,["inlineData"],sl(p));const g=d(t,["text"]);g!=null&&h(e,["text"],g);const y=d(t,["thought"]);y!=null&&h(e,["thought"],y);const x=d(t,["thoughtSignature"]);x!=null&&h(e,["thoughtSignature"],x);const w=d(t,["videoMetadata"]);return w!=null&&h(e,["videoMetadata"],w),e}function mS(t){const e={},n=d(t,["handle"]);if(n!=null&&h(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function R0(t){const e={},n=d(t,["voiceConfig"]);n!=null&&h(e,["voiceConfig"],n);const r=d(t,["languageCode"]);if(r!=null&&h(e,["languageCode"],r),d(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function yS(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(x=>x)),h(e,["functionDeclarations"],y)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const i=d(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const a=d(t,["fileSearch"]);a!=null&&h(e,["fileSearch"],a);const l=d(t,["codeExecution"]);if(l!=null&&h(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&h(e,["googleMaps"],sS(f));const p=d(t,["googleSearch"]);p!=null&&h(e,["googleSearch"],iS(p));const g=d(t,["urlContext"]);return g!=null&&h(e,["urlContext"],g),e}function vS(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let x=n;Array.isArray(x)&&(x=x.map(w=>nS(w))),h(e,["functionDeclarations"],x)}const r=d(t,["retrieval"]);r!=null&&h(e,["retrieval"],r);const i=d(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const a=d(t,["computerUse"]);if(a!=null&&h(e,["computerUse"],a),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&h(e,["codeExecution"],l);const f=d(t,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const p=d(t,["googleMaps"]);p!=null&&h(e,["googleMaps"],p);const g=d(t,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const y=d(t,["urlContext"]);return y!=null&&h(e,["urlContext"],y),e}function xS(t){const e={},n=d(t,["promptTokenCount"]);n!=null&&h(e,["promptTokenCount"],n);const r=d(t,["cachedContentTokenCount"]);r!=null&&h(e,["cachedContentTokenCount"],r);const i=d(t,["candidatesTokenCount"]);i!=null&&h(e,["responseTokenCount"],i);const a=d(t,["toolUsePromptTokenCount"]);a!=null&&h(e,["toolUsePromptTokenCount"],a);const l=d(t,["thoughtsTokenCount"]);l!=null&&h(e,["thoughtsTokenCount"],l);const f=d(t,["totalTokenCount"]);f!=null&&h(e,["totalTokenCount"],f);const p=d(t,["promptTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(S=>S)),h(e,["promptTokensDetails"],b)}const g=d(t,["cacheTokensDetails"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(S=>S)),h(e,["cacheTokensDetails"],b)}const y=d(t,["candidatesTokensDetails"]);if(y!=null){let b=y;Array.isArray(b)&&(b=b.map(S=>S)),h(e,["responseTokensDetails"],b)}const x=d(t,["toolUsePromptTokensDetails"]);if(x!=null){let b=x;Array.isArray(b)&&(b=b.map(S=>S)),h(e,["toolUsePromptTokensDetails"],b)}const w=d(t,["trafficType"]);return w!=null&&h(e,["trafficType"],w),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wS(t){const e={},n=d(t,["data"]);if(n!=null&&h(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function _S(t){const e={},n=d(t,["content"]);n!=null&&h(e,["content"],n);const r=d(t,["citationMetadata"]);r!=null&&h(e,["citationMetadata"],bS(r));const i=d(t,["tokenCount"]);i!=null&&h(e,["tokenCount"],i);const a=d(t,["finishReason"]);a!=null&&h(e,["finishReason"],a);const l=d(t,["avgLogprobs"]);l!=null&&h(e,["avgLogprobs"],l);const f=d(t,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const p=d(t,["index"]);p!=null&&h(e,["index"],p);const g=d(t,["logprobsResult"]);g!=null&&h(e,["logprobsResult"],g);const y=d(t,["safetyRatings"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(b=>b)),h(e,["safetyRatings"],w)}const x=d(t,["urlContextMetadata"]);return x!=null&&h(e,["urlContextMetadata"],x),e}function bS(t){const e={},n=d(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),h(e,["citations"],r)}return e}function kS(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","model"],lt(t,r));const i=d(e,["contents"]);if(i!=null){let a=Yn(i);Array.isArray(a)&&(a=a.map(l=>l)),h(n,["contents"],a)}return n}function SS(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),h(e,["tokensInfo"],i)}return e}function ES(t){const e={},n=d(t,["values"]);n!=null&&h(e,["values"],n);const r=d(t,["statistics"]);return r!=null&&h(e,["statistics"],TS(r)),e}function TS(t){const e={},n=d(t,["truncated"]);n!=null&&h(e,["truncated"],n);const r=d(t,["token_count"]);return r!=null&&h(e,["tokenCount"],r),e}function jl(t){const e={},n=d(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>j1(a))),h(e,["parts"],i)}const r=d(t,["role"]);return r!=null&&h(e,["role"],r),e}function CS(t){const e={},n=d(t,["controlType"]);n!=null&&h(e,["controlType"],n);const r=d(t,["enableControlImageComputation"]);return r!=null&&h(e,["computeControl"],r),e}function NS(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function AS(t,e){const n={},r=d(t,["systemInstruction"]);e!==void 0&&r!=null&&h(e,["systemInstruction"],fn(r));const i=d(t,["tools"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>L0(f))),h(e,["tools"],l)}const a=d(t,["generationConfig"]);return e!==void 0&&a!=null&&h(e,["generationConfig"],w1(a)),n}function IS(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","model"],lt(t,r));const i=d(e,["contents"]);if(i!=null){let l=Yn(i);Array.isArray(l)&&(l=l.map(f=>jl(f))),h(n,["contents"],l)}const a=d(e,["config"]);return a!=null&&NS(a),n}function RS(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","model"],lt(t,r));const i=d(e,["contents"]);if(i!=null){let l=Yn(i);Array.isArray(l)&&(l=l.map(f=>f)),h(n,["contents"],l)}const a=d(e,["config"]);return a!=null&&AS(a,n),n}function PS(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["totalTokens"]);r!=null&&h(e,["totalTokens"],r);const i=d(t,["cachedContentTokenCount"]);return i!=null&&h(e,["cachedContentTokenCount"],i),e}function MS(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["totalTokens"]);return r!=null&&h(e,["totalTokens"],r),e}function DS(t,e){const n={},r=d(e,["model"]);return r!=null&&h(n,["_url","name"],lt(t,r)),n}function jS(t,e){const n={},r=d(e,["model"]);return r!=null&&h(n,["_url","name"],lt(t,r)),n}function LS(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function US(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function OS(t,e){const n={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const i=d(t,["negativePrompt"]);e!==void 0&&i!=null&&h(e,["parameters","negativePrompt"],i);const a=d(t,["numberOfImages"]);e!==void 0&&a!=null&&h(e,["parameters","sampleCount"],a);const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const f=d(t,["guidanceScale"]);e!==void 0&&f!=null&&h(e,["parameters","guidanceScale"],f);const p=d(t,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const g=d(t,["safetyFilterLevel"]);e!==void 0&&g!=null&&h(e,["parameters","safetySetting"],g);const y=d(t,["personGeneration"]);e!==void 0&&y!=null&&h(e,["parameters","personGeneration"],y);const x=d(t,["includeSafetyAttributes"]);e!==void 0&&x!=null&&h(e,["parameters","includeSafetyAttributes"],x);const w=d(t,["includeRaiReason"]);e!==void 0&&w!=null&&h(e,["parameters","includeRaiReason"],w);const b=d(t,["language"]);e!==void 0&&b!=null&&h(e,["parameters","language"],b);const S=d(t,["outputMimeType"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","mimeType"],S);const T=d(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","compressionQuality"],T);const E=d(t,["addWatermark"]);e!==void 0&&E!=null&&h(e,["parameters","addWatermark"],E);const N=d(t,["labels"]);e!==void 0&&N!=null&&h(e,["labels"],N);const U=d(t,["editMode"]);e!==void 0&&U!=null&&h(e,["parameters","editMode"],U);const A=d(t,["baseSteps"]);return e!==void 0&&A!=null&&h(e,["parameters","editConfig","baseSteps"],A),n}function FS(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","model"],lt(t,r));const i=d(e,["prompt"]);i!=null&&h(n,["instances[0]","prompt"],i);const a=d(e,["referenceImages"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(p=>z1(p))),h(n,["instances[0]","referenceImages"],f)}const l=d(e,["config"]);return l!=null&&OS(l,n),n}function $S(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>Ll(a))),h(e,["generatedImages"],i)}return e}function zS(t,e){const n={},r=d(t,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const i=d(t,["title"]);e!==void 0&&i!=null&&h(e,["requests[]","title"],i);const a=d(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&h(e,["requests[]","outputDimensionality"],a),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function VS(t,e){const n={},r=d(t,["taskType"]);e!==void 0&&r!=null&&h(e,["instances[]","task_type"],r);const i=d(t,["title"]);e!==void 0&&i!=null&&h(e,["instances[]","title"],i);const a=d(t,["outputDimensionality"]);e!==void 0&&a!=null&&h(e,["parameters","outputDimensionality"],a);const l=d(t,["mimeType"]);e!==void 0&&l!=null&&h(e,["instances[]","mimeType"],l);const f=d(t,["autoTruncate"]);return e!==void 0&&f!=null&&h(e,["parameters","autoTruncate"],f),n}function BS(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","model"],lt(t,r));const i=d(e,["contents"]);if(i!=null){let f=Md(t,i);Array.isArray(f)&&(f=f.map(p=>p)),h(n,["requests[]","content"],f)}const a=d(e,["config"]);a!=null&&zS(a,n);const l=d(e,["model"]);return l!==void 0&&h(n,["requests[]","model"],lt(t,l)),n}function HS(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","model"],lt(t,r));const i=d(e,["contents"]);if(i!=null){let l=Md(t,i);Array.isArray(l)&&(l=l.map(f=>f)),h(n,["instances[]","content"],l)}const a=d(e,["config"]);return a!=null&&VS(a,n),n}function GS(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["embeddings"],a)}const i=d(t,["metadata"]);return i!=null&&h(e,["metadata"],i),e}function qS(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>ES(l))),h(e,["embeddings"],a)}const i=d(t,["metadata"]);return i!=null&&h(e,["metadata"],i),e}function WS(t){const e={},n=d(t,["endpoint"]);n!=null&&h(e,["name"],n);const r=d(t,["deployedModelId"]);return r!=null&&h(e,["deployedModelId"],r),e}function JS(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function KS(t){const e={},n=d(t,["id"]);n!=null&&h(e,["id"],n);const r=d(t,["args"]);r!=null&&h(e,["args"],r);const i=d(t,["name"]);if(i!=null&&h(e,["name"],i),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function YS(t){const e={},n=d(t,["mode"]);n!=null&&h(e,["mode"],n);const r=d(t,["allowedFunctionNames"]);if(r!=null&&h(e,["allowedFunctionNames"],r),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function QS(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(t,["description"]);n!=null&&h(e,["description"],n);const r=d(t,["name"]);r!=null&&h(e,["name"],r);const i=d(t,["parameters"]);i!=null&&h(e,["parameters"],i);const a=d(t,["parametersJsonSchema"]);a!=null&&h(e,["parametersJsonSchema"],a);const l=d(t,["response"]);l!=null&&h(e,["response"],l);const f=d(t,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function XS(t,e,n){const r={},i=d(e,["systemInstruction"]);n!==void 0&&i!=null&&h(n,["systemInstruction"],jl(fn(i)));const a=d(e,["temperature"]);a!=null&&h(r,["temperature"],a);const l=d(e,["topP"]);l!=null&&h(r,["topP"],l);const f=d(e,["topK"]);f!=null&&h(r,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&h(r,["candidateCount"],p);const g=d(e,["maxOutputTokens"]);g!=null&&h(r,["maxOutputTokens"],g);const y=d(e,["stopSequences"]);y!=null&&h(r,["stopSequences"],y);const x=d(e,["responseLogprobs"]);x!=null&&h(r,["responseLogprobs"],x);const w=d(e,["logprobs"]);w!=null&&h(r,["logprobs"],w);const b=d(e,["presencePenalty"]);b!=null&&h(r,["presencePenalty"],b);const S=d(e,["frequencyPenalty"]);S!=null&&h(r,["frequencyPenalty"],S);const T=d(e,["seed"]);T!=null&&h(r,["seed"],T);const E=d(e,["responseMimeType"]);E!=null&&h(r,["responseMimeType"],E);const N=d(e,["responseSchema"]);N!=null&&h(r,["responseSchema"],Dd(N));const U=d(e,["responseJsonSchema"]);if(U!=null&&h(r,["responseJsonSchema"],U),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=d(e,["safetySettings"]);if(n!==void 0&&A!=null){let we=A;Array.isArray(we)&&(we=we.map($e=>V1($e))),h(n,["safetySettings"],we)}const F=d(e,["tools"]);if(n!==void 0&&F!=null){let we=Oi(F);Array.isArray(we)&&(we=we.map($e=>K1(Ui($e)))),h(n,["tools"],we)}const q=d(e,["toolConfig"]);if(n!==void 0&&q!=null&&h(n,["toolConfig"],J1(q)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=d(e,["cachedContent"]);n!==void 0&&Y!=null&&h(n,["cachedContent"],Hr(t,Y));const B=d(e,["responseModalities"]);B!=null&&h(r,["responseModalities"],B);const ue=d(e,["mediaResolution"]);ue!=null&&h(r,["mediaResolution"],ue);const Z=d(e,["speechConfig"]);if(Z!=null&&h(r,["speechConfig"],jd(Z)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const me=d(e,["thinkingConfig"]);me!=null&&h(r,["thinkingConfig"],me);const _e=d(e,["imageConfig"]);_e!=null&&h(r,["imageConfig"],E1(_e));const Pe=d(e,["enableEnhancedCivicAnswers"]);return Pe!=null&&h(r,["enableEnhancedCivicAnswers"],Pe),r}function ZS(t,e,n){const r={},i=d(e,["systemInstruction"]);n!==void 0&&i!=null&&h(n,["systemInstruction"],fn(i));const a=d(e,["temperature"]);a!=null&&h(r,["temperature"],a);const l=d(e,["topP"]);l!=null&&h(r,["topP"],l);const f=d(e,["topK"]);f!=null&&h(r,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&h(r,["candidateCount"],p);const g=d(e,["maxOutputTokens"]);g!=null&&h(r,["maxOutputTokens"],g);const y=d(e,["stopSequences"]);y!=null&&h(r,["stopSequences"],y);const x=d(e,["responseLogprobs"]);x!=null&&h(r,["responseLogprobs"],x);const w=d(e,["logprobs"]);w!=null&&h(r,["logprobs"],w);const b=d(e,["presencePenalty"]);b!=null&&h(r,["presencePenalty"],b);const S=d(e,["frequencyPenalty"]);S!=null&&h(r,["frequencyPenalty"],S);const T=d(e,["seed"]);T!=null&&h(r,["seed"],T);const E=d(e,["responseMimeType"]);E!=null&&h(r,["responseMimeType"],E);const N=d(e,["responseSchema"]);N!=null&&h(r,["responseSchema"],Dd(N));const U=d(e,["responseJsonSchema"]);U!=null&&h(r,["responseJsonSchema"],U);const A=d(e,["routingConfig"]);A!=null&&h(r,["routingConfig"],A);const F=d(e,["modelSelectionConfig"]);F!=null&&h(r,["modelConfig"],F);const q=d(e,["safetySettings"]);if(n!==void 0&&q!=null){let Le=q;Array.isArray(Le)&&(Le=Le.map(Te=>Te)),h(n,["safetySettings"],Le)}const Y=d(e,["tools"]);if(n!==void 0&&Y!=null){let Le=Oi(Y);Array.isArray(Le)&&(Le=Le.map(Te=>L0(Ui(Te)))),h(n,["tools"],Le)}const B=d(e,["toolConfig"]);n!==void 0&&B!=null&&h(n,["toolConfig"],B);const ue=d(e,["labels"]);n!==void 0&&ue!=null&&h(n,["labels"],ue);const Z=d(e,["cachedContent"]);n!==void 0&&Z!=null&&h(n,["cachedContent"],Hr(t,Z));const me=d(e,["responseModalities"]);me!=null&&h(r,["responseModalities"],me);const _e=d(e,["mediaResolution"]);_e!=null&&h(r,["mediaResolution"],_e);const Pe=d(e,["speechConfig"]);Pe!=null&&h(r,["speechConfig"],j0(jd(Pe)));const we=d(e,["audioTimestamp"]);we!=null&&h(r,["audioTimestamp"],we);const $e=d(e,["thinkingConfig"]);$e!=null&&h(r,["thinkingConfig"],$e);const Je=d(e,["imageConfig"]);if(Je!=null&&h(r,["imageConfig"],T1(Je)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function nm(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","model"],lt(t,r));const i=d(e,["contents"]);if(i!=null){let l=Yn(i);Array.isArray(l)&&(l=l.map(f=>jl(f))),h(n,["contents"],l)}const a=d(e,["config"]);return a!=null&&h(n,["generationConfig"],XS(t,a,n)),n}function rm(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","model"],lt(t,r));const i=d(e,["contents"]);if(i!=null){let l=Yn(i);Array.isArray(l)&&(l=l.map(f=>f)),h(n,["contents"],l)}const a=d(e,["config"]);return a!=null&&h(n,["generationConfig"],ZS(t,a,n)),n}function sm(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(g=>_S(g))),h(e,["candidates"],p)}const i=d(t,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const a=d(t,["promptFeedback"]);a!=null&&h(e,["promptFeedback"],a);const l=d(t,["responseId"]);l!=null&&h(e,["responseId"],l);const f=d(t,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function im(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["candidates"]);if(r!=null){let g=r;Array.isArray(g)&&(g=g.map(y=>y)),h(e,["candidates"],g)}const i=d(t,["createTime"]);i!=null&&h(e,["createTime"],i);const a=d(t,["modelVersion"]);a!=null&&h(e,["modelVersion"],a);const l=d(t,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const f=d(t,["responseId"]);f!=null&&h(e,["responseId"],f);const p=d(t,["usageMetadata"]);return p!=null&&h(e,["usageMetadata"],p),e}function e1(t,e){const n={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=d(t,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const i=d(t,["aspectRatio"]);e!==void 0&&i!=null&&h(e,["parameters","aspectRatio"],i);const a=d(t,["guidanceScale"]);if(e!==void 0&&a!=null&&h(e,["parameters","guidanceScale"],a),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&h(e,["parameters","safetySetting"],l);const f=d(t,["personGeneration"]);e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f);const p=d(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const g=d(t,["includeRaiReason"]);e!==void 0&&g!=null&&h(e,["parameters","includeRaiReason"],g);const y=d(t,["language"]);e!==void 0&&y!=null&&h(e,["parameters","language"],y);const x=d(t,["outputMimeType"]);e!==void 0&&x!=null&&h(e,["parameters","outputOptions","mimeType"],x);const w=d(t,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&h(e,["parameters","outputOptions","compressionQuality"],w),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=d(t,["imageSize"]);if(e!==void 0&&b!=null&&h(e,["parameters","sampleImageSize"],b),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function t1(t,e){const n={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const i=d(t,["negativePrompt"]);e!==void 0&&i!=null&&h(e,["parameters","negativePrompt"],i);const a=d(t,["numberOfImages"]);e!==void 0&&a!=null&&h(e,["parameters","sampleCount"],a);const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const f=d(t,["guidanceScale"]);e!==void 0&&f!=null&&h(e,["parameters","guidanceScale"],f);const p=d(t,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const g=d(t,["safetyFilterLevel"]);e!==void 0&&g!=null&&h(e,["parameters","safetySetting"],g);const y=d(t,["personGeneration"]);e!==void 0&&y!=null&&h(e,["parameters","personGeneration"],y);const x=d(t,["includeSafetyAttributes"]);e!==void 0&&x!=null&&h(e,["parameters","includeSafetyAttributes"],x);const w=d(t,["includeRaiReason"]);e!==void 0&&w!=null&&h(e,["parameters","includeRaiReason"],w);const b=d(t,["language"]);e!==void 0&&b!=null&&h(e,["parameters","language"],b);const S=d(t,["outputMimeType"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","mimeType"],S);const T=d(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","compressionQuality"],T);const E=d(t,["addWatermark"]);e!==void 0&&E!=null&&h(e,["parameters","addWatermark"],E);const N=d(t,["labels"]);e!==void 0&&N!=null&&h(e,["labels"],N);const U=d(t,["imageSize"]);e!==void 0&&U!=null&&h(e,["parameters","sampleImageSize"],U);const A=d(t,["enhancePrompt"]);return e!==void 0&&A!=null&&h(e,["parameters","enhancePrompt"],A),n}function n1(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","model"],lt(t,r));const i=d(e,["prompt"]);i!=null&&h(n,["instances[0]","prompt"],i);const a=d(e,["config"]);return a!=null&&e1(a,n),n}function r1(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","model"],lt(t,r));const i=d(e,["prompt"]);i!=null&&h(n,["instances[0]","prompt"],i);const a=d(e,["config"]);return a!=null&&t1(a,n),n}function s1(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>m1(l))),h(e,["generatedImages"],a)}const i=d(t,["positivePromptSafetyAttributes"]);return i!=null&&h(e,["positivePromptSafetyAttributes"],M0(i)),e}function i1(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>Ll(l))),h(e,["generatedImages"],a)}const i=d(t,["positivePromptSafetyAttributes"]);return i!=null&&h(e,["positivePromptSafetyAttributes"],D0(i)),e}function o1(t,e){const n={},r=d(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=d(t,["durationSeconds"]);if(e!==void 0&&i!=null&&h(e,["parameters","durationSeconds"],i),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=d(t,["aspectRatio"]);e!==void 0&&a!=null&&h(e,["parameters","aspectRatio"],a);const l=d(t,["resolution"]);e!==void 0&&l!=null&&h(e,["parameters","resolution"],l);const f=d(t,["personGeneration"]);if(e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=d(t,["negativePrompt"]);e!==void 0&&p!=null&&h(e,["parameters","negativePrompt"],p);const g=d(t,["enhancePrompt"]);if(e!==void 0&&g!=null&&h(e,["parameters","enhancePrompt"],g),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=d(t,["lastFrame"]);e!==void 0&&y!=null&&h(e,["instances[0]","lastFrame"],Ul(y));const x=d(t,["referenceImages"]);if(e!==void 0&&x!=null){let w=x;Array.isArray(w)&&(w=w.map(b=>lE(b))),h(e,["instances[0]","referenceImages"],w)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function a1(t,e){const n={},r=d(t,["numberOfVideos"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const a=d(t,["fps"]);e!==void 0&&a!=null&&h(e,["parameters","fps"],a);const l=d(t,["durationSeconds"]);e!==void 0&&l!=null&&h(e,["parameters","durationSeconds"],l);const f=d(t,["seed"]);e!==void 0&&f!=null&&h(e,["parameters","seed"],f);const p=d(t,["aspectRatio"]);e!==void 0&&p!=null&&h(e,["parameters","aspectRatio"],p);const g=d(t,["resolution"]);e!==void 0&&g!=null&&h(e,["parameters","resolution"],g);const y=d(t,["personGeneration"]);e!==void 0&&y!=null&&h(e,["parameters","personGeneration"],y);const x=d(t,["pubsubTopic"]);e!==void 0&&x!=null&&h(e,["parameters","pubsubTopic"],x);const w=d(t,["negativePrompt"]);e!==void 0&&w!=null&&h(e,["parameters","negativePrompt"],w);const b=d(t,["enhancePrompt"]);e!==void 0&&b!=null&&h(e,["parameters","enhancePrompt"],b);const S=d(t,["generateAudio"]);e!==void 0&&S!=null&&h(e,["parameters","generateAudio"],S);const T=d(t,["lastFrame"]);e!==void 0&&T!=null&&h(e,["instances[0]","lastFrame"],pr(T));const E=d(t,["referenceImages"]);if(e!==void 0&&E!=null){let A=E;Array.isArray(A)&&(A=A.map(F=>uE(F))),h(e,["instances[0]","referenceImages"],A)}const N=d(t,["mask"]);e!==void 0&&N!=null&&h(e,["instances[0]","mask"],aE(N));const U=d(t,["compressionQuality"]);return e!==void 0&&U!=null&&h(e,["parameters","compressionQuality"],U),n}function l1(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const r=d(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=d(t,["done"]);i!=null&&h(e,["done"],i);const a=d(t,["error"]);a!=null&&h(e,["error"],a);const l=d(t,["response","generateVideoResponse"]);return l!=null&&h(e,["response"],f1(l)),e}function u1(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const r=d(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=d(t,["done"]);i!=null&&h(e,["done"],i);const a=d(t,["error"]);a!=null&&h(e,["error"],a);const l=d(t,["response"]);return l!=null&&h(e,["response"],h1(l)),e}function c1(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","model"],lt(t,r));const i=d(e,["prompt"]);i!=null&&h(n,["instances[0]","prompt"],i);const a=d(e,["image"]);a!=null&&h(n,["instances[0]","image"],Ul(a));const l=d(e,["video"]);l!=null&&h(n,["instances[0]","video"],U0(l));const f=d(e,["source"]);f!=null&&p1(f,n);const p=d(e,["config"]);return p!=null&&o1(p,n),n}function d1(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","model"],lt(t,r));const i=d(e,["prompt"]);i!=null&&h(n,["instances[0]","prompt"],i);const a=d(e,["image"]);a!=null&&h(n,["instances[0]","image"],pr(a));const l=d(e,["video"]);l!=null&&h(n,["instances[0]","video"],O0(l));const f=d(e,["source"]);f!=null&&g1(f,n);const p=d(e,["config"]);return p!=null&&a1(p,n),n}function f1(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>v1(l))),h(e,["generatedVideos"],a)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const i=d(t,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function h1(t){const e={},n=d(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>x1(l))),h(e,["generatedVideos"],a)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const i=d(t,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function p1(t,e){const n={},r=d(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const i=d(t,["image"]);e!==void 0&&i!=null&&h(e,["instances[0]","image"],Ul(i));const a=d(t,["video"]);return e!==void 0&&a!=null&&h(e,["instances[0]","video"],U0(a)),n}function g1(t,e){const n={},r=d(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const i=d(t,["image"]);e!==void 0&&i!=null&&h(e,["instances[0]","image"],pr(i));const a=d(t,["video"]);return e!==void 0&&a!=null&&h(e,["instances[0]","video"],O0(a)),n}function m1(t){const e={},n=d(t,["_self"]);n!=null&&h(e,["image"],C1(n));const r=d(t,["raiFilteredReason"]);r!=null&&h(e,["raiFilteredReason"],r);const i=d(t,["_self"]);return i!=null&&h(e,["safetyAttributes"],M0(i)),e}function Ll(t){const e={},n=d(t,["_self"]);n!=null&&h(e,["image"],P0(n));const r=d(t,["raiFilteredReason"]);r!=null&&h(e,["raiFilteredReason"],r);const i=d(t,["_self"]);i!=null&&h(e,["safetyAttributes"],D0(i));const a=d(t,["prompt"]);return a!=null&&h(e,["enhancedPrompt"],a),e}function y1(t){const e={},n=d(t,["_self"]);n!=null&&h(e,["mask"],P0(n));const r=d(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),h(e,["labels"],i)}return e}function v1(t){const e={},n=d(t,["video"]);return n!=null&&h(e,["video"],iE(n)),e}function x1(t){const e={},n=d(t,["_self"]);return n!=null&&h(e,["video"],oE(n)),e}function w1(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const r=d(t,["responseJsonSchema"]);r!=null&&h(e,["responseJsonSchema"],r);const i=d(t,["audioTimestamp"]);i!=null&&h(e,["audioTimestamp"],i);const a=d(t,["candidateCount"]);a!=null&&h(e,["candidateCount"],a);const l=d(t,["enableAffectiveDialog"]);l!=null&&h(e,["enableAffectiveDialog"],l);const f=d(t,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);const p=d(t,["logprobs"]);p!=null&&h(e,["logprobs"],p);const g=d(t,["maxOutputTokens"]);g!=null&&h(e,["maxOutputTokens"],g);const y=d(t,["mediaResolution"]);y!=null&&h(e,["mediaResolution"],y);const x=d(t,["presencePenalty"]);x!=null&&h(e,["presencePenalty"],x);const w=d(t,["responseLogprobs"]);w!=null&&h(e,["responseLogprobs"],w);const b=d(t,["responseMimeType"]);b!=null&&h(e,["responseMimeType"],b);const S=d(t,["responseModalities"]);S!=null&&h(e,["responseModalities"],S);const T=d(t,["responseSchema"]);T!=null&&h(e,["responseSchema"],T);const E=d(t,["routingConfig"]);E!=null&&h(e,["routingConfig"],E);const N=d(t,["seed"]);N!=null&&h(e,["seed"],N);const U=d(t,["speechConfig"]);U!=null&&h(e,["speechConfig"],j0(U));const A=d(t,["stopSequences"]);A!=null&&h(e,["stopSequences"],A);const F=d(t,["temperature"]);F!=null&&h(e,["temperature"],F);const q=d(t,["thinkingConfig"]);q!=null&&h(e,["thinkingConfig"],q);const Y=d(t,["topK"]);Y!=null&&h(e,["topK"],Y);const B=d(t,["topP"]);if(B!=null&&h(e,["topP"],B),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function _1(t,e){const n={},r=d(e,["model"]);return r!=null&&h(n,["_url","name"],lt(t,r)),n}function b1(t,e){const n={},r=d(e,["model"]);return r!=null&&h(n,["_url","name"],lt(t,r)),n}function k1(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function S1(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function E1(t){const e={},n=d(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const r=d(t,["imageSize"]);if(r!=null&&h(e,["imageSize"],r),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function T1(t){const e={},n=d(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const r=d(t,["imageSize"]);r!=null&&h(e,["imageSize"],r);const i=d(t,["outputMimeType"]);i!=null&&h(e,["imageOutputOptions","mimeType"],i);const a=d(t,["outputCompressionQuality"]);return a!=null&&h(e,["imageOutputOptions","compressionQuality"],a),e}function C1(t){const e={},n=d(t,["bytesBase64Encoded"]);n!=null&&h(e,["imageBytes"],vs(n));const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function P0(t){const e={},n=d(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const r=d(t,["bytesBase64Encoded"]);r!=null&&h(e,["imageBytes"],vs(r));const i=d(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function Ul(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=d(t,["imageBytes"]);n!=null&&h(e,["bytesBase64Encoded"],vs(n));const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function pr(t){const e={},n=d(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const r=d(t,["imageBytes"]);r!=null&&h(e,["bytesBase64Encoded"],vs(r));const i=d(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function N1(t,e,n){const r={},i=d(e,["pageSize"]);n!==void 0&&i!=null&&h(n,["_query","pageSize"],i);const a=d(e,["pageToken"]);n!==void 0&&a!=null&&h(n,["_query","pageToken"],a);const l=d(e,["filter"]);n!==void 0&&l!=null&&h(n,["_query","filter"],l);const f=d(e,["queryBase"]);return n!==void 0&&f!=null&&h(n,["_url","models_url"],S0(t,f)),r}function A1(t,e,n){const r={},i=d(e,["pageSize"]);n!==void 0&&i!=null&&h(n,["_query","pageSize"],i);const a=d(e,["pageToken"]);n!==void 0&&a!=null&&h(n,["_query","pageToken"],a);const l=d(e,["filter"]);n!==void 0&&l!=null&&h(n,["_query","filter"],l);const f=d(e,["queryBase"]);return n!==void 0&&f!=null&&h(n,["_url","models_url"],S0(t,f)),r}function I1(t,e){const n={},r=d(e,["config"]);return r!=null&&N1(t,r,n),n}function R1(t,e){const n={},r=d(e,["config"]);return r!=null&&A1(t,r,n),n}function P1(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=d(t,["_self"]);if(i!=null){let a=E0(i);Array.isArray(a)&&(a=a.map(l=>Kc(l))),h(e,["models"],a)}return e}function M1(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=d(t,["_self"]);if(i!=null){let a=E0(i);Array.isArray(a)&&(a=a.map(l=>Yc(l))),h(e,["models"],a)}return e}function D1(t){const e={},n=d(t,["maskMode"]);n!=null&&h(e,["maskMode"],n);const r=d(t,["segmentationClasses"]);r!=null&&h(e,["maskClasses"],r);const i=d(t,["maskDilation"]);return i!=null&&h(e,["dilation"],i),e}function Kc(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const r=d(t,["displayName"]);r!=null&&h(e,["displayName"],r);const i=d(t,["description"]);i!=null&&h(e,["description"],i);const a=d(t,["version"]);a!=null&&h(e,["version"],a);const l=d(t,["_self"]);l!=null&&h(e,["tunedModelInfo"],Y1(l));const f=d(t,["inputTokenLimit"]);f!=null&&h(e,["inputTokenLimit"],f);const p=d(t,["outputTokenLimit"]);p!=null&&h(e,["outputTokenLimit"],p);const g=d(t,["supportedGenerationMethods"]);g!=null&&h(e,["supportedActions"],g);const y=d(t,["temperature"]);y!=null&&h(e,["temperature"],y);const x=d(t,["maxTemperature"]);x!=null&&h(e,["maxTemperature"],x);const w=d(t,["topP"]);w!=null&&h(e,["topP"],w);const b=d(t,["topK"]);b!=null&&h(e,["topK"],b);const S=d(t,["thinking"]);return S!=null&&h(e,["thinking"],S),e}function Yc(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const r=d(t,["displayName"]);r!=null&&h(e,["displayName"],r);const i=d(t,["description"]);i!=null&&h(e,["description"],i);const a=d(t,["versionId"]);a!=null&&h(e,["version"],a);const l=d(t,["deployedModels"]);if(l!=null){let x=l;Array.isArray(x)&&(x=x.map(w=>WS(w))),h(e,["endpoints"],x)}const f=d(t,["labels"]);f!=null&&h(e,["labels"],f);const p=d(t,["_self"]);p!=null&&h(e,["tunedModelInfo"],Q1(p));const g=d(t,["defaultCheckpointId"]);g!=null&&h(e,["defaultCheckpointId"],g);const y=d(t,["checkpoints"]);if(y!=null){let x=y;Array.isArray(x)&&(x=x.map(w=>w)),h(e,["checkpoints"],x)}return e}function j1(t){const e={},n=d(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=d(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=d(t,["executableCode"]);i!=null&&h(e,["executableCode"],i);const a=d(t,["fileData"]);a!=null&&h(e,["fileData"],JS(a));const l=d(t,["functionCall"]);l!=null&&h(e,["functionCall"],KS(l));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&h(e,["inlineData"],wS(p));const g=d(t,["text"]);g!=null&&h(e,["text"],g);const y=d(t,["thought"]);y!=null&&h(e,["thought"],y);const x=d(t,["thoughtSignature"]);x!=null&&h(e,["thoughtSignature"],x);const w=d(t,["videoMetadata"]);return w!=null&&h(e,["videoMetadata"],w),e}function L1(t){const e={},n=d(t,["productImage"]);return n!=null&&h(e,["image"],pr(n)),e}function U1(t,e){const n={},r=d(t,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const i=d(t,["baseSteps"]);e!==void 0&&i!=null&&h(e,["parameters","baseSteps"],i);const a=d(t,["outputGcsUri"]);e!==void 0&&a!=null&&h(e,["parameters","storageUri"],a);const l=d(t,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const f=d(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&h(e,["parameters","safetySetting"],f);const p=d(t,["personGeneration"]);e!==void 0&&p!=null&&h(e,["parameters","personGeneration"],p);const g=d(t,["addWatermark"]);e!==void 0&&g!=null&&h(e,["parameters","addWatermark"],g);const y=d(t,["outputMimeType"]);e!==void 0&&y!=null&&h(e,["parameters","outputOptions","mimeType"],y);const x=d(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&h(e,["parameters","outputOptions","compressionQuality"],x);const w=d(t,["enhancePrompt"]);e!==void 0&&w!=null&&h(e,["parameters","enhancePrompt"],w);const b=d(t,["labels"]);return e!==void 0&&b!=null&&h(e,["labels"],b),n}function O1(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","model"],lt(t,r));const i=d(e,["source"]);i!=null&&$1(i,n);const a=d(e,["config"]);return a!=null&&U1(a,n),n}function F1(t){const e={},n=d(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Ll(i))),h(e,["generatedImages"],r)}return e}function $1(t,e){const n={},r=d(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const i=d(t,["personImage"]);e!==void 0&&i!=null&&h(e,["instances[0]","personImage","image"],pr(i));const a=d(t,["productImages"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(f=>L1(f))),h(e,["instances[0]","productImages"],l)}return n}function z1(t){const e={},n=d(t,["referenceImage"]);n!=null&&h(e,["referenceImage"],pr(n));const r=d(t,["referenceId"]);r!=null&&h(e,["referenceId"],r);const i=d(t,["referenceType"]);i!=null&&h(e,["referenceType"],i);const a=d(t,["maskImageConfig"]);a!=null&&h(e,["maskImageConfig"],D1(a));const l=d(t,["controlImageConfig"]);l!=null&&h(e,["controlImageConfig"],CS(l));const f=d(t,["styleImageConfig"]);f!=null&&h(e,["styleImageConfig"],f);const p=d(t,["subjectImageConfig"]);return p!=null&&h(e,["subjectImageConfig"],p),e}function M0(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const r=d(t,["safetyAttributes","scores"]);r!=null&&h(e,["scores"],r);const i=d(t,["contentType"]);return i!=null&&h(e,["contentType"],i),e}function D0(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const r=d(t,["safetyAttributes","scores"]);r!=null&&h(e,["scores"],r);const i=d(t,["contentType"]);return i!=null&&h(e,["contentType"],i),e}function V1(t){const e={},n=d(t,["category"]);if(n!=null&&h(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=d(t,["threshold"]);return r!=null&&h(e,["threshold"],r),e}function B1(t){const e={},n=d(t,["image"]);return n!=null&&h(e,["image"],pr(n)),e}function H1(t,e){const n={},r=d(t,["mode"]);e!==void 0&&r!=null&&h(e,["parameters","mode"],r);const i=d(t,["maxPredictions"]);e!==void 0&&i!=null&&h(e,["parameters","maxPredictions"],i);const a=d(t,["confidenceThreshold"]);e!==void 0&&a!=null&&h(e,["parameters","confidenceThreshold"],a);const l=d(t,["maskDilation"]);e!==void 0&&l!=null&&h(e,["parameters","maskDilation"],l);const f=d(t,["binaryColorThreshold"]);e!==void 0&&f!=null&&h(e,["parameters","binaryColorThreshold"],f);const p=d(t,["labels"]);return e!==void 0&&p!=null&&h(e,["labels"],p),n}function G1(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","model"],lt(t,r));const i=d(e,["source"]);i!=null&&W1(i,n);const a=d(e,["config"]);return a!=null&&H1(a,n),n}function q1(t){const e={},n=d(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>y1(i))),h(e,["generatedMasks"],r)}return e}function W1(t,e){const n={},r=d(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const i=d(t,["image"]);e!==void 0&&i!=null&&h(e,["instances[0]","image"],pr(i));const a=d(t,["scribbleImage"]);return e!==void 0&&a!=null&&h(e,["instances[0]","scribble"],B1(a)),n}function j0(t){const e={},n=d(t,["voiceConfig"]);n!=null&&h(e,["voiceConfig"],n);const r=d(t,["languageCode"]);if(r!=null&&h(e,["languageCode"],r),d(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function J1(t){const e={},n=d(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],YS(n));const r=d(t,["retrievalConfig"]);return r!=null&&h(e,["retrievalConfig"],r),e}function K1(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(x=>x)),h(e,["functionDeclarations"],y)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const i=d(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const a=d(t,["fileSearch"]);a!=null&&h(e,["fileSearch"],a);const l=d(t,["codeExecution"]);if(l!=null&&h(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&h(e,["googleMaps"],k1(f));const p=d(t,["googleSearch"]);p!=null&&h(e,["googleSearch"],S1(p));const g=d(t,["urlContext"]);return g!=null&&h(e,["urlContext"],g),e}function L0(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let x=n;Array.isArray(x)&&(x=x.map(w=>QS(w))),h(e,["functionDeclarations"],x)}const r=d(t,["retrieval"]);r!=null&&h(e,["retrieval"],r);const i=d(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const a=d(t,["computerUse"]);if(a!=null&&h(e,["computerUse"],a),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&h(e,["codeExecution"],l);const f=d(t,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const p=d(t,["googleMaps"]);p!=null&&h(e,["googleMaps"],p);const g=d(t,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const y=d(t,["urlContext"]);return y!=null&&h(e,["urlContext"],y),e}function Y1(t){const e={},n=d(t,["baseModel"]);n!=null&&h(e,["baseModel"],n);const r=d(t,["createTime"]);r!=null&&h(e,["createTime"],r);const i=d(t,["updateTime"]);return i!=null&&h(e,["updateTime"],i),e}function Q1(t){const e={},n=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&h(e,["baseModel"],n);const r=d(t,["createTime"]);r!=null&&h(e,["createTime"],r);const i=d(t,["updateTime"]);return i!=null&&h(e,["updateTime"],i),e}function X1(t,e){const n={},r=d(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const i=d(t,["description"]);e!==void 0&&i!=null&&h(e,["description"],i);const a=d(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&h(e,["defaultCheckpointId"],a),n}function Z1(t,e){const n={},r=d(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const i=d(t,["description"]);e!==void 0&&i!=null&&h(e,["description"],i);const a=d(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&h(e,["defaultCheckpointId"],a),n}function eE(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","name"],lt(t,r));const i=d(e,["config"]);return i!=null&&X1(i,n),n}function tE(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","model"],lt(t,r));const i=d(e,["config"]);return i!=null&&Z1(i,n),n}function nE(t,e){const n={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const i=d(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&h(e,["parameters","safetySetting"],i);const a=d(t,["personGeneration"]);e!==void 0&&a!=null&&h(e,["parameters","personGeneration"],a);const l=d(t,["includeRaiReason"]);e!==void 0&&l!=null&&h(e,["parameters","includeRaiReason"],l);const f=d(t,["outputMimeType"]);e!==void 0&&f!=null&&h(e,["parameters","outputOptions","mimeType"],f);const p=d(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","compressionQuality"],p);const g=d(t,["enhanceInputImage"]);e!==void 0&&g!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],g);const y=d(t,["imagePreservationFactor"]);e!==void 0&&y!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const x=d(t,["labels"]);e!==void 0&&x!=null&&h(e,["labels"],x);const w=d(t,["numberOfImages"]);e!==void 0&&w!=null&&h(e,["parameters","sampleCount"],w);const b=d(t,["mode"]);return e!==void 0&&b!=null&&h(e,["parameters","mode"],b),n}function rE(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["_url","model"],lt(t,r));const i=d(e,["image"]);i!=null&&h(n,["instances[0]","image"],pr(i));const a=d(e,["upscaleFactor"]);a!=null&&h(n,["parameters","upscaleConfig","upscaleFactor"],a);const l=d(e,["config"]);return l!=null&&nE(l,n),n}function sE(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>Ll(a))),h(e,["generatedImages"],i)}return e}function iE(t){const e={},n=d(t,["uri"]);n!=null&&h(e,["uri"],n);const r=d(t,["encodedVideo"]);r!=null&&h(e,["videoBytes"],vs(r));const i=d(t,["encoding"]);return i!=null&&h(e,["mimeType"],i),e}function oE(t){const e={},n=d(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const r=d(t,["bytesBase64Encoded"]);r!=null&&h(e,["videoBytes"],vs(r));const i=d(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function aE(t){const e={},n=d(t,["image"]);n!=null&&h(e,["_self"],pr(n));const r=d(t,["maskMode"]);return r!=null&&h(e,["maskMode"],r),e}function lE(t){const e={},n=d(t,["image"]);n!=null&&h(e,["image"],Ul(n));const r=d(t,["referenceType"]);return r!=null&&h(e,["referenceType"],r),e}function uE(t){const e={},n=d(t,["image"]);n!=null&&h(e,["image"],pr(n));const r=d(t,["referenceType"]);return r!=null&&h(e,["referenceType"],r),e}function U0(t){const e={},n=d(t,["uri"]);n!=null&&h(e,["uri"],n);const r=d(t,["videoBytes"]);r!=null&&h(e,["encodedVideo"],vs(r));const i=d(t,["mimeType"]);return i!=null&&h(e,["encoding"],i),e}function O0(t){const e={},n=d(t,["uri"]);n!=null&&h(e,["gcsUri"],n);const r=d(t,["videoBytes"]);r!=null&&h(e,["bytesBase64Encoded"],vs(r));const i=d(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cE(t,e){const n={},r=d(t,["displayName"]);return e!==void 0&&r!=null&&h(e,["displayName"],r),n}function dE(t){const e={},n=d(t,["config"]);return n!=null&&cE(n,e),e}function fE(t,e){const n={},r=d(t,["force"]);return e!==void 0&&r!=null&&h(e,["_query","force"],r),n}function hE(t){const e={},n=d(t,["name"]);n!=null&&h(e,["_url","name"],n);const r=d(t,["config"]);return r!=null&&fE(r,e),e}function pE(t){const e={},n=d(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function gE(t,e){const n={},r=d(t,["customMetadata"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["customMetadata"],a)}const i=d(t,["chunkingConfig"]);return e!==void 0&&i!=null&&h(e,["chunkingConfig"],i),n}function mE(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const r=d(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=d(t,["done"]);i!=null&&h(e,["done"],i);const a=d(t,["error"]);a!=null&&h(e,["error"],a);const l=d(t,["response"]);return l!=null&&h(e,["response"],vE(l)),e}function yE(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const r=d(t,["fileName"]);r!=null&&h(e,["fileName"],r);const i=d(t,["config"]);return i!=null&&gE(i,e),e}function vE(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["parent"]);r!=null&&h(e,["parent"],r);const i=d(t,["documentName"]);return i!=null&&h(e,["documentName"],i),e}function xE(t,e){const n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=d(t,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),n}function wE(t){const e={},n=d(t,["config"]);return n!=null&&xE(n,e),e}function _E(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=d(t,["fileSearchStores"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["fileSearchStores"],a)}return e}function F0(t,e){const n={},r=d(t,["mimeType"]);e!==void 0&&r!=null&&h(e,["mimeType"],r);const i=d(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const a=d(t,["customMetadata"]);if(e!==void 0&&a!=null){let f=a;Array.isArray(f)&&(f=f.map(p=>p)),h(e,["customMetadata"],f)}const l=d(t,["chunkingConfig"]);return e!==void 0&&l!=null&&h(e,["chunkingConfig"],l),n}function bE(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const r=d(t,["config"]);return r!=null&&F0(r,e),e}function kE(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SE="Content-Type",EE="X-Server-Timeout",TE="User-Agent",Qc="x-goog-api-client",CE="1.33.0",NE=`google-genai-sdk/${CE}`,AE="v1beta1",IE="v1beta";class RE{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:AE,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:IE,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[l,f]of Object.entries(e.queryParams))i.searchParams.append(l,String(f));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,i.toString(),e.abortSignal),this.unaryApiCall(i,a,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,a]of Object.entries(n))typeof a=="object"?r[i]=Object.assign(Object.assign({},r[i]),a):a!==void 0&&(r[i]=a);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,i.toString(),e.abortSignal),this.streamApiCall(i,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const a=new AbortController,l=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const f=setTimeout(()=>a.abort(),n.timeout);f&&typeof f.unref=="function"&&f.unref()}i&&i.addEventListener("abort",()=>{a.abort()}),e.signal=l}return n&&n.extraBody!==null&&PE(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await om(i),new qc(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await om(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return fr(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),a=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let l="";const f="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:g,value:y}=yield Ge(i.read());if(g){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const x=a.decode(y,{stream:!0});try{const S=JSON.parse(x);if("error"in S){const T=JSON.parse(JSON.stringify(S.error)),E=T.status,N=T.code,U=`got status: ${E}. ${JSON.stringify(S)}`;if(N>=400&&N<600)throw new Dl({message:U,status:N})}}catch(S){if(S.name==="ApiError")throw S}l+=x;let w=-1,b=0;for(;;){w=-1,b=0;for(const E of p){const N=l.indexOf(E);N!==-1&&(w===-1||N<w)&&(w=N,b=E.length)}if(w===-1)break;const S=l.substring(0,w);l=l.substring(w+b);const T=S.trim();if(T.startsWith(f)){const E=T.substring(f.length).trim();try{const N=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ge(new qc(N))}catch(N){throw new Error(`exception parsing stream chunk ${E}. ${N}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=NE+" "+this.clientOptions.userAgentExtra;return e[TE]=n,e[Qc]=n,e[SE]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,a]of Object.entries(e.headers))r.append(i,a);e.timeout&&e.timeout>0&&r.append(EE,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);i.sizeBytes=String(l.size);const f=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:l.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=f;const p={file:i},g=this.getFileName(e),y=ye("upload/v1beta/files",p._url),x=await this.fetchUploadUrl(y,i.sizeBytes,i.mimeType,g,p,n==null?void 0:n.httpOptions);return a.upload(e,x,this)}async uploadFileToFileSearchStore(e,n,r){var i;const a=this.clientOptions.uploader,l=await a.stat(n),f=String(l.size),p=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:l.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const g=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(n),x={};r!=null&&F0(r,x);const w=await this.fetchUploadUrl(g,f,p,y,x,r==null?void 0:r.httpOptions);return a.uploadToFileSearchStore(n,w,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,a,l){var f;let p={};l?p=l:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const g=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:p});if(!g||!(g!=null&&g.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(f=g==null?void 0:g.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function om(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new Dl({message:i,status:n}):new Error(i)}}function PE(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,l){const f=Object.assign({},a);for(const p in l)if(Object.prototype.hasOwnProperty.call(l,p)){const g=l[p],y=f[p];g&&typeof g=="object"&&!Array.isArray(g)&&y&&typeof y=="object"&&!Array.isArray(y)?f[p]=r(y,g):(y&&g&&typeof y!=typeof g&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof y}, New type: ${typeof g}. Overwriting.`),f[p]=g)}return f}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ME="mcp_used/unknown";let DE=!1;function $0(t){for(const e of t)if(jE(e)||typeof e=="object"&&"inputSchema"in e)return!0;return DE}function z0(t){var e;const n=(e=t[Qc])!==null&&e!==void 0?e:"";t[Qc]=(n+` ${ME}`).trimStart()}function jE(t){return t!==null&&typeof t=="object"&&t instanceof Ud}function LE(t){return fr(this,arguments,function*(n,r=100){let i,a=0;for(;a<r;){const l=yield Ge(n.listTools({cursor:i}));for(const f of l.tools)yield yield Ge(f),a++;if(!l.nextCursor)break;i=l.nextCursor}})}class Ud{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Ud(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const a={},l=[];for(const y of this.mcpClients)try{for(var f=!0,p=(n=void 0,hr(LE(y))),g;g=await p.next(),e=g.done,!e;f=!0){i=g.value,f=!1;const x=i;l.push(x);const w=x.name;if(a[w])throw new Error(`Duplicate function name ${w} found in MCP tools. Please ensure function names are unique.`);a[w]=y}}catch(x){n={error:x}}finally{try{!f&&!e&&(r=p.return)&&await r.call(p)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),pb(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await i.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function UE(t,e,n){const r=new ob;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class OE{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=zE(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),p=`${i}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${f}`;let g=()=>{};const y=new Promise(A=>{g=A}),x=e.callbacks,w=function(){g({})},b=this.apiClient,S={onopen:w,onmessage:A=>{UE(b,x.onmessage,A)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(A){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(A){}},T=this.webSocketFactory.create(p,$E(l),S);T.connect(),await y;const U={setup:{model:lt(this.apiClient,e.model)}};return T.send(JSON.stringify(U)),new FE(T,this.apiClient)}}class FE{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=dS(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=cS(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ti.PLAY)}pause(){this.sendPlaybackControl(Ti.PAUSE)}stop(){this.sendPlaybackControl(Ti.STOP)}resetContext(){this.sendPlaybackControl(Ti.RESET_CONTEXT)}close(){this.conn.close()}}function $E(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function zE(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VE="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function BE(t,e,n){const r=new ib;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const a=JSON.parse(i);if(t.isVertexAI()){const l=pS(a);Object.assign(r,l)}else Object.assign(r,a);e(r)}class HE{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new OE(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,a,l,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),g=this.apiClient.getApiVersion();let y;const x=this.apiClient.getHeaders();e.config&&e.config.tools&&$0(e.config.tools)&&z0(x);const w=JE(x);if(this.apiClient.isVertexAI())y=`${p}/ws/google.cloud.aiplatform.${g}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(w,y);else{const Z=this.apiClient.getApiKey();let me="BidiGenerateContent",_e="key";Z!=null&&Z.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),g!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),me="BidiGenerateContentConstrained",_e="access_token"),y=`${p}/ws/google.ai.generativelanguage.${g}.GenerativeService.${me}?${_e}=${Z}`}let b=()=>{};const S=new Promise(Z=>{b=Z}),T=e.callbacks,E=function(){var Z;(Z=T==null?void 0:T.onopen)===null||Z===void 0||Z.call(T),b({})},N=this.apiClient,U={onopen:E,onmessage:Z=>{BE(N,T.onmessage,Z)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(Z){},onclose:(r=T==null?void 0:T.onclose)!==null&&r!==void 0?r:function(Z){}},A=this.webSocketFactory.create(y,WE(w),U);A.connect(),await S;let F=lt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&F.startsWith("publishers/")){const Z=this.apiClient.getProject(),me=this.apiClient.getLocation();F=`projects/${Z}/locations/${me}/`+F}let q={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[yl.AUDIO]}:e.config.responseModalities=[yl.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Y=(f=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&f!==void 0?f:[],B=[];for(const Z of Y)if(this.isCallableTool(Z)){const me=Z;B.push(await me.tool())}else B.push(Z);B.length>0&&(e.config.tools=B);const ue={model:F,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?q=uS(this.apiClient,ue):q=lS(this.apiClient,ue),delete q.config,A.send(JSON.stringify(q)),new qE(A,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const GE={turnComplete:!0};class qE{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Yn(n.turns),e.isVertexAI()||(r=r.map(i=>jl(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(VE)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},GE),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:hS(e)}:n={realtimeInput:fS(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function WE(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function JE(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const am=10;function lm(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ii(l)){i=!0;break}if(!i)return!0;const a=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ii(t){return"callTool"in t&&typeof t.callTool=="function"}function KE(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Ii(i)))!==null&&r!==void 0?r:!1}function um(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(Ii(r))return;const a=r;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(i)}),n}function cm(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YE extends Br{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,a,l,f;const p=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!KE(n)||lm(n.config))return await this.generateContentInternal(p);const g=um(n);if(g.length>0){const T=g.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${T}.`)}let y,x;const w=Yn(p.contents),b=(a=(i=(r=p.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:am;let S=0;for(;S<b&&(y=await this.generateContentInternal(p),!(!y.functionCalls||y.functionCalls.length===0));){const T=y.candidates[0].content,E=[];for(const N of(f=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&f!==void 0?f:[])if(Ii(N)){const A=await N.callTool(y.functionCalls);E.push(...A)}S++,x={role:"user",parts:E},p.contents=Yn(p.contents),p.contents.push(T),p.contents.push(x),cm(p.config)&&(w.push(T),w.push(x))}return cm(p.config)&&(y.automaticFunctionCallingHistory=w),y},this.generateContentStream=async n=>{var r,i,a,l,f;if(this.maybeMoveToResponseJsonSchem(n),lm(n.config)){const x=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(x)}const p=um(n);if(p.length>0){const x=p.map(w=>`tools[${w}]`).join(", ");throw new Error(`Incompatible tools found at ${x}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const g=(a=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,y=(f=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(g&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let a;const l=[];if(r!=null&&r.generatedImages)for(const p of r.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((i=p==null?void 0:p.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:l.push(p);let f;return a?f={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:f={generatedImages:l,sdkHttpResponse:r.sdkHttpResponse},f}),this.list=async n=>{var r;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((r=l.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Ws(Vr.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(l),l)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,a,l,f,p;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((p=(f=n.source)===null||f===void 0?void 0:f.video)===null||p===void 0)&&p.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const l=await Promise.all(a.map(async p=>Ii(p)?await p.tool():p)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(f.config.tools=l,e.config&&e.config.tools&&$0(e.config.tools)){const p=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let g=Object.assign({},p);Object.keys(g).length===0&&(g=this.apiClient.getDefaultHeaders()),z0(g),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:g})}return f}async initAfcToolsMap(e){var n,r,i;const a=new Map;for(const l of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Ii(l)){const f=l,p=await f.tool();for(const g of(i=p.functionDeclarations)!==null&&i!==void 0?i:[]){if(!g.name)throw new Error("Function declaration name is required.");if(a.has(g.name))throw new Error(`Duplicate tool declaration name: ${g.name}`);a.set(g.name,f)}}return a}async processAfcStream(e){var n,r,i;const a=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:am;let l=!1,f=0;const p=await this.initAfcToolsMap(e);return(function(g,y,x){return fr(this,arguments,function*(){for(var w,b,S,T,E,N;f<a;){l&&(f++,l=!1);const q=yield Ge(g.processParamsMaybeAddMcpUsage(x)),Y=yield Ge(g.generateContentStreamInternal(q)),B=[],ue=[];try{for(var U=!0,A=(b=void 0,hr(Y)),F;F=yield Ge(A.next()),w=F.done,!w;U=!0){T=F.value,U=!1;const Z=T;if(yield yield Ge(Z),Z.candidates&&(!((E=Z.candidates[0])===null||E===void 0)&&E.content)){ue.push(Z.candidates[0].content);for(const me of(N=Z.candidates[0].content.parts)!==null&&N!==void 0?N:[])if(f<a&&me.functionCall){if(!me.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(me.functionCall.name)){const _e=yield Ge(y.get(me.functionCall.name).callTool([me.functionCall]));B.push(..._e)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${me.functionCall.name}`)}}}}catch(Z){b={error:Z}}finally{try{!U&&!w&&(S=A.return)&&(yield Ge(S.call(A)))}finally{if(b)throw b.error}}if(B.length>0){l=!0;const Z=new _o;Z.candidates=[{content:{role:"user",parts:B}}],yield yield Ge(Z);const me=[];me.push(...ue),me.push({role:"user",parts:B});const _e=Yn(x.contents).concat(me);x.contents=_e}else break}})})(this,p,e)}async generateContentInternal(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=rm(this.apiClient,e);return f=ye("{model}:generateContent",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=im(y),w=new _o;return Object.assign(w,x),w})}else{const g=nm(this.apiClient,e);return f=ye("{model}:generateContent",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=sm(y),w=new _o;return Object.assign(w,x),w})}}async generateContentStreamInternal(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=rm(this.apiClient,e);return f=ye("{model}:streamGenerateContent?alt=sse",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(x){return fr(this,arguments,function*(){var w,b,S,T;try{for(var E=!0,N=hr(x),U;U=yield Ge(N.next()),w=U.done,!w;E=!0){T=U.value,E=!1;const A=T,F=im(yield Ge(A.json()));F.sdkHttpResponse={headers:A.headers};const q=new _o;Object.assign(q,F),yield yield Ge(q)}}catch(A){b={error:A}}finally{try{!E&&!w&&(S=N.return)&&(yield Ge(S.call(N)))}finally{if(b)throw b.error}}})})}else{const g=nm(this.apiClient,e);return f=ye("{model}:streamGenerateContent?alt=sse",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(x){return fr(this,arguments,function*(){var w,b,S,T;try{for(var E=!0,N=hr(x),U;U=yield Ge(N.next()),w=U.done,!w;E=!0){T=U.value,E=!1;const A=T,F=sm(yield Ge(A.json()));F.sdkHttpResponse={headers:A.headers};const q=new _o;Object.assign(q,F),yield yield Ge(q)}}catch(A){b={error:A}}finally{try{!E&&!w&&(S=N.return)&&(yield Ge(S.call(N)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=HS(this.apiClient,e);return f=ye("{model}:predict",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=qS(y),w=new Fg;return Object.assign(w,x),w})}else{const g=BS(this.apiClient,e);return f=ye("{model}:batchEmbedContents",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=GS(y),w=new Fg;return Object.assign(w,x),w})}}async generateImagesInternal(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=r1(this.apiClient,e);return f=ye("{model}:predict",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=i1(y),w=new $g;return Object.assign(w,x),w})}else{const g=n1(this.apiClient,e);return f=ye("{model}:predict",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=s1(y),w=new $g;return Object.assign(w,x),w})}}async editImageInternal(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const f=FS(this.apiClient,e);return a=ye("{model}:predict",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:p.headers},y})),i.then(p=>{const g=$S(p),y=new J_;return Object.assign(y,g),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const f=rE(this.apiClient,e);return a=ye("{model}:predict",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:p.headers},y})),i.then(p=>{const g=sE(p),y=new K_;return Object.assign(y,g),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const f=O1(this.apiClient,e);return a=ye("{model}:predict",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const g=F1(p),y=new Y_;return Object.assign(y,g),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const f=G1(this.apiClient,e);return a=ye("{model}:predict",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const g=q1(p),y=new Q_;return Object.assign(y,g),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=b1(this.apiClient,e);return f=ye("{name}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>Yc(y))}else{const g=_1(this.apiClient,e);return f=ye("{name}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>Kc(y))}}async listInternal(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=R1(this.apiClient,e);return f=ye("{models_url}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=M1(y),w=new zg;return Object.assign(w,x),w})}else{const g=I1(this.apiClient,e);return f=ye("{models_url}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=P1(y),w=new zg;return Object.assign(w,x),w})}}async update(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=tE(this.apiClient,e);return f=ye("{model}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>Yc(y))}else{const g=eE(this.apiClient,e);return f=ye("{name}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>Kc(y))}}async delete(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=jS(this.apiClient,e);return f=ye("{name}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=US(y),w=new Vg;return Object.assign(w,x),w})}else{const g=DS(this.apiClient,e);return f=ye("{name}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=LS(y),w=new Vg;return Object.assign(w,x),w})}}async countTokens(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=RS(this.apiClient,e);return f=ye("{model}:countTokens",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=MS(y),w=new Bg;return Object.assign(w,x),w})}else{const g=IS(this.apiClient,e);return f=ye("{model}:countTokens",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=PS(y),w=new Bg;return Object.assign(w,x),w})}}async computeTokens(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const f=kS(this.apiClient,e);return a=ye("{model}:computeTokens",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:p.headers},y})),i.then(p=>{const g=SS(p),y=new X_;return Object.assign(y,g),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=d1(this.apiClient,e);return f=ye("{model}:predictLongRunning",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>{const x=u1(y),w=new vl;return Object.assign(w,x),w})}else{const g=c1(this.apiClient,e);return f=ye("{model}:predictLongRunning",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const x=l1(y),w=new vl;return Object.assign(w,x),w})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QE extends Br{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=V_(e);return f=ye("{operationName}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l}else{const g=z_(e);return f=ye("{operationName}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l}}async fetchPredictVideosOperationInternal(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const f=D_(e);return a=ye("{resourceName}:fetchPredictOperation",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XE(t){const e={},n=d(t,["data"]);if(n!=null&&h(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function ZE(t){const e={},n=d(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>lT(a))),h(e,["parts"],i)}const r=d(t,["role"]);return r!=null&&h(e,["role"],r),e}function eT(t,e,n){const r={},i=d(e,["expireTime"]);n!==void 0&&i!=null&&h(n,["expireTime"],i);const a=d(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&h(n,["newSessionExpireTime"],a);const l=d(e,["uses"]);n!==void 0&&l!=null&&h(n,["uses"],l);const f=d(e,["liveConnectConstraints"]);n!==void 0&&f!=null&&h(n,["bidiGenerateContentSetup"],aT(t,f));const p=d(e,["lockAdditionalFields"]);return n!==void 0&&p!=null&&h(n,["fieldMask"],p),r}function tT(t,e){const n={},r=d(e,["config"]);return r!=null&&h(n,["config"],eT(t,r,n)),n}function nT(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function rT(t){const e={},n=d(t,["id"]);n!=null&&h(e,["id"],n);const r=d(t,["args"]);r!=null&&h(e,["args"],r);const i=d(t,["name"]);if(i!=null&&h(e,["name"],i),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sT(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function iT(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function oT(t,e){const n={},r=d(t,["generationConfig"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig"],r);const i=d(t,["responseModalities"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","responseModalities"],i);const a=d(t,["temperature"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","temperature"],a);const l=d(t,["topP"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","topP"],l);const f=d(t,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const p=d(t,["maxOutputTokens"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","maxOutputTokens"],p);const g=d(t,["mediaResolution"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","mediaResolution"],g);const y=d(t,["seed"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","seed"],y);const x=d(t,["speechConfig"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","speechConfig"],Ld(x));const w=d(t,["thinkingConfig"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","thinkingConfig"],w);const b=d(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],b);const S=d(t,["systemInstruction"]);e!==void 0&&S!=null&&h(e,["setup","systemInstruction"],ZE(fn(S)));const T=d(t,["tools"]);if(e!==void 0&&T!=null){let Y=Oi(T);Array.isArray(Y)&&(Y=Y.map(B=>cT(Ui(B)))),h(e,["setup","tools"],Y)}const E=d(t,["sessionResumption"]);e!==void 0&&E!=null&&h(e,["setup","sessionResumption"],uT(E));const N=d(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","inputAudioTranscription"],N);const U=d(t,["outputAudioTranscription"]);e!==void 0&&U!=null&&h(e,["setup","outputAudioTranscription"],U);const A=d(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&h(e,["setup","realtimeInputConfig"],A);const F=d(t,["contextWindowCompression"]);e!==void 0&&F!=null&&h(e,["setup","contextWindowCompression"],F);const q=d(t,["proactivity"]);if(e!==void 0&&q!=null&&h(e,["setup","proactivity"],q),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function aT(t,e){const n={},r=d(e,["model"]);r!=null&&h(n,["setup","model"],lt(t,r));const i=d(e,["config"]);return i!=null&&h(n,["config"],oT(i,n)),n}function lT(t){const e={},n=d(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=d(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=d(t,["executableCode"]);i!=null&&h(e,["executableCode"],i);const a=d(t,["fileData"]);a!=null&&h(e,["fileData"],nT(a));const l=d(t,["functionCall"]);l!=null&&h(e,["functionCall"],rT(l));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&h(e,["inlineData"],XE(p));const g=d(t,["text"]);g!=null&&h(e,["text"],g);const y=d(t,["thought"]);y!=null&&h(e,["thought"],y);const x=d(t,["thoughtSignature"]);x!=null&&h(e,["thoughtSignature"],x);const w=d(t,["videoMetadata"]);return w!=null&&h(e,["videoMetadata"],w),e}function uT(t){const e={},n=d(t,["handle"]);if(n!=null&&h(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function cT(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(x=>x)),h(e,["functionDeclarations"],y)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const i=d(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const a=d(t,["fileSearch"]);a!=null&&h(e,["fileSearch"],a);const l=d(t,["codeExecution"]);if(l!=null&&h(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&h(e,["googleMaps"],sT(f));const p=d(t,["googleSearch"]);p!=null&&h(e,["googleSearch"],iT(p));const g=d(t,["urlContext"]);return g!=null&&h(e,["urlContext"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dT(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(a=>`${n}.${a}`);e.push(...i)}else e.push(n)}return e.join(",")}function fT(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const a=dT(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];i.length>0&&(f=i.map(g=>l.includes(g)?`generationConfig.${g}`:g));const p=[];a&&p.push(a),f.length>0&&p.push(...f),p.length>0?t.fieldMask=p.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class hT extends Br{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=tT(this.apiClient,e);a=ye("auth_tokens",f._url),l=f._query,delete f.config,delete f._url,delete f._query;const p=fT(f,e.config);return i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),i.then(g=>g)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pT(t,e){const n={},r=d(t,["force"]);return e!==void 0&&r!=null&&h(e,["_query","force"],r),n}function gT(t){const e={},n=d(t,["name"]);n!=null&&h(e,["_url","name"],n);const r=d(t,["config"]);return r!=null&&pT(r,e),e}function mT(t){const e={},n=d(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function yT(t,e){const n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=d(t,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),n}function vT(t){const e={},n=d(t,["parent"]);n!=null&&h(e,["_url","parent"],n);const r=d(t,["config"]);return r!=null&&yT(r,e),e}function xT(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=d(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=d(t,["documents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wT extends Br{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ws(Vr.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=mT(e);return a=ye("{name}",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async delete(e){var n,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=gT(e);i=ye("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=vT(e);return a=ye("{parent}/documents",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const g=xT(p),y=new Z_;return Object.assign(y,g),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _T extends Br{constructor(e,n=new wT(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Ws(Vr.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=dE(e);return a=ye("fileSearchStores",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async get(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=pE(e);return a=ye("{name}",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async delete(e){var n,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=hE(e);i=ye("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=wE(e);return a=ye("fileSearchStores",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const g=_E(p),y=new eb;return Object.assign(y,g),y})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=bE(e);return a=ye("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const g=kE(p),y=new tb;return Object.assign(y,g),y})}}async importFile(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=yE(e);return a=ye("{file_search_store_name}:importFile",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const g=mE(p),y=new Rd;return Object.assign(y,g),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let V0=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return V0=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const bT=()=>V0();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xc(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Zc=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qn extends Error{}class wn extends Qn{constructor(e,n,r,i){super(`${wn.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Ol({message:r,cause:Zc(n)});const a=n;return e===400?new H0(e,a,r,i):e===401?new G0(e,a,r,i):e===403?new q0(e,a,r,i):e===404?new W0(e,a,r,i):e===409?new J0(e,a,r,i):e===422?new K0(e,a,r,i):e===429?new Y0(e,a,r,i):e>=500?new Q0(e,a,r,i):new wn(e,a,r,i)}}class ed extends wn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ol extends wn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class B0 extends Ol{constructor({message:e}={}){super({message:e??"Request timed out."})}}class H0 extends wn{}class G0 extends wn{}class q0 extends wn{}class W0 extends wn{}class J0 extends wn{}class K0 extends wn{}class Y0 extends wn{}class Q0 extends wn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kT=/^[a-z][a-z0-9+.-]*:/i,ST=t=>kT.test(t);let td=t=>(td=Array.isArray,td(t));const ET=td;let TT=ET;const dm=TT;function CT(t){if(!t)return!0;for(const e in t)return!1;return!0}function NT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const AT=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Qn(`${t} must be an integer`);if(e<0)throw new Qn(`${t} must be a positive integer`);return e},IT=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RT=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ki="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PT(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const MT=()=>{var t,e,n,r,i;const a=PT();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ki,"X-Stainless-OS":hm(Deno.build.os),"X-Stainless-Arch":fm(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ki,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ki,"X-Stainless-OS":hm((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":fm((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const l=DT();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ki,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ki,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function DT(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,a=r[2]||0,l=r[3]||0;return{browser:e,version:`${i}.${a}.${l}`}}}return null}const fm=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",hm=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Va;const jT=()=>Va??(Va=MT());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LT(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function X0(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function UT(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return X0({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Z0(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function OT(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FT=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ey=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Cc(t,e,n){return ey(),new File(t,e??"unknown_file",n)}function $T(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const zT=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ty=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",VT=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&ty(t),BT=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function HT(t,e,n){if(ey(),t=await t,VT(t))return t instanceof File?t:Cc([await t.arrayBuffer()],t.name);if(BT(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Cc(await nd(i),e,n)}const r=await nd(t);if(e||(e=$T(t)),!(n!=null&&n.type)){const i=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return Cc(r,e,n)}async function nd(t){var e,n,r,i,a;let l=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)l.push(t);else if(ty(t))l.push(t instanceof Blob?t:await t.arrayBuffer());else if(zT(t))try{for(var f=!0,p=hr(t),g;g=await p.next(),e=g.done,!e;f=!0){i=g.value,f=!1;const y=i;l.push(...await nd(y))}}catch(y){n={error:y}}finally{try{!f&&!e&&(r=p.return)&&await r.call(p)}finally{if(n)throw n.error}}else{const y=(a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${y?`; constructor: ${y}`:""}${GT(t)}`)}return l}function GT(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ny{constructor(e){this._client=e}}ny._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ry(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const pm=Object.freeze(Object.create(null)),qT=(t=ry)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const a=[],l=n.reduce((y,x,w)=>{var b,S,T;/[?#]/.test(x)&&(i=!0);const E=r[w];let N=(i?encodeURIComponent:t)(""+E);return w!==r.length&&(E==null||typeof E=="object"&&E.toString===((T=Object.getPrototypeOf((S=Object.getPrototypeOf((b=E.hasOwnProperty)!==null&&b!==void 0?b:pm))!==null&&S!==void 0?S:pm))===null||T===void 0?void 0:T.toString))&&(N=E+"",a.push({start:y.length+x.length,length:N.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),y+x+(w===r.length?"":N)},""),f=l.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let g;for(;(g=p.exec(f))!==null;)a.push({start:g.index,length:g[0].length,error:`Value "${g[0]}" can't be safely passed as a path parameter`});if(a.sort((y,x)=>y.start-x.start),a.length>0){let y=0;const x=a.reduce((w,b)=>{const S=" ".repeat(b.start-y),T="^".repeat(b.length);return y=b.start+b.length,w+S+T},"");throw new Qn(`Path parameters result in path with invalid segments:
${a.map(w=>w.error).join(`
`)}
${l}
${x}`)}return l}),Ba=qT(ry);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sy extends ny{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,a=wl(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Qn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Qn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ba`/${i}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(Ba`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(Ba`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const a=n??{},{api_version:l=this._client.apiVersion}=a,f=wl(a,["api_version"]);return this._client.get(Ba`/${l}/interactions/${e}`,Object.assign(Object.assign({query:f},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}sy._key=Object.freeze(["interactions"]);class iy extends sy{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WT(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let Ha;function Od(t){let e;return(Ha??(e=new globalThis.TextEncoder,Ha=e.encode.bind(e)))(t)}let Ga;function gm(t){let e;return(Ga??(e=new globalThis.TextDecoder,Ga=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fl{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Od(e):e;this.buffer=WT([this.buffer,n]);const r=[];let i;for(;(i=JT(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(gm(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,l=gm(this.buffer.subarray(0,a));r.push(l),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Fl.NEWLINE_CHARS=new Set([`
`,"\r"]);Fl.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function JT(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function KT(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _l={off:0,error:200,warn:300,info:400,debug:500},mm=(t,e,n)=>{if(t){if(NT(_l,t))return t;xn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(_l))}`)}};function So(){}function qa(t,e,n){return!e||_l[t]>_l[n]?So:e[t].bind(e)}const YT={error:So,warn:So,info:So,debug:So};let ym=new WeakMap;function xn(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return YT;const i=ym.get(n);if(i&&i[0]===r)return i[1];const a={error:qa("error",n,r),warn:qa("warn",n,r),info:qa("info",n,r),debug:qa("debug",n,r)};return ym.set(n,[r,a]),a}const Us=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ci{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const a=r?xn(r):console;function l(){return fr(this,arguments,function*(){var p,g,y,x;if(i)throw new Qn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let w=!1;try{try{for(var b=!0,S=hr(QT(e,n)),T;T=yield Ge(S.next()),p=T.done,!p;b=!0){x=T.value,b=!1;const E=x;if(!w)if(E.data.startsWith("[DONE]")){w=!0;continue}else try{yield yield Ge(JSON.parse(E.data))}catch(N){throw a.error("Could not parse message into JSON:",E.data),a.error("From chunk:",E.raw),N}}}catch(E){g={error:E}}finally{try{!b&&!p&&(y=S.return)&&(yield Ge(y.call(S)))}finally{if(g)throw g.error}}w=!0}catch(E){if(Xc(E))return yield Ge(void 0);throw E}finally{w||n.abort()}})}return new Ci(l,n,r)}static fromReadableStream(e,n,r){let i=!1;function a(){return fr(this,arguments,function*(){var p,g,y,x;const w=new Fl,b=Z0(e);try{for(var S=!0,T=hr(b),E;E=yield Ge(T.next()),p=E.done,!p;S=!0){x=E.value,S=!1;const N=x;for(const U of w.decode(N))yield yield Ge(U)}}catch(N){g={error:N}}finally{try{!S&&!p&&(y=T.return)&&(yield Ge(y.call(T)))}finally{if(g)throw g.error}}for(const N of w.flush())yield yield Ge(N)})}function l(){return fr(this,arguments,function*(){var p,g,y,x;if(i)throw new Qn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let w=!1;try{try{for(var b=!0,S=hr(a()),T;T=yield Ge(S.next()),p=T.done,!p;b=!0){x=T.value,b=!1;const E=x;w||E&&(yield yield Ge(JSON.parse(E)))}}catch(E){g={error:E}}finally{try{!b&&!p&&(y=S.return)&&(yield Ge(y.call(S)))}finally{if(g)throw g.error}}w=!0}catch(E){if(Xc(E))return yield Ge(void 0);throw E}finally{w||n.abort()}})}return new Ci(l,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=a=>({next:()=>{if(a.length===0){const l=r.next();e.push(l),n.push(l)}return a.shift()}});return[new Ci(()=>i(e),this.controller,this.client),new Ci(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return X0({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:a}=await n.next();if(a)return r.close();const l=Od(JSON.stringify(i)+`
`);r.enqueue(l)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function QT(t,e){return fr(this,arguments,function*(){var r,i,a,l;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Qn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Qn("Attempted to iterate over a response with no body");const f=new ZT,p=new Fl,g=Z0(t.body);try{for(var y=!0,x=hr(XT(g)),w;w=yield Ge(x.next()),r=w.done,!r;y=!0){l=w.value,y=!1;const b=l;for(const S of p.decode(b)){const T=f.decode(S);T&&(yield yield Ge(T))}}}catch(b){i={error:b}}finally{try{!y&&!r&&(a=x.return)&&(yield Ge(a.call(x)))}finally{if(i)throw i.error}}for(const b of p.flush()){const S=f.decode(b);S&&(yield yield Ge(S))}})}function XT(t){return fr(this,arguments,function*(){var n,r,i,a;let l=new Uint8Array;try{for(var f=!0,p=hr(t),g;g=yield Ge(p.next()),n=g.done,!n;f=!0){a=g.value,f=!1;const y=a;if(y==null)continue;const x=y instanceof ArrayBuffer?new Uint8Array(y):typeof y=="string"?Od(y):y;let w=new Uint8Array(l.length+x.length);w.set(l),w.set(x,l.length),l=w;let b;for(;(b=KT(l))!==-1;)yield yield Ge(l.slice(0,b)),l=l.slice(b)}}catch(y){r={error:y}}finally{try{!f&&!n&&(i=p.return)&&(yield Ge(i.call(p)))}finally{if(r)throw r.error}}l.length>0&&(yield yield Ge(l))})}class ZT{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=eC(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function eC(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function tC(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:a}=e,l=await(async()=>{var f;if(e.options.stream)return xn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Ci.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const p=n.headers.get("content-type"),g=(f=p==null?void 0:p.split(";")[0])===null||f===void 0?void 0:f.trim();return(g==null?void 0:g.includes("application/json"))||(g==null?void 0:g.endsWith("+json"))?await n.json():await n.text()})();return xn(t).debug(`[${r}] response parsed`,Us({retryOfRequestLogID:i,url:n.url,status:n.status,body:l,durationMs:Date.now()-a})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fd extends Promise{constructor(e,n,r=tC){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new Fd(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oy=Symbol("brand.privateNullableHeaders");function*nC(t){if(!t)return;if(oy in t){const{values:r,nulls:i}=t;yield*r.entries();for(const a of i)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():dm(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const a=dm(r[1])?r[1]:[r[1]];let l=!1;for(const f of a)f!==void 0&&(e&&!l&&(l=!0,yield[i,null]),yield[i,f])}}const Nc=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[a,l]of nC(r)){const f=a.toLowerCase();i.has(f)||(e.delete(a),i.add(f)),l===null?(e.delete(a),n.add(f)):(e.append(a,l),n.delete(f))}}return{[oy]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ac=t=>{var e,n,r,i,a,l;if(typeof globalThis.process<"u")return(r=(n=(e=N_)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(l=(a=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||a===void 0?void 0:a.call(i,t))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ay;class $l{constructor(e){var n,r,i,a,l,f,p,g=e===void 0?{}:e,{baseURL:y=Ac("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:x=(n=Ac("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:w="v1beta"}=g,b=wl(g,["baseURL","apiKey","apiVersion"]);const S=Object.assign(Object.assign({apiKey:x,apiVersion:w},b),{baseURL:y||"https://generativelanguage.googleapis.com"});this.baseURL=S.baseURL,this.timeout=(r=S.timeout)!==null&&r!==void 0?r:$l.DEFAULT_TIMEOUT,this.logger=(i=S.logger)!==null&&i!==void 0?i:console;const T="warn";this.logLevel=T,this.logLevel=(l=(a=mm(S.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:mm(Ac("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:T,this.fetchOptions=S.fetchOptions,this.maxRetries=(f=S.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(p=S.fetch)!==null&&p!==void 0?p:LT(),this.encoder=FT,this._options=S,this.apiKey=x,this.apiVersion=w}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){if(this.apiKey!=null)return Nc([{"x-goog-api-key":this.apiKey}])}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Qn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ki}`}defaultIdempotencyKey(){return`stainless-node-retry-${bT()}`}makeStatusError(e,n,r,i){return wn.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,a=ST(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return CT(l)||(n=Object.assign(Object.assign({},l),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new Fd(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,a,l;const f=await e,p=(i=f.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=p),await this.prepareOptions(f);const{req:g,url:y,timeout:x}=await this.buildRequest(f,{retryCount:p-n});await this.prepareRequest(g,{url:y,options:f});const w="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),b=r===void 0?"":`, retryOf: ${r}`,S=Date.now();if(xn(this).debug(`[${w}] sending request`,Us({retryOfRequestLogID:r,method:f.method,url:y,options:f,headers:g.headers})),!((a=f.signal)===null||a===void 0)&&a.aborted)throw new ed;const T=new AbortController,E=await this.fetchWithTimeout(y,g,x,T).catch(Zc),N=Date.now();if(E instanceof globalThis.Error){const A=`retrying, ${n} attempts remaining`;if(!((l=f.signal)===null||l===void 0)&&l.aborted)throw new ed;const F=Xc(E)||/timed? ?out/i.test(String(E)+("cause"in E?String(E.cause):""));if(n)return xn(this).info(`[${w}] connection ${F?"timed out":"failed"} - ${A}`),xn(this).debug(`[${w}] connection ${F?"timed out":"failed"} (${A})`,Us({retryOfRequestLogID:r,url:y,durationMs:N-S,message:E.message})),this.retryRequest(f,n,r??w);throw xn(this).info(`[${w}] connection ${F?"timed out":"failed"} - error; no more retries left`),xn(this).debug(`[${w}] connection ${F?"timed out":"failed"} (error; no more retries left)`,Us({retryOfRequestLogID:r,url:y,durationMs:N-S,message:E.message})),F?new B0:new Ol({cause:E})}const U=`[${w}${b}] ${g.method} ${y} ${E.ok?"succeeded":"failed"} with status ${E.status} in ${N-S}ms`;if(!E.ok){const A=await this.shouldRetry(E);if(n&&A){const Z=`retrying, ${n} attempts remaining`;return await OT(E.body),xn(this).info(`${U} - ${Z}`),xn(this).debug(`[${w}] response error (${Z})`,Us({retryOfRequestLogID:r,url:E.url,status:E.status,headers:E.headers,durationMs:N-S})),this.retryRequest(f,n,r??w,E.headers)}const F=A?"error; no more retries left":"error; not retryable";xn(this).info(`${U} - ${F}`);const q=await E.text().catch(Z=>Zc(Z).message),Y=IT(q),B=Y?void 0:q;throw xn(this).debug(`[${w}] response error (${F})`,Us({retryOfRequestLogID:r,url:E.url,status:E.status,headers:E.headers,message:B,durationMs:Date.now()-S})),this.makeStatusError(E.status,Y,B,E.headers)}return xn(this).info(U),xn(this).debug(`[${w}] response start`,Us({retryOfRequestLogID:r,url:E.url,status:E.status,headers:E.headers,durationMs:N-S})),{response:E,options:f,controller:T,requestLogID:w,retryOfRequestLogID:r,startTime:S}}async fetchWithTimeout(e,n,r,i){const a=n||{},{signal:l,method:f}=a,p=wl(a,["signal","method"]);l&&l.addEventListener("abort",()=>i.abort());const g=setTimeout(()=>i.abort(),r),y=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,x=Object.assign(Object.assign(Object.assign({signal:i.signal},y?{duplex:"half"}:{}),{method:"GET"}),p);f&&(x.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,x)}finally{clearTimeout(g)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var a;let l;const f=i==null?void 0:i.get("retry-after-ms");if(f){const g=parseFloat(f);Number.isNaN(g)||(l=g)}const p=i==null?void 0:i.get("retry-after");if(p&&!l){const g=parseFloat(p);Number.isNaN(g)?l=Date.parse(p)-Date.now():l=g*1e3}if(!(l&&0<=l&&l<60*1e3)){const g=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,g)}return await RT(l),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,l=Math.min(.5*Math.pow(2,a),8),f=1-Math.random()*.25;return l*f*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,a;const l=Object.assign({},e),{method:f,path:p,query:g,defaultBaseURL:y}=l,x=this.buildURL(p,g,y);"timeout"in l&&AT("timeout",l.timeout),l.timeout=(r=l.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:w,body:b}=this.buildBody({options:l}),S=await this.buildHeaders({options:e,method:f,bodyHeaders:w,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:S},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&b instanceof globalThis.ReadableStream&&{duplex:"half"}),b&&{body:b}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(a=l.fetchOptions)!==null&&a!==void 0?a:{}),url:x,timeout:l.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=Nc([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),jT()),await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Nc([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:UT(e)}:this.encoder({body:e,headers:r})}}$l.DEFAULT_TIMEOUT=6e4;class Yt extends $l{constructor(){super(...arguments),this.interactions=new iy(this)}}ay=Yt;Yt.GeminiNextGenAPIClient=ay;Yt.GeminiNextGenAPIClientError=Qn;Yt.APIError=wn;Yt.APIConnectionError=Ol;Yt.APIConnectionTimeoutError=B0;Yt.APIUserAbortError=ed;Yt.NotFoundError=W0;Yt.ConflictError=J0;Yt.RateLimitError=Y0;Yt.BadRequestError=H0;Yt.AuthenticationError=G0;Yt.InternalServerError=Q0;Yt.PermissionDeniedError=q0;Yt.UnprocessableEntityError=K0;Yt.toFile=HT;Yt.Interactions=iy;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rC(t,e){const n={},r=d(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function sC(t,e){const n={},r=d(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function iC(t,e){const n={},r=d(t,["sdkHttpResponse"]);return r!=null&&h(n,["sdkHttpResponse"],r),n}function oC(t,e){const n={},r=d(t,["sdkHttpResponse"]);return r!=null&&h(n,["sdkHttpResponse"],r),n}function aC(t,e,n){const r={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=d(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&h(e,["displayName"],i),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=d(t,["epochCount"]);e!==void 0&&a!=null&&h(e,["tuningTask","hyperparameters","epochCount"],a);const l=d(t,["learningRateMultiplier"]);if(l!=null&&h(r,["tuningTask","hyperparameters","learningRateMultiplier"],l),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(t,["batchSize"]);e!==void 0&&f!=null&&h(e,["tuningTask","hyperparameters","batchSize"],f);const p=d(t,["learningRate"]);if(e!==void 0&&p!=null&&h(e,["tuningTask","hyperparameters","learningRate"],p),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function lC(t,e,n){const r={};let i=d(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const b=d(t,["validationDataset"]);e!==void 0&&b!=null&&h(e,["supervisedTuningSpec"],vm(b))}else if(i==="PREFERENCE_TUNING"){const b=d(t,["validationDataset"]);e!==void 0&&b!=null&&h(e,["preferenceOptimizationSpec"],vm(b))}const a=d(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&h(e,["tunedModelDisplayName"],a);const l=d(t,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);let f=d(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const b=d(t,["epochCount"]);e!==void 0&&b!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(f==="PREFERENCE_TUNING"){const b=d(t,["epochCount"]);e!==void 0&&b!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let p=d(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const b=d(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(p==="PREFERENCE_TUNING"){const b=d(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let g=d(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const b=d(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(g==="PREFERENCE_TUNING"){const b=d(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let y=d(n,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const b=d(t,["adapterSize"]);e!==void 0&&b!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(y==="PREFERENCE_TUNING"){const b=d(t,["adapterSize"]);e!==void 0&&b!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const x=d(t,["labels"]);e!==void 0&&x!=null&&h(e,["labels"],x);const w=d(t,["beta"]);return e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],w),r}function uC(t,e){const n={},r=d(t,["baseModel"]);r!=null&&h(n,["baseModel"],r);const i=d(t,["preTunedModel"]);i!=null&&h(n,["preTunedModel"],i);const a=d(t,["trainingDataset"]);a!=null&&wC(a);const l=d(t,["config"]);return l!=null&&aC(l,n),n}function cC(t,e){const n={},r=d(t,["baseModel"]);r!=null&&h(n,["baseModel"],r);const i=d(t,["preTunedModel"]);i!=null&&h(n,["preTunedModel"],i);const a=d(t,["trainingDataset"]);a!=null&&_C(a,n,e);const l=d(t,["config"]);return l!=null&&lC(l,n,e),n}function dC(t,e){const n={},r=d(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function fC(t,e){const n={},r=d(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function hC(t,e,n){const r={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const a=d(t,["pageToken"]);e!==void 0&&a!=null&&h(e,["_query","pageToken"],a);const l=d(t,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),r}function pC(t,e,n){const r={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const a=d(t,["pageToken"]);e!==void 0&&a!=null&&h(e,["_query","pageToken"],a);const l=d(t,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),r}function gC(t,e){const n={},r=d(t,["config"]);return r!=null&&hC(r,n),n}function mC(t,e){const n={},r=d(t,["config"]);return r!=null&&pC(r,n),n}function yC(t,e){const n={},r=d(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const i=d(t,["nextPageToken"]);i!=null&&h(n,["nextPageToken"],i);const a=d(t,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(f=>ly(f))),h(n,["tuningJobs"],l)}return n}function vC(t,e){const n={},r=d(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const i=d(t,["nextPageToken"]);i!=null&&h(n,["nextPageToken"],i);const a=d(t,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(f=>rd(f))),h(n,["tuningJobs"],l)}return n}function xC(t,e){const n={},r=d(t,["name"]);r!=null&&h(n,["model"],r);const i=d(t,["name"]);return i!=null&&h(n,["endpoint"],i),n}function wC(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=d(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),h(n,["examples","examples"],i)}return n}function _C(t,e,n){const r={};let i=d(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const l=d(t,["gcsUri"]);e!==void 0&&l!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(i==="PREFERENCE_TUNING"){const l=d(t,["gcsUri"]);e!==void 0&&l!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let a=d(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=d(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=d(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function ly(t,e){const n={},r=d(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const i=d(t,["name"]);i!=null&&h(n,["name"],i);const a=d(t,["state"]);a!=null&&h(n,["state"],b0(a));const l=d(t,["createTime"]);l!=null&&h(n,["createTime"],l);const f=d(t,["tuningTask","startTime"]);f!=null&&h(n,["startTime"],f);const p=d(t,["tuningTask","completeTime"]);p!=null&&h(n,["endTime"],p);const g=d(t,["updateTime"]);g!=null&&h(n,["updateTime"],g);const y=d(t,["description"]);y!=null&&h(n,["description"],y);const x=d(t,["baseModel"]);x!=null&&h(n,["baseModel"],x);const w=d(t,["_self"]);return w!=null&&h(n,["tunedModel"],xC(w)),n}function rd(t,e){const n={},r=d(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const i=d(t,["name"]);i!=null&&h(n,["name"],i);const a=d(t,["state"]);a!=null&&h(n,["state"],b0(a));const l=d(t,["createTime"]);l!=null&&h(n,["createTime"],l);const f=d(t,["startTime"]);f!=null&&h(n,["startTime"],f);const p=d(t,["endTime"]);p!=null&&h(n,["endTime"],p);const g=d(t,["updateTime"]);g!=null&&h(n,["updateTime"],g);const y=d(t,["error"]);y!=null&&h(n,["error"],y);const x=d(t,["description"]);x!=null&&h(n,["description"],x);const w=d(t,["baseModel"]);w!=null&&h(n,["baseModel"],w);const b=d(t,["tunedModel"]);b!=null&&h(n,["tunedModel"],b);const S=d(t,["preTunedModel"]);S!=null&&h(n,["preTunedModel"],S);const T=d(t,["supervisedTuningSpec"]);T!=null&&h(n,["supervisedTuningSpec"],T);const E=d(t,["preferenceOptimizationSpec"]);E!=null&&h(n,["preferenceOptimizationSpec"],E);const N=d(t,["tuningDataStats"]);N!=null&&h(n,["tuningDataStats"],N);const U=d(t,["encryptionSpec"]);U!=null&&h(n,["encryptionSpec"],U);const A=d(t,["partnerModelTuningSpec"]);A!=null&&h(n,["partnerModelTuningSpec"],A);const F=d(t,["customBaseModel"]);F!=null&&h(n,["customBaseModel"],F);const q=d(t,["experiment"]);q!=null&&h(n,["experiment"],q);const Y=d(t,["labels"]);Y!=null&&h(n,["labels"],Y);const B=d(t,["outputUri"]);B!=null&&h(n,["outputUri"],B);const ue=d(t,["pipelineJob"]);ue!=null&&h(n,["pipelineJob"],ue);const Z=d(t,["serviceAccount"]);Z!=null&&h(n,["serviceAccount"],Z);const me=d(t,["tunedModelDisplayName"]);me!=null&&h(n,["tunedModelDisplayName"],me);const _e=d(t,["veoTuningSpec"]);return _e!=null&&h(n,["veoTuningSpec"],_e),n}function bC(t,e){const n={},r=d(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const i=d(t,["name"]);i!=null&&h(n,["name"],i);const a=d(t,["metadata"]);a!=null&&h(n,["metadata"],a);const l=d(t,["done"]);l!=null&&h(n,["done"],l);const f=d(t,["error"]);return f!=null&&h(n,["error"],f),n}function vm(t,e){const n={},r=d(t,["gcsUri"]);r!=null&&h(n,["validationDatasetUri"],r);const i=d(t,["vertexDatasetResource"]);return i!=null&&h(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kC extends Br{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ws(Vr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:i});return a.baseModel=void 0,await this.tuneInternal(a)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),a=await this.tuneMldevInternal(i);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:Gc.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=fC(e);return f=ye("{name}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>rd(y))}else{const g=dC(e);return f=ye("{name}",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>ly(y))}}async listInternal(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=mC(e);return f=ye("tuningJobs",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=vC(y),w=new Hg;return Object.assign(w,x),w})}else{const g=gC(e);return f=ye("tunedModels",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=yC(y),w=new Hg;return Object.assign(w,x),w})}}async cancel(e){var n,r,i,a;let l,f="",p={};if(this.apiClient.isVertexAI()){const g=sC(e);return f=ye("{name}:cancel",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=oC(y),w=new Gg;return Object.assign(w,x),w})}else{const g=rC(e);return f=ye("{name}:cancel",g._url),p=g._query,delete g._url,delete g._query,l=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const x=iC(y),w=new Gg;return Object.assign(w,x),w})}}async tuneInternal(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const f=cC(e,e);return a=ye("tuningJobs",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:p.headers},y})),i.then(p=>rd(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=uC(e);return a=ye("tunedModels",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:p.headers},y})),i.then(p=>bC(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SC{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const EC=1024*1024*8,TC=3,CC=1e3,NC=2,bl="x-goog-upload-status";async function AC(t,e,n){var r;const i=await uy(t,e,n),a=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[bl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function IC(t,e,n){var r;const i=await uy(t,e,n),a=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[bl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=m0(a),f=new Pd;return Object.assign(f,l),f}async function uy(t,e,n){var r,i;let a=0,l=0,f=new qc(new Response),p="upload";for(a=t.size;l<a;){const g=Math.min(EC,a-l),y=t.slice(l,l+g);l+g>=a&&(p+=", finalize");let x=0,w=CC;for(;x<TC&&(f=await n.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(l),"Content-Length":String(g)}}}),!(!((r=f==null?void 0:f.headers)===null||r===void 0)&&r[bl]));)x++,await PC(w),w=w*NC;if(l+=g,((i=f==null?void 0:f.headers)===null||i===void 0?void 0:i[bl])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function RC(t){return{size:t.size,type:t.type}}function PC(t){return new Promise(e=>setTimeout(e,t))}class MC{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await AC(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await IC(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RC(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DC{create(e,n,r){return new jC(e,n,r)}}class jC{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xm="x-goog-api-key";class LC{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(xm)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(xm,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UC="gl-node/";class OC{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Yt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=P_(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new LC(this.apiKey);this.apiClient=new RE({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:UC+"web",uploader:new MC,downloader:new SC}),this.models=new YE(this.apiClient),this.live=new HE(this.apiClient,i,new DC),this.batches=new ak(this.apiClient),this.chats=new Vk(this.models,this.apiClient),this.caches=new Fk(this.apiClient),this.files=new Xk(this.apiClient),this.operations=new QE(this.apiClient),this.authTokens=new hT(this.apiClient),this.tunings=new kC(this.apiClient),this.fileSearchStores=new _T(this.apiClient)}}const FC="AIzaSyADpKvZxuPBtZ4jd5aWq7hAOqtBGb-O1kc",Uo=()=>new OC({apiKey:FC}),zl=t=>t?t.replace(/```json\s*/g,"").replace(/```\s*/g,"").trim():"[]",$C=async t=>{const e=Uo(),n=`Erstelle einen Essensplan fr die nchsten 7 Tage (vollstndige Woche). 
  Prferenzen: ${t||"Gesund und schnell, kinderfreundlich"}.
  Gib das Ergebnis als JSON zurck. Antworte immer auf Deutsch.
  WICHTIG: Fge fr das Hauptgericht (mealName) eine kurze, verstndliche Schritt-fr-Schritt Zubereitungsanleitung hinzu.`;try{const r=await e.models.generateContent({model:"gemini-2.5-flash",contents:n,config:{responseMimeType:"application/json",responseSchema:{type:st.ARRAY,items:{type:st.OBJECT,properties:{day:{type:st.STRING,description:"Wochentag (z.B. Montag)"},mealName:{type:st.STRING,description:"Name des Gerichts (Abendessen)"},ingredients:{type:st.ARRAY,items:{type:st.STRING},description:"Liste der Hauptzutaten"},recipeHint:{type:st.STRING,description:"Sehr kurzer Teaser (z.B. 'Dauert 20 Min')"},instructions:{type:st.STRING,description:"Kompakte Kochanleitung fr das Gericht (3-4 Stze oder Schritte)."}},required:["day","mealName","ingredients","recipeHint","instructions"]}}}});return r.text?JSON.parse(zl(r.text)).map(a=>({...a,id:Date.now().toString()+Math.random().toString(36).substr(2,9),breakfast:"",lunch:""})):[]}catch(r){return console.error("Meal plan error:",r),[]}},zC=async t=>{const e=Uo();try{const n=t.split(",")[1],r=t.split(";")[0].split(":")[1],i=await e.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{mimeType:r,data:n}},{text:"Analysiere dieses Rezeptbild/Gericht. Extrahiere den Namen des Gerichts, eine kurze Beschreibung und eine Liste der bentigten Zutaten. Antworte unbedingt auf Deutsch."}]},config:{responseMimeType:"application/json",responseSchema:{type:st.OBJECT,properties:{name:{type:st.STRING},description:{type:st.STRING},ingredients:{type:st.ARRAY,items:{type:st.STRING}}},required:["name","ingredients"]}}});if(i.text){const a=JSON.parse(zl(i.text));return{id:Date.now().toString(),name:a.name,ingredients:a.ingredients,description:a.description,image:t}}return null}catch(n){return console.error("Recipe scan error:",n),null}},VC=async t=>{const e=Uo(),n=`Extract the recipe details from this URL: "${t}".
    Provide the Name, Ingredients, and a brief Description.
    Ensure the output is in German language (translate if necessary).
    Return JSON.`;try{const r=await e.models.generateContent({model:"gemini-2.5-flash",contents:n,config:{responseMimeType:"application/json",responseSchema:{type:st.OBJECT,properties:{name:{type:st.STRING},description:{type:st.STRING},ingredients:{type:st.ARRAY,items:{type:st.STRING}}},required:["name","ingredients"]}}});if(r.text){const i=JSON.parse(zl(r.text));return{id:Date.now().toString(),name:i.name,ingredients:i.ingredients,description:i.description,image:void 0}}return null}catch(r){return console.error("Recipe URL import error:",r),null}},cy=async(t,e,n)=>{const r=Uo();try{const i=`Du bist ein lokaler Reisefhrer. Suche nach: "${t}".
    WICHTIG: Suche NUR im Umkreis von 20km um diese Koordinaten: Latitude ${e}, Longitude ${n}. Ignoriere Orte, die weit entfernt sind.
    
    Antworte im JSON Format mit einer Liste von echten Orten.
    Fr jeden Ort:
    1. 'reviewsSummary': Generiere eine Zusammenfassung basierend auf typischen Google Rezensionen (z.B. "Beliebt fr den Kuchen, aber oft voll.").
    2. 'description': Warum ist es gut fr Familien?
    3. 'address': Die genaue Strae und Stadt.
    `,a=await r.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:st.OBJECT,properties:{summary:{type:st.STRING,description:"Kurze Zusammenfassung auf Deutsch"},places:{type:st.ARRAY,items:{type:st.OBJECT,properties:{title:{type:st.STRING},description:{type:st.STRING,description:"Warum es gut fr Familien ist"},rating:{type:st.STRING,description:"z.B. 4.5"},address:{type:st.STRING,description:"Adresse und Stadt"},reviewsSummary:{type:st.STRING,description:"Zusammenfassung der Meinungen/Rezensionen."}},required:["title","description","address","reviewsSummary"]}}},required:["summary","places"]}}});if(a.text){const l=JSON.parse(zl(a.text));return{text:l.summary||"Hier sind einige Vorschlge in deiner Nhe:",places:l.places||[]}}return{text:"Keine Ergebnisse gefunden.",places:[]}}catch(i){return console.error("Activity search error:",i),{text:"Entschuldigung, ich konnte keine Aktivitten laden.",places:[]}}},wm=async()=>{var i,a,l;const t=Uo(),e=["Pixar style 3D character","Watercolor painting","Cute pixel art","Friendly cartoon animal","Abstract colorful face"],r=`Generate a profile picture avatar. Style: ${e[Math.floor(Math.random()*e.length)]}. 
  The subject should be centered, joyful, and suitable for a family app. 
  White or simple gradient background.`;try{const f=await t.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:r}]}});for(const p of((l=(a=(i=f.candidates)==null?void 0:i[0])==null?void 0:a.content)==null?void 0:l.parts)||[])if(p.inlineData)return`data:${p.inlineData.mimeType};base64,${p.inlineData.data}`;return null}catch(f){return console.error("Avatar generation error:",f),null}},Wa=[{id:"obst_gemuese",label:"Obst & Gemse",icon:Ew,color:"text-orange-500 bg-orange-100 dark:bg-orange-900/30"},{id:"kuehlwaren",label:"Khl & TK",icon:Cd,color:"text-blue-500 bg-blue-100 dark:bg-blue-900/30"},{id:"vorrat",label:"Vorrat",icon:Gw,color:"text-amber-500 bg-amber-100 dark:bg-amber-900/30"},{id:"getraenke",label:"Getrnke",icon:$c,color:"text-purple-500 bg-purple-100 dark:bg-purple-900/30"},{id:"haushalt",label:"Haushalt",icon:Ed,color:"text-emerald-500 bg-emerald-100 dark:bg-emerald-900/30"},{id:"sonstiges",label:"Sonstiges",icon:Ow,color:"text-gray-500 bg-gray-100 dark:bg-gray-800"}],BC=({shoppingItems:t,householdTasks:e,personalTasks:n,recipes:r,family:i,currentUser:a,onToggleShopping:l,onAddShopping:f,onDeleteShopping:p,onAddHousehold:g,onToggleTask:y,onAddPersonal:x,onDeleteTask:w,onAddRecipe:b,onDeleteRecipe:S,onUpdateRecipe:T,onAddIngredientsToShopping:E,onAddMealToPlan:N,onProfileClick:U})=>{const[A,F]=j.useState("household"),[q,Y]=j.useState(""),[B,ue]=j.useState(""),[Z,me]=j.useState("medium"),[_e,Pe]=j.useState("sonstiges"),[we,$e]=j.useState(i.length>0?i[0].id:(a==null?void 0:a.id)||""),[Je,Le]=j.useState(!1),Te=j.useRef(null),J=j.useRef(null),[W,G]=j.useState(!1),[I,z]=j.useState(!1),[pe,$]=j.useState(""),[Q,de]=j.useState(!1),[oe,Ie]=j.useState(null),[He,qe]=j.useState(""),[mt,yt]=j.useState(""),[kt,he]=j.useState(""),[ce,Ue]=j.useState(""),[Ae,Xe]=j.useState(null),[nt,dt]=j.useState([]);j.useEffect(()=>{Le(!1),ue(""),me("medium"),Pe("sonstiges")},[A]),j.useEffect(()=>{i.length>0&&!i.find(ne=>ne.id===we)?$e(i[0].id):i.length===0&&we!==a.id&&$e(a.id)},[i,a.id,we]);const At=ne=>{N("Morgen",ne.name,ne.ingredients),alert(`${ne.name} wurde fr Morgen eingeplant!`)},St=ne=>{ne.preventDefault(),q.trim()&&(A==="shopping"?f(q.trim(),B.trim(),_e):A==="household"?g(q.trim(),we,Z,B.trim()):A==="personal"&&x(q.trim(),Z,B.trim()),Y(""),ue(""),me("medium"),Pe("sonstiges"),Le(!1))},Ft=()=>{var ne;(ne=Te.current)==null||ne.click()},Qt=async ne=>{var rt;const Ke=(rt=ne.target.files)==null?void 0:rt[0];if(Ke){G(!0);const ht=new FileReader;ht.onloadend=async()=>{const Re=ht.result,je=await Bs(Re,800,.7),ut=await zC(je);ut?b({...ut,image:je}):alert("Konnte Rezept nicht erkennen."),G(!1)},ht.readAsDataURL(Ke)}},K=async ne=>{var rt;const Ke=(rt=ne.target.files)==null?void 0:rt[0];if(Ke){const ht=new FileReader;ht.onloadend=async()=>{const Re=ht.result,je=await Bs(Re,800,.7);Ue(je)},ht.readAsDataURL(Ke)}},ve=ne=>{ne?(Ie(ne.id),qe(ne.name),yt(ne.description||""),he(ne.ingredients.join(`
`)),Ue(ne.image||"")):(Ie(null),qe(""),yt(""),he(""),Ue("")),de(!0)},ge=ne=>{if(ne.preventDefault(),!He.trim()||!kt.trim())return;const Ke=kt.split(`
`).map(rt=>rt.trim()).filter(rt=>rt.length>0);oe&&T?(T(oe,{name:He,description:mt,ingredients:Ke,image:ce}),Ae&&Ae.id===oe&&Xe({...Ae,name:He,description:mt,ingredients:Ke,image:ce})):b({id:Date.now().toString(),name:He,description:mt,ingredients:Ke,image:ce}),de(!1)},ft=async()=>{if(!pe.trim())return;G(!0);const ne=await VC(pe);ne?(b(ne),$(""),z(!1)):alert("Konnte Rezept nicht laden."),G(!1)},Ze=ne=>{Xe(ne),dt([...ne.ingredients])},ot=ne=>{nt.includes(ne)?dt(nt.filter(Ke=>Ke!==ne)):dt([...nt,ne])},Et=()=>{nt.length>0&&(E(nt),Xe(null))},_n=ne=>ne==="high"?c.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 mr-2 flex-shrink-0",title:"Hoch"}):ne==="low"?c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mr-2 flex-shrink-0",title:"Niedrig"}):null,hn=()=>{const ne=t.filter(Re=>!Re.checked),Ke=t.filter(Re=>Re.checked),rt={};Wa.forEach(Re=>rt[Re.id]=[]),ne.forEach(Re=>{const je=Re.category||"sonstiges";rt[je]||(rt[je]=[]),rt[je].push(Re)});const ht=Re=>c.jsxs("div",{className:"group flex items-start justify-between p-3 rounded-xl border cursor-pointer transition-all active:scale-[0.99] bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 shadow-sm mb-2",onClick:()=>l(Re.id),children:[c.jsxs("div",{className:"flex items-start overflow-hidden w-full",children:[c.jsx("div",{className:"mt-0.5",children:c.jsx(Rp,{className:"text-orange-500 mr-2 flex-shrink-0",size:20})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 line-clamp-2 leading-tight",children:Re.name}),Re.note&&c.jsxs("div",{className:"flex items-start mt-1.5",children:[c.jsx(Zw,{size:12,className:"text-yellow-500 mr-1.5 flex-shrink-0 mt-0.5"}),c.jsx("p",{className:"text-[11px] text-gray-500 dark:text-gray-400 italic bg-yellow-50 dark:bg-yellow-900/10 px-1.5 py-0.5 rounded border border-yellow-100 dark:border-yellow-800/20 inline-block",children:Re.note})]})]})]}),c.jsx("button",{onClick:je=>{je.stopPropagation(),p(Re.id)},className:"text-gray-300 hover:text-red-500 p-1.5 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition -mr-1",children:c.jsx(Tr,{size:16})})]},Re.id);return c.jsxs("div",{className:"space-y-6 pb-20",children:[Wa.map(Re=>{const je=rt[Re.id];return!je||je.length===0?null:c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-2 ml-1",children:[c.jsx("div",{className:`p-1 rounded-md ${Re.color}`,children:c.jsx(Re.icon,{size:14})}),c.jsx("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:Re.label})]}),c.jsx("div",{className:"space-y-2",children:je.map(ht)})]},Re.id)}),Object.keys(rt).filter(Re=>!Wa.find(je=>je.id===Re)&&rt[Re].length>0).map(Re=>c.jsxs("div",{children:[c.jsx("div",{className:"flex items-center space-x-2 mb-2 ml-1",children:c.jsx("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Andere"})}),c.jsx("div",{className:"space-y-2",children:rt[Re].map(ht)})]},Re)),ne.length===0&&Ke.length===0&&c.jsx("p",{className:"text-center text-gray-400 mt-12",children:"Liste ist leer"}),Ke.length>0&&c.jsxs("div",{className:"pt-4 border-t border-dashed border-gray-200 dark:border-gray-700 mt-4",children:[c.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3 ml-1",children:"Erledigt"}),c.jsx("div",{className:"space-y-2 opacity-60 hover:opacity-100 transition-opacity",children:Ke.map(Re=>c.jsxs("div",{className:"flex items-start justify-between p-3 rounded-xl border border-transparent bg-gray-50 dark:bg-gray-800/50 cursor-pointer",onClick:()=>l(Re.id),children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(Cp,{className:"text-gray-400 mr-2 flex-shrink-0",size:20}),c.jsx("span",{className:"text-sm font-medium text-gray-400 line-through",children:Re.name})]}),c.jsx("button",{onClick:je=>{je.stopPropagation(),p(Re.id)},className:"text-gray-300 hover:text-red-500 p-1.5 transition",children:c.jsx(Tr,{size:16})})]},Re.id))})]})]})},Vt=(ne,Ke)=>{let rt=ne;Ke==="household"&&a.role==="child"&&(rt=ne.filter(je=>je.assignedTo===a.id));const ht={high:3,medium:2,low:1},Re=[...rt].sort((je,ut)=>je.done!==ut.done?Number(je.done)-Number(ut.done):(ht[ut.priority||"medium"]||2)-(ht[je.priority||"medium"]||2));return c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[Re.map(je=>{const ut=i.find(Bt=>Bt.id===je.assignedTo);return c.jsxs("div",{className:`flex flex-col p-3 rounded-xl border relative overflow-hidden transition-all ${je.done?"bg-gray-50 dark:bg-gray-800/50 border-gray-100 dark:border-gray-700 opacity-60":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 shadow-sm"}`,children:[c.jsxs("div",{className:"flex items-start justify-between mb-1",children:[c.jsxs("div",{className:"flex items-center cursor-pointer w-full",onClick:()=>y(je.id,Ke),children:[je.done?c.jsx(Cp,{className:"text-green-500 mr-2 flex-shrink-0",size:20}):c.jsx(Rp,{className:`mr-2 flex-shrink-0 ${Ke==="household"?"text-blue-500":"text-purple-500"}`,size:20}),c.jsx("div",{className:"flex-1 min-w-0",children:c.jsxs("div",{className:"flex items-center",children:[!je.done&&_n(je.priority),c.jsx("span",{className:`text-sm font-medium line-clamp-2 leading-tight ${je.done?"text-gray-400 line-through":"text-gray-800 dark:text-gray-200"}`,children:je.title})]})})]}),(Ke==="personal"||a.role==="parent")&&c.jsx("button",{onClick:()=>w(je.id,Ke),className:"text-gray-300 hover:text-red-400 p-1 -mr-1 -mt-1 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition",children:c.jsx(Tr,{size:16})})]}),c.jsxs("div",{className:"pl-7 cursor-pointer",onClick:()=>y(je.id,Ke),children:[je.note&&c.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-700/50 p-1.5 rounded-md mb-2",children:je.note}),Ke==="household"&&ut&&!je.done&&c.jsxs("div",{className:"flex items-center pt-1",children:[c.jsx("img",{src:ut.avatar,alt:ut.name,className:"w-4 h-4 rounded-full border border-gray-200 dark:border-gray-700 mr-1.5"}),c.jsx("span",{className:`text-[10px] font-bold ${ut.color.replace("bg-","text-").split(" ")[1]}`,children:ut.name})]})]})]},je.id)}),Re.length===0&&c.jsx("div",{className:"text-center py-8 col-span-full",children:c.jsx("p",{className:"text-gray-400",children:"Keine Aufgaben vorhanden."})})]})},zn=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-center mb-2 gap-2",children:[c.jsx("input",{type:"file",ref:Te,accept:"image/*",capture:"environment",className:"hidden",onChange:Qt}),!I&&!Q?c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:Ft,disabled:W,className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-full font-bold shadow-md active:scale-95 transition flex items-center space-x-2 disabled:opacity-70 text-sm",children:[W?c.jsx(Cr,{className:"animate-spin",size:16}):c.jsx(Ao,{size:16}),c.jsx("span",{children:"Scan"})]}),c.jsxs("button",{onClick:()=>z(!0),disabled:W,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full font-bold shadow-md active:scale-95 transition flex items-center space-x-2 disabled:opacity-70 text-sm",children:[c.jsx(Vc,{size:16}),c.jsx("span",{children:"Link"})]}),c.jsxs("button",{onClick:()=>ve(),disabled:W,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-full font-bold shadow-md active:scale-95 transition flex items-center space-x-2 disabled:opacity-70 text-sm",children:[c.jsx(u0,{size:16}),c.jsx("span",{children:"Manuell"})]})]}):I?c.jsxs("div",{className:"flex-1 flex gap-2 animate-fade-in",children:[c.jsx("input",{type:"text",placeholder:"Rezept URL...",value:pe,onChange:ne=>$(ne.target.value),className:"flex-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full px-4 text-sm",autoFocus:!0}),c.jsx("button",{onClick:ft,disabled:!pe.trim(),className:"bg-blue-600 text-white p-2 rounded-full",children:c.jsx(r0,{size:16})}),c.jsx("button",{onClick:()=>z(!1),className:"bg-gray-200 text-gray-500 p-2 rounded-full",children:c.jsx(Ip,{size:16})})]}):null]}),W&&c.jsx("div",{className:"text-center text-xs text-emerald-600 animate-pulse font-bold",children:"Verarbeite Rezept..."}),c.jsx("div",{className:"grid grid-cols-2 gap-3",children:r.map(ne=>c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden flex flex-col cursor-pointer active:scale-[0.98] transition",onClick:()=>Ze(ne),children:[ne.image?c.jsxs("div",{className:"h-24 w-full overflow-hidden bg-gray-100 dark:bg-gray-900 relative",children:[c.jsx("img",{src:ne.image,className:"w-full h-full object-cover"}),c.jsx("button",{onClick:Ke=>{Ke.stopPropagation(),S(ne.id)},className:"absolute top-1 right-1 bg-black/40 text-white p-1 rounded-full hover:bg-red-500 transition",children:c.jsx(Tr,{size:12})})]}):c.jsxs("div",{className:"h-24 w-full bg-orange-100 dark:bg-orange-900/20 flex items-center justify-center relative",children:[c.jsx(Ni,{size:24,className:"text-orange-300"}),c.jsx("button",{onClick:Ke=>{Ke.stopPropagation(),S(ne.id)},className:"absolute top-1 right-1 bg-black/10 text-gray-500 p-1 rounded-full hover:bg-red-500 hover:text-white transition",children:c.jsx(Tr,{size:12})})]}),c.jsxs("div",{className:"p-3 flex-1 flex flex-col",children:[c.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-sm line-clamp-1 mb-1",children:ne.name}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 line-clamp-2 mb-2",children:ne.description||"Keine Beschreibung"}),c.jsxs("p",{className:"text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-0.5",children:[ne.ingredients.length," Zutaten"]})]})]})]},ne.id))}),r.length===0&&!W&&c.jsxs("div",{className:"text-center text-gray-400 py-8 italic flex flex-col items-center",children:[c.jsx(Ni,{size:32,className:"mb-2 opacity-30"}),c.jsx("p",{className:"text-sm",children:"Deine Galerie ist leer."})]})]}),It=A==="household"&&a.role==="parent",pn=A!=="household"&&A!=="recipes"||It;return c.jsxs(c.Fragment,{children:[c.jsx(Lo,{title:"Listen",currentUser:a,onProfileClick:U}),c.jsx("div",{className:"px-4 mt-2",children:c.jsxs("div",{className:"flex p-1 bg-gray-200 dark:bg-gray-800 rounded-xl w-full shadow-inner",children:[c.jsxs("button",{onClick:()=>F("shopping"),className:`flex-1 py-2 rounded-lg text-[10px] sm:text-xs font-bold flex items-center justify-center space-x-1 transition-all uppercase tracking-wide z-10 ${A==="shopping"?"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[c.jsx(Yw,{size:14,className:"flex-shrink-0"})," ",c.jsx("span",{className:"truncate",children:"Einkauf"})]}),c.jsxs("button",{onClick:()=>F("recipes"),className:`flex-1 py-2 rounded-lg text-[10px] sm:text-xs font-bold flex items-center justify-center space-x-1 transition-all uppercase tracking-wide z-10 ${A==="recipes"?"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[c.jsx(Ni,{size:14,className:"flex-shrink-0"})," ",c.jsx("span",{className:"truncate",children:"Rezepte"})]}),c.jsxs("button",{onClick:()=>F("household"),className:`flex-1 py-2 rounded-lg text-[10px] sm:text-xs font-bold flex items-center justify-center space-x-1 transition-all uppercase tracking-wide z-10 ${A==="household"?"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[c.jsx(Ed,{size:14,className:"flex-shrink-0"})," ",c.jsx("span",{className:"truncate",children:"Haushalt"})]}),c.jsxs("button",{onClick:()=>F("personal"),className:`flex-1 py-2 rounded-lg text-[10px] sm:text-xs font-bold flex items-center justify-center space-x-1 transition-all uppercase tracking-wide z-10 ${A==="personal"?"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[c.jsx(f0,{size:14,className:"flex-shrink-0"})," ",c.jsx("span",{className:"truncate",children:"Privat"})]})]})}),c.jsxs("div",{className:"p-4 pb-24",children:[pn&&c.jsx("div",{className:"mb-6 bg-white dark:bg-gray-800 p-3 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 animate-slide-in",children:c.jsxs("form",{onSubmit:St,children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-gray-700 rounded-xl px-2.5 py-2 flex items-center min-w-0",children:[c.jsx("input",{type:"text",value:q,onChange:ne=>Y(ne.target.value),placeholder:A==="shopping"?"Was fehlt?":"Neue Aufgabe...",className:"flex-1 bg-transparent border-none focus:ring-0 text-gray-800 dark:text-white placeholder-gray-400 text-sm outline-none min-w-0"}),q.trim()&&c.jsx("button",{type:"button",onClick:()=>Y(""),className:"text-gray-400 flex-shrink-0",children:c.jsx(wt,{size:16})})]}),c.jsx("button",{type:"button",onClick:()=>Le(!Je),className:`p-2.5 rounded-xl transition-colors flex-shrink-0 ${Je?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}`,children:A==="shopping"?c.jsx(r_,{size:20}):Je?c.jsx(Ip,{size:20}):c.jsx(Nw,{size:20})}),c.jsx("button",{type:"submit",disabled:!q.trim(),className:`p-2.5 rounded-xl text-white transition shadow-sm flex-shrink-0 ${q.trim()?A==="shopping"?"bg-orange-500":A==="household"?"bg-blue-500":"bg-purple-500":"bg-gray-200 dark:bg-gray-800 text-gray-400 dark:text-gray-600 cursor-not-allowed shadow-none"}`,children:c.jsx(Po,{size:20})})]}),Je&&c.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-700 space-y-3 animate-fade-in",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(_w,{size:16,className:"text-gray-400"}),c.jsx("input",{type:"text",value:B,onChange:ne=>ue(ne.target.value),placeholder:A==="shopping"?"Notiz (z.B. Marke, Menge)...":"Notiz hinzufgen (optional)...",className:"flex-1 bg-gray-50 dark:bg-gray-700/50 rounded-lg px-3 py-1.5 text-sm text-gray-800 dark:text-white focus:outline-none",autoFocus:!0})]}),A==="shopping"&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase ml-1",children:"Kategorie"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:Wa.map(ne=>c.jsxs("button",{type:"button",onClick:()=>Pe(ne.id),className:`flex items-center space-x-1.5 px-3 py-1.5 rounded-lg text-[10px] font-bold border transition ${_e===ne.id?`${ne.color} border-transparent ring-2 ring-offset-1 ring-gray-200 dark:ring-gray-700`:"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-500 dark:text-gray-400"}`,children:[c.jsx(ne.icon,{size:12}),c.jsx("span",{children:ne.label})]},ne.id))})]}),A!=="shopping"&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Rw,{size:16,className:"text-gray-400"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{type:"button",onClick:()=>me("high"),className:`px-3 py-1 rounded-full text-xs font-bold border transition ${Z==="high"?"bg-red-100 text-red-600 border-red-200":"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-500"}`,children:"Hoch"}),c.jsx("button",{type:"button",onClick:()=>me("medium"),className:`px-3 py-1 rounded-full text-xs font-bold border transition ${Z==="medium"?"bg-gray-200 text-gray-700 border-gray-300":"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-500"}`,children:"Mittel"}),c.jsx("button",{type:"button",onClick:()=>me("low"),className:`px-3 py-1 rounded-full text-xs font-bold border transition ${Z==="low"?"bg-blue-100 text-blue-600 border-blue-200":"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-500"}`,children:"Niedrig"})]})]}),A==="household"&&c.jsx("div",{className:"flex space-x-2 pt-1 overflow-x-auto px-1",children:i.length>0?i.map(ne=>c.jsxs("button",{type:"button",onClick:()=>$e(ne.id),className:`flex items-center space-x-1 px-2 py-1 rounded-full text-[10px] font-bold border transition ${we===ne.id?`${ne.color} border-transparent ring-1 ring-offset-1 ring-gray-300 dark:ring-gray-600`:"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300"}`,children:[c.jsx("img",{src:ne.avatar,className:"w-4 h-4 rounded-full"}),c.jsx("span",{children:ne.name})]},ne.id)):c.jsx("span",{className:"text-xs text-gray-400",children:"Keine Familienmitglieder verfgbar"})})]})]})}),!pn&&A!=="recipes"&&c.jsxs("div",{className:"mb-6 p-4 rounded-xl bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 flex items-center justify-center text-gray-400 text-sm",children:[c.jsx(o0,{size:16,className:"mr-2"}),"Nur Eltern knnen Hausarbeiten hinzufgen."]}),c.jsxs("div",{className:"animate-fade-in",children:[A==="shopping"&&hn(),A==="recipes"&&zn(),A==="household"&&Vt(e,"household"),A==="personal"&&Vt(n,"personal")]})]}),Q&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-sm rounded-2xl shadow-2xl p-6 relative",children:[c.jsx("button",{onClick:()=>de(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:c.jsx(wt,{size:24})}),c.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:oe?"Rezept bearbeiten":"Neues Rezept"}),c.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[c.jsx("input",{type:"text",placeholder:"Rezept Name",value:He,onChange:ne=>qe(ne.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl px-4 py-3 text-sm outline-none dark:text-white",required:!0}),c.jsx("input",{type:"text",placeholder:"Kurze Beschreibung",value:mt,onChange:ne=>yt(ne.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl px-4 py-3 text-sm outline-none dark:text-white"}),c.jsx("textarea",{placeholder:"Zutaten (untereinander)...",value:kt,onChange:ne=>he(ne.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl px-4 py-3 text-sm outline-none resize-none dark:text-white h-24",required:!0}),c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-3 border border-dashed border-gray-300 dark:border-gray-600",children:[c.jsx("input",{type:"file",ref:J,onChange:K,accept:"image/*",className:"hidden"}),ce?c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:ce,className:"w-full h-32 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:()=>Ue(""),className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full",children:c.jsx(wt,{size:12})})]}):c.jsxs("button",{type:"button",onClick:()=>{var ne;return(ne=J.current)==null?void 0:ne.click()},className:"w-full text-gray-400 py-4 flex flex-col items-center",children:[c.jsx(Ao,{size:24,className:"mb-1"}),c.jsx("span",{className:"text-xs",children:"Bild hinzufgen (optional)"})]})]}),c.jsx("button",{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3.5 rounded-xl shadow-lg active:scale-95 transition",children:oe?"Speichern":"Erstellen"})]})]})}),Ae&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-lg rounded-2xl shadow-2xl relative max-h-[85vh] flex flex-col",children:[Ae.image&&c.jsxs("div",{className:"h-48 w-full overflow-hidden rounded-t-2xl relative",children:[c.jsx("img",{src:Ae.image,className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),c.jsx("button",{onClick:()=>Xe(null),className:"absolute top-4 right-4 bg-black/30 hover:bg-black/50 text-white p-2 rounded-full transition backdrop-blur-sm",children:c.jsx(wt,{size:20})}),c.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:c.jsx("h2",{className:"text-2xl font-bold text-white leading-tight shadow-black drop-shadow-md",children:Ae.name})})]}),!Ae.image&&c.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:Ae.name}),c.jsx("button",{onClick:()=>Xe(null),className:"text-gray-400 hover:text-gray-600",children:c.jsx(wt,{size:24})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:[c.jsx("div",{className:"flex justify-end mb-2",children:c.jsxs("button",{onClick:()=>ve(Ae),className:"flex items-center text-xs text-blue-600 font-bold hover:bg-blue-50 px-2 py-1 rounded-lg transition",children:[c.jsx(l0,{size:12,className:"mr-1"})," Bearbeiten"]})}),Ae.description&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Beschreibung"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm leading-relaxed",children:Ae.description})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:["Zutaten (",Ae.ingredients.length,")"]}),c.jsx("div",{className:"space-y-2",children:Ae.ingredients.map((ne,Ke)=>c.jsxs("div",{onClick:()=>ot(ne),className:"flex items-center p-3 rounded-xl bg-gray-50 dark:bg-gray-700/50 border border-gray-100 dark:border-gray-700 cursor-pointer active:scale-[0.99] transition",children:[c.jsx("div",{className:`w-5 h-5 rounded border mr-3 flex items-center justify-center transition-colors ${nt.includes(ne)?"bg-emerald-500 border-emerald-500 text-white":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-transparent"}`,children:c.jsx(kd,{size:14,strokeWidth:3})}),c.jsx("span",{className:`text-sm ${nt.includes(ne)?"text-gray-800 dark:text-white font-medium":"text-gray-500 dark:text-gray-400"}`,children:ne})]},Ke))})]})]}),c.jsxs("div",{className:"p-4 border-t border-gray-100 dark:border-gray-700 flex gap-3 bg-gray-50/50 dark:bg-gray-800/50 rounded-b-2xl",children:[c.jsxs("button",{onClick:()=>At(Ae),className:"flex-1 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-bold py-3 rounded-xl shadow-sm border border-gray-200 dark:border-gray-600 flex items-center justify-center space-x-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-600 transition",children:[c.jsx(ul,{size:18})," ",c.jsx("span",{children:"Planen"})]}),c.jsxs("button",{onClick:Et,disabled:nt.length===0,className:"flex-[2] bg-emerald-600 text-white font-bold py-3 rounded-xl shadow-lg flex items-center justify-center space-x-2 text-sm hover:bg-emerald-700 transition disabled:opacity-50 disabled:shadow-none",children:[c.jsx(i0,{size:18}),c.jsxs("span",{children:[nt.length===Ae.ingredients.length?"Alles":`${nt.length} Zutaten`," auf Liste"]})]})]})]})})]})},HC=({plan:t,requests:e,family:n,currentUser:r,onUpdatePlan:i,onAddRequest:a,onDeleteRequest:l,onAddIngredientsToShopping:f,onProfileClick:p,recipes:g=[],onAddRecipe:y,onPlanGenerated:x})=>{const w=r.role==="child",[b,S]=j.useState("plan"),[T,E]=j.useState(!1),[N,U]=j.useState(""),[A,F]=j.useState(null),[q,Y]=j.useState(""),[B,ue]=j.useState(""),[Z,me]=j.useState("Restaurants in der Nhe"),[_e,Pe]=j.useState(null),[we,$e]=j.useState(!1),[Je,Le]=j.useState(null),[Te,J]=j.useState(null),[W,G]=j.useState(!1),[I,z]=j.useState([]),[pe,$]=j.useState([]),[Q,de]=j.useState(!1),[oe,Ie]=j.useState(null);j.useEffect(()=>{(async()=>{try{const ve=await Ml.getCurrentPosition({enableHighAccuracy:!0,timeout:8e3,maximumAge:0});Le({lat:ve.coords.latitude,lng:ve.coords.longitude})}catch(ve){console.log("Capacitor GPS error in Meals:",ve),navigator.geolocation&&navigator.geolocation.getCurrentPosition(ge=>{ge&&ge.coords&&Le({lat:ge.coords.latitude,lng:ge.coords.longitude})},()=>console.log("Standard Geo failed too"),{enableHighAccuracy:!0,timeout:8e3})}})()},[]);const qe=(()=>{const K=[],ve=new Date,ge=ve.getDay(),ft=ge===0?6:ge-1,Ze=new Date(ve);Ze.setDate(ve.getDate()-ft);for(let ot=0;ot<7;ot++){const Et=new Date(Ze);Et.setDate(Ze.getDate()+ot),K.push({dateObj:Et,dayName:Et.toLocaleDateString("de-DE",{weekday:"long"}),dateStr:Et.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit"}),isToday:Et.toDateString()===ve.toDateString()})}return K})(),mt=async()=>{E(!0);const K=await $C(N);if(K&&K.length>0){const ve=K.slice(0,7).map((ge,ft)=>ft<qe.length?{...ge,day:qe[ft].dayName}:ge);i(ve),x&&x()}E(!1)},yt=K=>{K.preventDefault(),B.trim()&&(a(B.trim()),ue(""))},kt=async K=>{if(K.preventDefault(),!Z.trim())return;if(!Je){alert("Standort noch nicht ermittelt. Bitte warten.");return}$e(!0);const ve=await cy(Z,Je.lat,Je.lng);Pe(ve),$e(!1)},he=K=>{J(K)},ce=K=>{const ve=encodeURIComponent(K);window.open(`https://www.google.com/maps/dir/?api=1&destination=${ve}`,"_blank")},Ue=(K,ve,ge)=>{const ft=t.find(ot=>ot.day===K);let Ze=[...t];if(ft)Ze=Ze.map(ot=>ot.day===K?{...ot,[ve]:ge}:ot);else{const ot={id:Date.now().toString()+Math.random(),day:K,mealName:ve==="mealName"?ge:"",breakfast:ve==="breakfast"?ge:"",lunch:ve==="lunch"?ge:"",ingredients:ve==="ingredients"?ge:[],recipeHint:"Manuell hinzugefgt",instructions:ve==="instructions"?ge:""};Ze.push(ot)}i(Ze)},Ae=(K,ve)=>{F(K),Y(ve.join(", "))},Xe=K=>{const ve=q.split(",").map(ge=>ge.trim()).filter(ge=>ge.length>0);Ue(K,"ingredients",ve),F(null)},nt=K=>{A&&(Ue(A,"mealName",K.name),Ue(A,"ingredients",K.ingredients),K.description&&Ue(A,"instructions",K.description),Y(K.ingredients.join(", ")),de(!1))},dt=K=>{!y||!K.mealName||(y({id:Date.now().toString(),name:K.mealName,ingredients:K.ingredients,description:K.instructions||`Aus Wochenplan (${K.day})`,image:void 0}),alert(`"${K.mealName}" wurde gespeichert!`))},At=K=>{z(K),$([...K]),G(!0)},St=K=>{pe.includes(K)?$(pe.filter(ve=>ve!==K)):$([...pe,K])},Ft=()=>{f&&pe.length>0&&(f(pe),G(!1))},Qt=()=>c.jsxs("div",{className:"space-y-6 animate-fade-in",children:[!w&&c.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl p-6 text-white shadow-lg relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-32 h-32 bg-white/10 rounded-full blur-2xl"}),c.jsxs("div",{className:"relative z-10",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[c.jsx(Cw,{size:28}),c.jsx("h2",{className:"text-xl font-bold",children:"Wochenplaner"})]}),c.jsx("p",{className:"text-emerald-50 text-sm mb-4",children:"Lass dir von der KI einen Plan fr die aktuelle Woche erstellen (Montag bis Sonntag)."}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("input",{type:"text",value:N,onChange:K=>U(K.target.value),placeholder:"z.B. Vegetarisch",className:"w-full rounded-lg px-4 py-2 text-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-300 shadow-sm"}),c.jsx("div",{className:"flex gap-2",children:c.jsxs("button",{onClick:mt,disabled:T,className:"w-full bg-white text-emerald-600 font-bold py-2 rounded-lg shadow-sm flex items-center justify-center space-x-2 hover:bg-gray-50 active:scale-[0.98] transition disabled:opacity-70",children:[T?c.jsx(qw,{className:"animate-spin",size:18}):c.jsx(Qw,{size:18}),c.jsx("span",{children:T?"Verarbeite...":"Plan erstellen"})]})})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:[qe[0].dateStr," bis ",qe[6].dateStr," (Diese Woche)"]}),qe.map((K,ve)=>{const ge=t.find(Ze=>Ze.day===K.dayName),ft=A===K.dayName;return c.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-sm border overflow-hidden relative transition-all ${K.isToday?"border-emerald-400 dark:border-emerald-500 ring-1 ring-emerald-400 dark:ring-emerald-500":"border-gray-100 dark:border-gray-700"}`,children:[c.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/30 px-4 py-2 border-b border-emerald-100 dark:border-emerald-800 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-bold text-emerald-800 dark:text-emerald-300",children:K.dayName}),K.isToday&&c.jsx("span",{className:"bg-emerald-500 text-white text-[10px] px-1.5 py-0.5 rounded font-bold uppercase",children:"Heute"})]}),c.jsx("span",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:K.dateStr})]}),c.jsxs("div",{className:"p-4 relative",children:[!w&&c.jsx("button",{onClick:()=>ft?F(null):Ae(K.dayName,(ge==null?void 0:ge.ingredients)||[]),className:"absolute top-2 right-2 p-2 text-gray-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",children:ft?c.jsx(wt,{size:18}):c.jsx(l0,{size:18})}),ft?c.jsxs("div",{className:"space-y-3 animate-fade-in",children:[g.length>0&&c.jsxs("button",{onClick:()=>de(!0),className:"w-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 p-2.5 rounded-lg flex items-center justify-center text-xs font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/40 transition",children:[c.jsx(Ni,{size:14,className:"mr-2"})," Aus Rezeptbuch whlen"]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:[c.jsx($c,{size:10,className:"mr-1"})," Frhstck"]}),c.jsx("input",{type:"text",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-2 text-sm outline-none focus:ring-2 focus:ring-emerald-400",value:(ge==null?void 0:ge.breakfast)||"",onChange:Ze=>Ue(K.dayName,"breakfast",Ze.target.value),placeholder:"..."})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:[c.jsx($n,{size:10,className:"mr-1"})," Mittag"]}),c.jsx("input",{type:"text",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-2 text-sm outline-none focus:ring-2 focus:ring-emerald-400",value:(ge==null?void 0:ge.lunch)||"",onChange:Ze=>Ue(K.dayName,"lunch",Ze.target.value),placeholder:"..."})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:[c.jsx(Mi,{size:10,className:"mr-1"})," Abend (Gericht)"]}),c.jsx("input",{type:"text",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-2 text-sm outline-none focus:ring-2 focus:ring-emerald-400 font-medium",value:(ge==null?void 0:ge.mealName)||"",onChange:Ze=>Ue(K.dayName,"mealName",Ze.target.value),placeholder:"..."})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:[c.jsx(zc,{size:10,className:"mr-1"})," Zubereitung"]}),c.jsx("textarea",{className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-2 text-sm outline-none focus:ring-2 focus:ring-emerald-400",rows:3,value:(ge==null?void 0:ge.instructions)||"",onChange:Ze=>Ue(K.dayName,"instructions",Ze.target.value),placeholder:"Schritt 1: ..."})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:[c.jsx(No,{size:10,className:"mr-1"})," Zutaten (Komma getrennt)"]}),c.jsx("textarea",{className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-2 text-sm outline-none focus:ring-2 focus:ring-emerald-400",rows:2,value:q,onChange:Ze=>Y(Ze.target.value),placeholder:"Nudeln, Tomatensoe..."})]}),c.jsx("div",{className:"flex justify-end pt-2",children:c.jsxs("button",{onClick:()=>Xe(K.dayName),className:"bg-emerald-500 text-white px-3 py-1.5 rounded-lg text-xs font-bold flex items-center hover:bg-emerald-600 transition",children:[c.jsx(c0,{size:12,className:"mr-1"})," Fertig"]})})]}):c.jsx("div",{children:ge&&(ge.breakfast||ge.lunch||ge.mealName)?c.jsxs("div",{className:"space-y-3",children:[ge.breakfast&&c.jsxs("div",{className:"flex items-start text-sm",children:[c.jsx($c,{size:14,className:"mt-0.5 mr-2 text-orange-400"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:ge.breakfast})]}),ge.lunch&&c.jsxs("div",{className:"flex items-start text-sm",children:[c.jsx($n,{size:14,className:"mt-0.5 mr-2 text-yellow-500"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:ge.lunch})]}),ge.mealName&&c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start text-sm font-medium",children:[c.jsx(Mi,{size:14,className:"mt-0.5 mr-2 text-indigo-500"}),c.jsx("span",{className:"text-gray-900 dark:text-white",children:ge.mealName})]}),ge.ingredients.length>0&&c.jsxs("div",{className:"ml-6 mt-1.5 flex flex-wrap gap-1",children:[ge.ingredients.map((Ze,ot)=>c.jsx("span",{className:"text-[10px] bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 px-1.5 py-0.5 rounded",children:Ze},ot)),f&&!w&&c.jsxs("button",{onClick:()=>At(ge.ingredients),className:"text-[10px] bg-emerald-50 text-emerald-600 px-1.5 py-0.5 rounded font-bold hover:bg-emerald-100 flex items-center ml-1",children:[c.jsx(Po,{size:8,className:"mr-0.5"})," Liste"]})]}),c.jsxs("div",{className:"flex gap-2 mt-3 ml-6",children:[ge.instructions&&c.jsxs("button",{onClick:()=>Ie(ge),className:"text-[10px] bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 px-2 py-1 rounded font-bold hover:bg-blue-100 dark:hover:bg-blue-900/30 flex items-center transition",children:[c.jsx(Ni,{size:12,className:"mr-1"})," Zubereitung"]}),!w&&c.jsxs("button",{onClick:()=>dt(ge),className:"text-[10px] text-gray-400 hover:text-emerald-500 flex items-center transition px-1 py-1",children:[c.jsx(Uw,{size:12,className:"mr-1"})," Merken"]})]})]})]}):c.jsx("div",{className:"text-center py-2",children:c.jsx("p",{className:"text-sm text-gray-400 italic",children:"Nichts geplant"})})})]})]},ve)})]}),oe&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-lg rounded-2xl shadow-2xl p-6 relative max-h-[85vh] flex flex-col",children:[c.jsx("button",{onClick:()=>Ie(null),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:c.jsx(wt,{size:20})}),c.jsxs("div",{className:"mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white leading-tight pr-8",children:oe.mealName}),c.jsx("p",{className:"text-emerald-500 text-sm font-medium mt-1",children:oe.day})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 flex items-center",children:[c.jsx(zc,{size:12,className:"mr-1.5"})," Zubereitung"]}),c.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm leading-relaxed whitespace-pre-wrap",children:oe.instructions||"Keine Anleitung verfgbar."})]}),c.jsxs("div",{children:[c.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 flex items-center",children:[c.jsx(No,{size:12,className:"mr-1.5"})," Zutaten"]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:oe.ingredients.map((K,ve)=>c.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded-lg text-xs",children:K},ve))})]})]})]})}),W&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-sm rounded-2xl shadow-2xl p-6 relative",children:[c.jsx("button",{onClick:()=>G(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:c.jsx(wt,{size:20})}),c.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"Zutaten whlen"}),c.jsx("div",{className:"space-y-2 mb-6 max-h-60 overflow-y-auto custom-scrollbar",children:I.map((K,ve)=>c.jsxs("div",{onClick:()=>St(K),className:"flex items-center p-3 rounded-xl bg-gray-50 dark:bg-gray-700/50 border border-gray-100 dark:border-gray-700 cursor-pointer active:scale-[0.99] transition",children:[c.jsx("div",{className:`w-5 h-5 rounded border mr-3 flex items-center justify-center transition-colors ${pe.includes(K)?"bg-emerald-500 border-emerald-500 text-white":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-transparent"}`,children:c.jsx(kd,{size:14,strokeWidth:3})}),c.jsx("span",{className:`text-sm ${pe.includes(K)?"text-gray-800 dark:text-white font-medium":"text-gray-500 dark:text-gray-400"}`,children:K})]},ve))}),c.jsxs("button",{onClick:Ft,disabled:pe.length===0,className:"w-full bg-emerald-600 text-white font-bold py-3 rounded-xl shadow-lg flex items-center justify-center space-x-2 text-sm hover:bg-emerald-700 transition disabled:opacity-50",children:[c.jsx(i0,{size:18})," ",c.jsxs("span",{children:[pe.length," Zutaten auf Liste"]})]})]})}),Q&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-lg rounded-2xl shadow-2xl p-6 relative max-h-[85vh] flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Gericht whlen"}),c.jsx("button",{onClick:()=>de(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx(wt,{size:20})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar grid grid-cols-2 gap-3 pb-4",children:[g.map(K=>c.jsxs("div",{onClick:()=>nt(K),className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl overflow-hidden cursor-pointer hover:ring-2 hover:ring-emerald-500 transition relative group",children:[K.image?c.jsx("div",{className:"h-24 w-full",children:c.jsx("img",{src:K.image,className:"w-full h-full object-cover"})}):c.jsx("div",{className:"h-24 w-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-300",children:c.jsx(Ni,{size:24})}),c.jsxs("div",{className:"p-3",children:[c.jsx("h4",{className:"font-bold text-xs text-gray-800 dark:text-white line-clamp-1",children:K.name}),c.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1",children:[K.ingredients.length," Zutaten"]})]})]},K.id)),g.length===0&&c.jsx("div",{className:"col-span-2 text-center py-10 text-gray-400",children:"Keine Rezepte gespeichert."})]})]})})]});return c.jsxs(c.Fragment,{children:[c.jsx(Lo,{title:"Essen",currentUser:r,onProfileClick:p}),c.jsx("div",{className:"px-4 mt-2 mb-4",children:c.jsxs("div",{className:"flex p-1 bg-gray-200 dark:bg-gray-800 rounded-xl w-full relative",children:[c.jsxs("button",{onClick:()=>S("plan"),className:`flex-1 py-2 rounded-lg text-sm font-medium flex items-center justify-center space-x-1 transition-all z-10 ${b==="plan"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[c.jsx(No,{size:16})," ",c.jsx("span",{className:"hidden sm:inline",children:"Planer"})," ",c.jsx("span",{className:"sm:hidden",children:"Planer"})]}),c.jsxs("button",{onClick:()=>S("wishes"),className:`flex-1 py-2 rounded-lg text-sm font-medium flex items-center justify-center space-x-1 transition-all z-10 ${b==="wishes"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[c.jsx(Hw,{size:16})," ",c.jsx("span",{className:"hidden sm:inline",children:"Wnsche"})," ",c.jsx("span",{className:"sm:hidden",children:"Wnsche"})]}),c.jsxs("button",{onClick:()=>S("places"),className:`flex-1 py-2 rounded-lg text-sm font-medium flex items-center justify-center space-x-1 transition-all z-10 ${b==="places"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[c.jsx(e_,{size:16})," ",c.jsx("span",{className:"hidden sm:inline",children:"Orte"})," ",c.jsx("span",{className:"sm:hidden",children:"Orte"})]})]})}),c.jsxs("div",{className:"p-4 pb-24",children:[b==="plan"&&Qt(),b==="wishes"&&c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-6 rounded-2xl border border-orange-100 dark:border-orange-900/30 mb-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-orange-900 dark:text-orange-300 mb-2",children:["Worauf hast du Hunger, ",r.name,"?"]}),c.jsxs("form",{onSubmit:yt,className:"flex gap-2",children:[c.jsx("input",{type:"text",value:B,onChange:K=>ue(K.target.value),placeholder:"z.B. Pfannkuchen",className:"flex-1 rounded-xl border border-orange-200 dark:border-orange-800 bg-white dark:bg-gray-800 dark:text-white p-3 text-sm focus:outline-none focus:ring-2 focus:ring-orange-300"}),c.jsx("button",{type:"submit",className:"bg-orange-500 text-white p-3 rounded-xl hover:bg-orange-600 shadow-md",children:c.jsx(Po,{size:20})})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"font-bold text-gray-700 dark:text-gray-300 ml-1",children:"Wunschliste der Familie"}),e.length===0?c.jsx("p",{className:"text-gray-400 text-center py-8 italic",children:"Noch keine Wnsche offen."}):e.map(K=>{const ve=n.find(ge=>ge.id===K.requestedBy);return c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[ve&&c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:ve.avatar,className:"w-10 h-10 rounded-full border border-gray-100 dark:border-gray-700"}),c.jsx("div",{className:`absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white dark:border-gray-800 ${ve.color.split(" ")[0].replace("bg-","bg-")}`})]}),c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-gray-800 dark:text-white",children:K.dishName}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["gewnscht von ",(ve==null?void 0:ve.name)||"Unbekannt"]})]})]}),c.jsx("button",{onClick:()=>l(K.id),className:"text-gray-300 hover:text-red-400 p-2",children:c.jsx(Tr,{size:18})})]},K.id)})]})]}),b==="places"&&c.jsxs("div",{className:"space-y-6 animate-fade-in",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Gs,{className:"absolute left-3 top-3.5 text-gray-400",size:20}),c.jsxs("form",{onSubmit:kt,children:[c.jsx("input",{type:"text",value:Z,onChange:K=>me(K.target.value),placeholder:"Suche Orte...",className:"w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl py-3 pl-10 pr-12 shadow-sm focus:ring-2 focus:ring-emerald-500 focus:outline-none text-gray-800 dark:text-white"}),c.jsx("button",{type:"submit",className:"absolute right-2 top-2 bg-emerald-600 text-white p-1.5 rounded-lg hover:bg-emerald-700 disabled:opacity-50",disabled:we||!Je,children:we?c.jsx(Cr,{className:"animate-spin",size:20}):c.jsx(Gs,{size:20})})]})]}),c.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:["Restaurants","Supermarkt","Bckerei","Eisdiele"].map(K=>c.jsx("button",{onClick:()=>{me(K)},className:"px-4 py-2 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-full text-xs font-medium whitespace-nowrap hover:bg-emerald-100 dark:hover:bg-emerald-900/30 hover:text-emerald-700 dark:hover:text-emerald-400 transition",children:K},K))}),!Je&&c.jsx("div",{className:"text-center text-xs text-orange-500 bg-orange-50 dark:bg-orange-900/20 p-2 rounded-lg",children:"Warte auf GPS-Standort..."}),_e&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-xl text-sm text-emerald-900 dark:text-emerald-200 border border-emerald-100 dark:border-emerald-800/50",children:_e.text}),c.jsx("div",{className:"grid gap-4",children:_e.places.map((K,ve)=>c.jsxs("div",{onClick:()=>he(K),className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4 flex flex-col justify-between hover:shadow-md transition cursor-pointer active:scale-[0.98]",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-lg",children:K.title}),c.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:K.address})]}),K.rating&&c.jsxs("span",{className:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 text-xs px-2 py-1 rounded font-bold",children:[" ",K.rating]})]}),c.jsxs("div",{className:"mt-4 flex items-center text-blue-600 dark:text-blue-400 text-xs font-bold",children:["Details & Route ",c.jsx(Sd,{size:12,className:"ml-1"})]})]},ve))})]})]})]}),Te&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-lg rounded-2xl shadow-2xl p-6 relative max-h-[85vh] flex flex-col",children:[c.jsx("button",{onClick:()=>J(null),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:c.jsx(wt,{size:24})}),c.jsxs("div",{className:"mb-4 pr-8",children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white leading-tight",children:Te.title}),Te.rating&&c.jsxs("div",{className:"flex items-center mt-2 text-yellow-500 font-bold",children:[c.jsx(qs,{size:16,className:"fill-current mr-1"}),Te.rating]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-6",children:[c.jsxs("div",{className:"flex items-start text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-xl",children:[c.jsx(ys,{size:18,className:"mr-2 mt-0.5 text-blue-500 flex-shrink-0"}),c.jsx("span",{className:"text-sm font-medium",children:Te.address||"Adresse nicht verfgbar"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"ber diesen Ort"}),c.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm leading-relaxed",children:Te.description})]}),Te.reviewsSummary&&c.jsxs("div",{children:[c.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 flex items-center",children:[c.jsx(Td,{size:12,className:"mr-1"})," Rezensionen (Zusammenfassung)"]}),c.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/10 p-4 rounded-xl border border-yellow-100 dark:border-yellow-800/30",children:c.jsxs("p",{className:"text-sm text-yellow-900 dark:text-yellow-200 italic leading-relaxed",children:['"',Te.reviewsSummary,'"']})})]})]}),c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-gray-700 flex flex-col gap-3",children:c.jsxs("button",{onClick:()=>Te.address&&ce(Te.address),className:"w-full bg-blue-600 text-white font-bold py-3.5 rounded-xl shadow-lg flex items-center justify-center space-x-2 active:scale-95 transition hover:bg-blue-700",children:[c.jsx(pl,{size:18}),c.jsx("span",{children:"Route starten (Google Maps)"})]})})]})})]})},GC=({onProfileClick:t})=>{const[e,n]=j.useState(""),[r,i]=j.useState(null),[a,l]=j.useState(!1),[f,p]=j.useState(null),[g,y]=j.useState(null);j.useEffect(()=>{(async()=>{try{const T=await Ml.getCurrentPosition({enableHighAccuracy:!0,timeout:8e3,maximumAge:0});p({lat:T.coords.latitude,lng:T.coords.longitude})}catch(T){console.log("Capacitor GPS error in Activities:",T),navigator.geolocation&&navigator.geolocation.getCurrentPosition(E=>p({lat:E.coords.latitude,lng:E.coords.longitude}),()=>console.log("Standard Geo failed too"),{enableHighAccuracy:!0,timeout:8e3})}})()},[]);const x=async S=>{if(S.preventDefault(),!e.trim())return;if(!f){alert("Bitte warte kurz, bis dein Standort ermittelt wurde (Alzey).");return}l(!0);const T=await cy(e,f.lat,f.lng);i(T),l(!1)},w=S=>{y(S)},b=S=>{const T=encodeURIComponent(S);window.open(`https://www.google.com/maps/dir/?api=1&destination=${T}`,"_blank")};return c.jsxs(c.Fragment,{children:[c.jsx(Lo,{title:"Orte & Aktivitten",onProfileClick:t}),c.jsxs("div",{className:"p-4 pb-24 space-y-6",children:[c.jsxs("form",{onSubmit:x,className:"relative",children:[c.jsx(Gs,{className:"absolute left-3 top-3.5 text-gray-400",size:20}),c.jsx("input",{type:"text",value:e,onChange:S=>n(S.target.value),placeholder:"Was wollt ihr unternehmen?",className:"w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl py-3 pl-10 pr-4 shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none text-gray-800 dark:text-white"}),c.jsx("button",{type:"submit",disabled:a||!f,className:"absolute right-2 top-2 bg-blue-600 text-white p-1.5 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:a?c.jsx(Cr,{className:"animate-spin",size:20}):c.jsx(pl,{size:20})})]}),c.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[c.jsx(ys,{size:12,className:"mr-1"}),f?`Bereit zur Suche bei: ${f.lat.toFixed(3)}, ${f.lng.toFixed(3)}`:"Suche Standort..."]}),r&&c.jsxs("div",{className:"space-y-6 animate-fade-in",children:[c.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl text-sm text-blue-900 dark:text-blue-200 leading-relaxed border border-blue-100 dark:border-blue-800",children:r.text}),c.jsx("h3",{className:"font-bold text-gray-800 dark:text-white",children:"Gefundene Orte"}),c.jsx("div",{className:"grid gap-4",children:r.places.length>0?r.places.map((S,T)=>c.jsxs("div",{onClick:()=>w(S),className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4 flex flex-col justify-between hover:shadow-md transition cursor-pointer active:scale-[0.98]",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-lg",children:S.title}),S.rating&&c.jsxs("span",{className:"inline-block bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 text-xs px-2 py-0.5 rounded font-bold whitespace-nowrap ml-2",children:[" ",S.rating]})]}),c.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2 line-clamp-2",children:S.description}),S.address&&c.jsxs("p",{className:"text-gray-400 dark:text-gray-500 text-xs flex items-center",children:[c.jsx(ys,{size:10,className:"mr-1"})," ",S.address]})]}),c.jsxs("div",{className:"mt-4 flex items-center text-blue-600 dark:text-blue-400 text-xs font-bold",children:["Details & Route ",c.jsx(Sd,{size:12,className:"ml-1"})]})]},T)):c.jsx("p",{className:"text-gray-400 text-sm italic",children:"Keine Orte gefunden."})})]}),!r&&!a&&c.jsxs("div",{className:"mt-10 text-center opacity-40",children:[c.jsx(ys,{className:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-2"}),c.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Suche nach Spielpltzen, Restaurants oder Museen in deiner Nhe."})]})]}),g&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-lg rounded-2xl shadow-2xl p-6 relative max-h-[85vh] flex flex-col",children:[c.jsx("button",{onClick:()=>y(null),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:c.jsx(wt,{size:24})}),c.jsxs("div",{className:"mb-4 pr-8",children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white leading-tight",children:g.title}),g.rating&&c.jsxs("div",{className:"flex items-center mt-2 text-yellow-500 font-bold",children:[c.jsx(qs,{size:16,className:"fill-current mr-1"}),g.rating]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-6",children:[c.jsxs("div",{className:"flex items-start text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-xl",children:[c.jsx(ys,{size:18,className:"mr-2 mt-0.5 text-blue-500 flex-shrink-0"}),c.jsx("span",{className:"text-sm font-medium",children:g.address||"Adresse nicht verfgbar"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"ber diesen Ort"}),c.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm leading-relaxed",children:g.description})]}),g.reviewsSummary&&c.jsxs("div",{children:[c.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 flex items-center",children:[c.jsx(Td,{size:12,className:"mr-1"})," Rezensionen (Zusammenfassung)"]}),c.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/10 p-4 rounded-xl border border-yellow-100 dark:border-yellow-800/30",children:c.jsxs("p",{className:"text-sm text-yellow-900 dark:text-yellow-200 italic leading-relaxed",children:['"',g.reviewsSummary,'"']})})]})]}),c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-gray-700 flex flex-col gap-3",children:c.jsxs("button",{onClick:()=>g.address&&b(g.address),className:"w-full bg-blue-600 text-white font-bold py-3.5 rounded-xl shadow-lg flex items-center justify-center space-x-2 active:scale-95 transition hover:bg-blue-700",children:[c.jsx(pl,{size:18}),c.jsx("span",{children:"Route starten (Google Maps)"})]})})]})})]})},qC="https://hjkmfodzhradtkeiyele.supabase.co/storage/v1/object/public/updates/FamilienHub.apk",WC="https://superyoshi6.github.io/FamilienHub",_m="1.1.1",JC=[{val:"bg-red-100 text-red-700",hex:"#fee2e2"},{val:"bg-orange-100 text-orange-700",hex:"#ffedd5"},{val:"bg-amber-100 text-amber-700",hex:"#fef3c7"},{val:"bg-yellow-100 text-yellow-700",hex:"#fef9c3"},{val:"bg-lime-100 text-lime-700",hex:"#ecfccb"},{val:"bg-green-100 text-green-700",hex:"#dcfce7"},{val:"bg-emerald-100 text-emerald-700",hex:"#d1fae5"},{val:"bg-teal-100 text-teal-700",hex:"#ccfbf1"},{val:"bg-cyan-100 text-cyan-700",hex:"#cffafe"},{val:"bg-sky-100 text-sky-700",hex:"#e0f2fe"},{val:"bg-blue-100 text-blue-700",hex:"#dbeafe"},{val:"bg-indigo-100 text-indigo-700",hex:"#e0e7ff"},{val:"bg-violet-100 text-violet-700",hex:"#ede9fe"},{val:"bg-purple-100 text-purple-700",hex:"#f3e8ff"},{val:"bg-fuchsia-100 text-fuchsia-700",hex:"#fae8ff"},{val:"bg-pink-100 text-pink-700",hex:"#fce7f3"},{val:"bg-rose-100 text-rose-700",hex:"#ffe4e6"},{val:"bg-slate-100 text-slate-700",hex:"#f1f5f9"}],KC=({currentUser:t,onUpdateUser:e,onUpdateFamilyMember:n,onLogout:r,onClose:i,darkMode:a,onToggleDarkMode:l,liquidGlass:f,onToggleLiquidGlass:p,christmasMode:g,onToggleChristmasMode:y,lang:x,setLang:w,family:b,onSendFeedback:S,allFeedbacks:T,onMarkFeedbackRead:E,onAddNews:N,onAddUser:U,onDeleteUser:A,news:F=[],onDeleteNews:q,systemStats:Y,backupData:B,onResetPassword:ue,onMarkNewsRead:Z})=>{const[me,_e]=j.useState(t.name),[Pe,we]=j.useState(t.avatar),[$e,Je]=j.useState(t.color),[Le,Te]=j.useState(!1),[J,W]=j.useState(!1),[G,I]=j.useState(""),[z,pe]=j.useState(""),$=j.useRef(null),Q=j.useRef(null),[de,oe]=j.useState("none"),[Ie,He]=j.useState(""),[qe,mt]=j.useState(0),[yt,kt]=j.useState(!1),[he,ce]=j.useState(""),[Ue,Ae]=j.useState(""),[Xe,nt]=j.useState(null),[dt,At]=j.useState(""),[St,Ft]=j.useState(null),[Qt,K]=j.useState(""),[ve,ge]=j.useState(""),[ft,Ze]=j.useState(!1),[ot,Et]=j.useState(!1),[_n,hn]=j.useState(""),[Vt,zn]=j.useState(""),[It,pn]=j.useState("parent"),[ne,Ke]=j.useState(!1),rt=t.role==="admin",ht=(T==null?void 0:T.filter(D=>!D.read))||[],Re=ht.length,je=(F==null?void 0:F.filter(D=>D.tag===`PRIVATE:${t.id}`).sort((D,fe)=>new Date(fe.createdAt).getTime()-new Date(D.createdAt).getTime()))||[],ut=f?"bg-white/95 dark:bg-slate-900/95 backdrop-blur-2xl border-white/40":"bg-white dark:bg-[#111827]",Bt=f?"border border-white/20":"border border-gray-200 dark:border-gray-800",Mn=f?"text-slate-800 dark:text-white bg-white/20 dark:bg-black/20 hover:bg-white/40 dark:hover:bg-black/40 p-1.5 rounded-full":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",gn=f?"text-slate-900 dark:text-white":"text-gray-900 dark:text-white",Nr=()=>{const D={name:me,avatar:Pe,color:$e};if(z.trim()){if(z.trim().length<4){alert("Das Passwort muss mindestens 4 Zeichen lang sein.");return}D.password=z.trim()}e(D),z.trim()&&pe(""),i&&i()},qr=async()=>{Te(!0),W(!1);const D=await wm();if(D){const fe=await Bs(D,300,.7);we(fe)}else{const fe=Math.floor(Math.random()*1e3);we(`https://picsum.photos/200/200?random=${fe}`)}Te(!1)},Xn=async D=>{var Ve;const fe=(Ve=D.target.files)==null?void 0:Ve[0];if(fe){Te(!0);const gt=new FileReader;gt.onloadend=async()=>{const Tt=gt.result,Qe=await Bs(Tt,400,.7);we(Qe),Te(!1)},gt.readAsDataURL(fe)}},Zn=()=>{G.trim()&&(we(G.trim()),W(!1),I(""))},er=D=>{nt(D),At(""),oe("reset-confirm")},Wr=D=>{Ft(D),K(D.name),ge(D.avatar),Et(!1),hn(""),oe("edit-user")},tr=async()=>{Ze(!0),Et(!1);const D=await wm();if(D){const fe=await Bs(D,300,.7);ge(fe)}else{const fe=Math.floor(Math.random()*1e3);ge(`https://picsum.photos/200/200?random=${fe}`)}Ze(!1)},gr=async D=>{var Ve;const fe=(Ve=D.target.files)==null?void 0:Ve[0];if(fe){Ze(!0);const gt=new FileReader;gt.onloadend=async()=>{const Tt=gt.result,Qe=await Bs(Tt,400,.7);ge(Qe),Ze(!1)},gt.readAsDataURL(fe)}},mr=()=>{_n.trim()&&(ge(_n.trim()),Et(!1),hn(""))},Ar=()=>{St&&n&&(n(St.id,{name:Qt,avatar:ve}),oe("none"),Ft(null))},xs=()=>{if(Ae(""),b&&b.length>1){const D=b.find(fe=>fe.id!==t.id);D&&ce(D.id)}oe("compose")},ws=()=>{if(!Ue.trim()||!N||!he)return;const D=`Nachricht von ${t.name}`,fe={id:Date.now().toString(),title:D,description:Ue,tag:`PRIVATE:${he}`,image:void 0,createdAt:new Date().toISOString(),authorId:t.id,readBy:[]};N(fe),oe("none"),Ae(""),alert("Nachricht gesendet!")},_s=()=>{if(Xe&&n&&dt.trim()){if(dt.trim().length<4){alert("Das Passwort muss mindestens 4 Zeichen lang sein.");return}n(Xe.id,{password:dt.trim()}),oe("none"),nt(null),At(""),alert("Passwort wurde gesetzt.")}},bn=async D=>{if(D.preventDefault(),!(!Vt.trim()||!U)){Ke(!0);try{await U(Vt,It),zn(""),pn("parent"),oe("none")}catch(fe){console.error("Add user error",fe),alert("Fehler beim Erstellen des Nutzers.")}finally{Ke(!1)}}},Ir=D=>{D.preventDefault(),S&&S({id:Date.now().toString(),userId:t.id,userName:t.name,text:Ie,rating:qe,createdAt:new Date().toISOString()}),kt(!0),setTimeout(()=>{kt(!1),He(""),mt(0),oe("none")},2e3)},re=()=>{if(oe("admin-feedback"),Re>0&&E){const D=ht.map(fe=>fe.id);E(D)}},Me=()=>{{const D=qC,fe=D.includes("?")?"&":"?",Ve=`${D}${fe}t=${Date.now()}`;window.open(Ve,"_blank")}};return c.jsxs("div",{className:"flex flex-col min-h-full",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-900 px-4 py-4 flex items-center shadow-sm sticky top-0 z-10 border-b border-gray-100 dark:border-gray-800",children:[c.jsx("button",{onClick:i,className:"mr-4 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 p-2 rounded-full transition",children:c.jsx(Fc,{size:24})}),c.jsx("span",{className:"font-bold text-xl text-gray-800 dark:text-white",children:Ye("settings.title",x)})]}),c.jsxs("div",{className:"flex-1 p-6 pb-32 space-y-6 max-w-md mx-auto w-full",children:[c.jsxs("section",{className:"space-y-6",children:[c.jsx("h2",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:Ye("settings.profile",x)}),c.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[c.jsx("div",{className:"relative group",children:c.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-white dark:border-gray-800 shadow-md relative bg-gray-200",children:Le?c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:c.jsx(Cr,{className:"animate-spin text-blue-500",size:32})}):c.jsx("img",{src:Pe,alt:"Profil",className:"w-full h-full object-cover"})})}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:qr,disabled:Le,className:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 p-2.5 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/40 transition",title:"KI Avatar",children:c.jsx(jp,{size:20})}),c.jsx("button",{onClick:()=>{var D;return(D=$.current)==null?void 0:D.click()},disabled:Le,className:"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 p-2.5 rounded-full hover:bg-green-100 dark:hover:bg-green-900/40 transition",title:"Upload",children:c.jsx(Ao,{size:20})}),c.jsx("input",{type:"file",ref:$,onChange:Xn,accept:"image/*",className:"hidden"}),c.jsx("button",{onClick:()=>W(!J),disabled:Le,className:"bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 p-2.5 rounded-full hover:bg-purple-100 dark:hover:bg-purple-900/40 transition",title:"URL",children:c.jsx(Vc,{size:20})})]}),J&&c.jsxs("div",{className:"flex w-full space-x-2 animate-fade-in",children:[c.jsx("input",{type:"text",placeholder:"Bild URL einfgen...",value:G,onChange:D=>I(D.target.value),className:"flex-1 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-white"}),c.jsx("button",{onClick:Zn,className:"bg-blue-500 text-white px-3 py-2 rounded-lg text-sm font-bold",children:"OK"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1",children:Ye("settings.display_name",x)}),c.jsx("input",{type:"text",value:me,onChange:D=>_e(D.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl px-4 py-3 font-semibold text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-2",children:Ye("settings.your_color",x)}),c.jsx("div",{className:"grid grid-cols-6 gap-3",children:JC.map(D=>c.jsx("button",{onClick:()=>Je(D.val),className:"w-10 h-10 rounded-full flex items-center justify-center transition-all active:scale-95 shadow-sm hover:shadow-md relative overflow-hidden",style:{backgroundColor:D.hex},children:$e===D.val&&c.jsx("div",{className:"bg-black/20 w-full h-full flex items-center justify-center",children:c.jsx(Np,{size:16,className:"text-white drop-shadow-md"})})},D.val))})]})]})]}),c.jsxs("section",{className:"space-y-4",children:[c.jsx("h2",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:Ye("settings.app_settings",x)}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 space-y-2",children:[c.jsxs("button",{onClick:()=>oe("inbox"),className:"flex items-center justify-between w-full py-2 group",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 p-2 rounded-full text-indigo-600 dark:text-indigo-400",children:c.jsx(zw,{size:20})}),c.jsx("span",{className:"font-bold text-gray-800 dark:text-white",children:"Nachrichten"})]}),c.jsxs("div",{className:"flex items-center",children:[je.length>0&&c.jsx("span",{className:"bg-indigo-500 text-white text-xs font-bold px-2 py-0.5 rounded-full mr-2",children:je.length}),c.jsx(ms,{size:20,className:"text-gray-400 group-hover:text-indigo-500 transition"})]})]}),c.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 my-1"}),c.jsxs("div",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 p-2 rounded-full text-gray-600 dark:text-gray-300",children:a?c.jsx(Mi,{size:20}):c.jsx($n,{size:20})}),c.jsx("span",{className:"font-bold text-gray-800 dark:text-white",children:Ye("settings.dark_mode",x)})]}),c.jsx("button",{onClick:l,className:`w-12 h-6 rounded-full p-1 transition-colors duration-300 focus:outline-none ${a?"bg-blue-600":"bg-gray-300"}`,children:c.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-md transform transition-transform duration-300 ${a?"translate-x-6":"translate-x-0"}`})})]}),p&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 my-1"}),c.jsxs("div",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"bg-cyan-100 dark:bg-cyan-900/30 p-2 rounded-full text-cyan-600 dark:text-cyan-400",children:c.jsx(s0,{size:20})}),c.jsx("span",{className:"font-bold text-gray-800 dark:text-white",children:"Liquid Glass Effekt"})]}),c.jsx("button",{onClick:p,className:`w-12 h-6 rounded-full p-1 transition-colors duration-300 focus:outline-none border-none ring-0 ${f?"bg-cyan-500":"bg-gray-300"}`,children:c.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-md transform transition-transform duration-300 ${f?"translate-x-6":"translate-x-0"}`})})]})]}),y&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 my-1"}),c.jsxs("div",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-full text-red-600 dark:text-red-400",children:c.jsx(Cd,{size:20})}),c.jsx("span",{className:"font-bold text-gray-800 dark:text-white",children:"Weihnachts-Modus"})]}),c.jsx("button",{onClick:y,className:`w-12 h-6 rounded-full p-1 transition-colors duration-300 focus:outline-none border-none ring-0 ${g?"bg-red-500":"bg-gray-300"}`,children:c.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-md transform transition-transform duration-300 ${g?"translate-x-6":"translate-x-0"}`})})]})]})]})]}),t.role==="admin"&&b&&c.jsxs("section",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-end px-1",children:[c.jsx("h2",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:Ye("settings.family_management",x)}),c.jsx("span",{className:"text-[10px] text-red-500 bg-red-50 dark:bg-red-900/20 px-2 py-0.5 rounded-full font-bold",children:"Admin Bereich"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden divide-y divide-gray-100 dark:divide-gray-700",children:[c.jsxs("button",{onClick:()=>oe("add-user"),className:"w-full flex items-center justify-center p-3 hover:bg-gray-50 dark:hover:bg-gray-700/40 transition text-blue-600 dark:text-blue-400 font-bold text-sm",children:[c.jsx(a_,{size:18,className:"mr-2"})," Nutzer hinzufgen"]}),b.filter(D=>D.id!==t.id&&D.role!=="admin").map(D=>c.jsxs("div",{className:"p-4 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("img",{src:D.avatar,className:"w-8 h-8 rounded-full"}),c.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:D.name})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>Wr(D),className:"p-1.5 rounded-lg text-gray-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition",title:"Bearbeiten",children:c.jsx(Bc,{size:16})}),c.jsxs("button",{onClick:()=>er(D),className:"text-xs bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 px-3 py-1.5 rounded-lg font-bold hover:bg-red-100 dark:hover:bg-red-900/30 transition flex items-center",children:[c.jsx(Fw,{size:12,className:"mr-1.5"}),"Passwort"]})]})]},D.id)),b.filter(D=>D.id!==t.id&&D.role!=="admin").length===0&&c.jsx("div",{className:"p-4 text-center text-gray-400 text-sm italic",children:"Keine anderen Nutzer."})]})]}),c.jsxs("section",{className:"space-y-4",children:[c.jsx("h2",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:Ye("settings.info_help",x)}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 divide-y divide-gray-100 dark:divide-gray-700 overflow-hidden",children:[c.jsxs("button",{onClick:()=>oe("about"),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700/40 transition",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 p-2 rounded-full",children:c.jsx(Td,{size:18})}),c.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:"App Info & Updates"})]}),c.jsx(ms,{size:18,className:"text-gray-400"})]}),rt?c.jsxs("button",{onClick:re,className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-yellow-900/20 transition bg-yellow-50/50 dark:bg-yellow-900/10",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900/40 text-yellow-700 dark:text-yellow-400 p-2 rounded-full",children:c.jsx(Mp,{size:18})}),c.jsx("span",{className:"font-bold text-gray-800 dark:text-white",children:"Admin Posteingang"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[Re>0&&c.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-0.5 rounded-full",children:Re}),c.jsx(ms,{size:18,className:"text-gray-400"})]})]}):c.jsxs("button",{onClick:()=>oe("feedback"),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700/40 transition",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"bg-pink-50 dark:bg-pink-900/20 text-pink-600 dark:text-pink-400 p-2 rounded-full",children:c.jsx(Dp,{size:18})}),c.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:"Feedback"})]}),c.jsx(ms,{size:18,className:"text-gray-400"})]})]})]}),c.jsxs("div",{className:"space-y-3 pt-4",children:[c.jsxs("button",{onClick:Nr,className:"w-full bg-blue-600 text-white font-bold py-4 rounded-xl shadow-lg flex items-center justify-center space-x-2 active:scale-[0.98] transition hover:bg-blue-700",children:[c.jsx(c0,{size:20}),c.jsx("span",{children:Ye("settings.save",x)})]}),c.jsxs("button",{onClick:r,className:"w-full bg-white dark:bg-gray-800 text-red-500 font-bold py-4 rounded-xl shadow-sm border border-red-100 dark:border-red-900/30 flex items-center justify-center space-x-2 active:scale-[0.98] transition hover:bg-red-50 dark:hover:bg-red-900/20",children:[c.jsx($w,{size:20}),c.jsx("span",{children:Ye("settings.logout",x)})]})]})]}),de==="inbox"&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-fade-in",children:c.jsxs("div",{className:`${ut} w-full max-w-sm rounded-3xl shadow-2xl p-6 relative max-h-[80vh] flex flex-col ${Bt}`,children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:`text-2xl font-bold ${gn}`,children:"Nachrichten"}),c.jsx("button",{onClick:()=>oe("none"),className:Mn,children:c.jsx(wt,{size:24})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-3 mb-6 min-h-[200px]",children:je.length===0?c.jsxs("div",{className:`flex flex-col items-center justify-center h-full space-y-2 ${f?"text-slate-800 dark:text-white opacity-100 drop-shadow-sm":"text-gray-400 opacity-60"}`,children:[c.jsx(Mp,{size:48,strokeWidth:1}),c.jsx("p",{className:"text-sm font-medium",children:"Keine Nachrichten"})]}):je.map(D=>{var We;const fe=b==null?void 0:b.find(jt=>jt.id===D.authorId),Ve=(We=D.readBy)==null?void 0:We.includes(t.id),gt=f?"bg-white/60 dark:bg-black/40 border-white/20 dark:border-white/10 backdrop-blur-md":`bg-gray-50 dark:bg-gray-800 border ${Ve?"border-gray-100 dark:border-gray-700":"border-indigo-200 dark:border-indigo-800 ring-1 ring-indigo-100 dark:ring-indigo-900"}`,Tt=f?"text-black dark:text-white":"text-gray-800 dark:text-gray-200",Qe=f?"text-slate-700 dark:text-slate-300":"text-gray-700 dark:text-gray-300";return c.jsxs("div",{className:`${gt} p-4 rounded-2xl relative border shadow-sm`,children:[fe&&c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx("img",{src:fe.avatar,className:"w-6 h-6 rounded-full border border-gray-200 dark:border-gray-600"}),c.jsx("span",{className:`text-xs font-bold ${Qe}`,children:fe.name}),c.jsx("span",{className:`text-[10px] ml-auto opacity-70 ${Qe}`,children:new Date(D.createdAt).toLocaleDateString()})]}),c.jsx("p",{className:`text-sm ${Tt}`,children:D.description}),c.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[!Ve&&Z&&c.jsx("button",{onClick:()=>Z(D.id),className:"text-blue-500 hover:text-blue-700 p-1",title:"Als gelesen markieren",children:c.jsx(Ro,{size:16})}),q&&c.jsx("button",{onClick:()=>q(D.id),className:"text-gray-400 hover:text-red-500 p-1",children:c.jsx(Tr,{size:16})})]})]},D.id)})}),c.jsxs("button",{onClick:xs,className:"w-full bg-blue-600 text-white font-bold py-3.5 rounded-xl shadow-lg flex items-center justify-center space-x-2 active:scale-95 transition",children:[c.jsx(Xw,{size:18})," ",c.jsx("span",{children:"Neue Nachricht"})]})]})}),de==="compose"&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-fade-in",children:c.jsxs("div",{className:`${ut} w-full max-w-sm rounded-3xl shadow-2xl p-6 relative ${Bt}`,children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsxs("button",{onClick:()=>oe("inbox"),className:"text-blue-600 dark:text-blue-400 text-sm font-bold flex items-center mr-auto hover:underline",children:[c.jsx(Fc,{size:16,className:"mr-1"})," Zurck"]}),c.jsx("h3",{className:`text-lg font-bold ${gn} absolute left-1/2 transform -translate-x-1/2`,children:"Neue Nachricht"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:`block text-xs font-bold ${f?"text-slate-600 dark:text-slate-400":"text-gray-500 dark:text-gray-400"} uppercase mb-2`,children:"Empfnger"}),c.jsxs("select",{value:he,onChange:D=>ce(D.target.value),className:"w-full bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-3 text-sm outline-none focus:ring-2 focus:ring-blue-500 dark:text-white appearance-none",children:[c.jsx("option",{value:"",disabled:!0,children:"Whle jemanden..."}),b==null?void 0:b.filter(D=>D.id!==t.id).map(D=>c.jsx("option",{value:D.id,children:D.name},D.id))]})]}),c.jsx("div",{children:c.jsx("textarea",{value:Ue,onChange:D=>Ae(D.target.value),placeholder:"Deine Nachricht...",className:"w-full bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4 text-sm outline-none resize-none h-32 focus:ring-2 focus:ring-blue-500 dark:text-white"})}),c.jsxs("button",{onClick:ws,disabled:!Ue.trim()||!he,className:"w-full bg-blue-600 text-white font-bold py-3.5 rounded-xl shadow-lg flex items-center justify-center space-x-2 disabled:opacity-50 disabled:shadow-none active:scale-95 transition",children:[c.jsx(Ww,{size:18}),c.jsx("span",{children:"Senden"})]})]})]})}),de==="about"&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-fade-in",children:c.jsxs("div",{className:`${ut} w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden relative max-h-[90vh] flex flex-col ${Bt} transition-colors`,children:[c.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 p-6 text-center relative shrink-0",children:[c.jsx("button",{onClick:()=>oe("none"),className:"absolute top-4 right-4 text-white/70 hover:text-white bg-black/20 p-1.5 rounded-full backdrop-blur-sm transition",children:c.jsx(wt,{size:20})}),c.jsx("div",{className:"bg-white p-3 rounded-2xl shadow-lg inline-block mb-3",children:c.jsx(gl,{size:48})}),c.jsx("h2",{className:"text-2xl font-bold text-white tracking-tight",children:"FamilienHub"}),c.jsxs("p",{className:"text-blue-100 text-sm font-medium opacity-90",children:["Version ",_m]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar space-y-8",children:[c.jsxs("section",{children:[c.jsxs("h3",{className:`text-xs font-bold uppercase tracking-widest mb-3 flex items-center gap-2 ${f?"text-slate-600 dark:text-slate-400":"text-gray-400 dark:text-gray-500"}`,children:[c.jsx(Lp,{size:14,className:"text-yellow-500"})," Neu in ",_m]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:`${f?"bg-indigo-100 dark:bg-indigo-900/30 border-indigo-200/50":"bg-indigo-50 dark:bg-indigo-900/10 border-indigo-100"} p-3 rounded-xl border dark:border-indigo-800 flex gap-3 items-start`,children:[c.jsx("div",{className:`${f?"bg-indigo-200 dark:bg-indigo-800 text-indigo-700":"bg-indigo-100 dark:bg-indigo-800 text-indigo-600"} p-2 rounded-full dark:text-indigo-300 shrink-0`,children:c.jsx(c_,{size:16})}),c.jsxs("div",{children:[c.jsx("h4",{className:`font-bold text-sm ${f?"text-slate-900 dark:text-white":"text-gray-800 dark:text-white"}`,children:"Bug Fixes"}),c.jsx("p",{className:`text-xs mt-0.5 ${f?"text-slate-700 dark:text-indigo-100/70":"text-gray-600 dark:text-gray-400"}`,children:"Verschiedene Fehlerbehebungen und Stabilittsverbesserungen."})]})]}),c.jsxs("div",{className:`${f?"bg-green-100 dark:bg-green-900/30 border-green-200/50":"bg-green-50 dark:bg-green-900/10 border-green-100"} p-3 rounded-xl border dark:border-green-800 flex gap-3 items-start`,children:[c.jsx("div",{className:`${f?"bg-green-200 dark:bg-green-800 text-green-700":"bg-green-100 dark:bg-green-800 text-green-600"} p-2 rounded-full dark:text-green-300 shrink-0`,children:c.jsx(Lp,{size:16})}),c.jsxs("div",{children:[c.jsx("h4",{className:`font-bold text-sm ${f?"text-slate-900 dark:text-white":"text-gray-800 dark:text-white"}`,children:"Performance Optimierung"}),c.jsx("p",{className:`text-xs mt-0.5 ${f?"text-slate-700 dark:text-green-100/70":"text-gray-600 dark:text-gray-400"}`,children:"Die App luft nun flssiger und schneller."})]})]})]})]}),c.jsx("section",{children:c.jsxs("a",{href:WC,target:"_blank",rel:"noopener noreferrer",className:`w-full flex items-center justify-between p-4 rounded-2xl border transition group ${f?"bg-white/60 dark:bg-black/40 border-white/20 hover:bg-white/80 dark:hover:bg-black/60":"bg-white dark:bg-gray-800 border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-750"}`,children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 p-2 rounded-full",children:c.jsx(Dw,{size:20})}),c.jsxs("div",{className:"text-left",children:[c.jsx("span",{className:"font-bold text-gray-800 dark:text-white block text-sm",children:"Webseite"}),c.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"superyoshi6.github.io/FamilienHub"})]})]}),c.jsx(Sd,{size:18,className:"text-gray-400 group-hover:text-purple-500 transition"})]})}),c.jsx("section",{children:c.jsxs("div",{className:"bg-gray-900 dark:bg-black rounded-2xl p-5 text-white shadow-xl relative overflow-hidden group cursor-pointer active:scale-95 transition",onClick:Me,children:[c.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-blue-500 rounded-full blur-3xl opacity-20 group-hover:opacity-30 transition"}),c.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg mb-1",children:"App Update"}),c.jsx("p",{className:"text-gray-400 text-xs",children:"Neueste Version laden."})]}),c.jsx("div",{className:"bg-white/10 p-3 rounded-xl hover:bg-white/20 transition",children:c.jsx(r0,{size:24,className:"text-white"})})]})]})}),c.jsx("div",{className:"text-center",children:c.jsx("p",{className:`text-[10px] ${f?"text-slate-500 dark:text-slate-500":"text-gray-400"}`,children:" 2025 FamilienHub Inc. Alle Rechte vorbehalten."})})]})]})}),de==="reset-confirm"&&Xe&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:`${ut} w-full max-w-sm rounded-2xl shadow-2xl p-6 relative ${Bt}`,children:[c.jsxs("h3",{className:`text-lg font-bold ${gn} mb-2`,children:[Ye("settings.reset_passwords",x),"?"]}),c.jsx("p",{className:`${f?"text-slate-700 dark:text-gray-300":"text-gray-600 dark:text-gray-300"} mb-6`,children:Ye("settings.reset_confirm",x).replace("{name}",Xe.name)}),c.jsx("input",{type:"password",value:dt,onChange:D=>At(D.target.value),placeholder:"Neues Passwort",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl p-3 mb-4 text-sm outline-none dark:text-white"}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:()=>oe("none"),className:"flex-1 py-3 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-bold",children:"Abbrechen"}),c.jsx("button",{onClick:_s,disabled:!dt.trim(),className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-bold shadow-lg disabled:opacity-50",children:"Zurcksetzen"})]})]})}),de==="edit-user"&&St&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:`${ut} w-full max-w-sm rounded-2xl shadow-2xl p-6 relative ${Bt}`,children:[c.jsx("button",{onClick:()=>oe("none"),className:`absolute top-4 right-4 ${Mn}`,children:c.jsx(wt,{size:24})}),c.jsx("h3",{className:`text-lg font-bold ${gn} mb-6`,children:"Benutzer bearbeiten"}),c.jsxs("div",{className:"flex flex-col items-center space-y-4 mb-6",children:[c.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-gray-100 dark:border-gray-700 relative bg-gray-100 dark:bg-gray-700",children:ft?c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:c.jsx(Cr,{className:"animate-spin text-blue-500",size:24})}):c.jsx("img",{src:ve,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:tr,disabled:ft,className:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 p-2 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/40 transition",title:"KI Generieren",children:c.jsx(jp,{size:16})}),c.jsx("button",{onClick:()=>{var D;return(D=Q.current)==null?void 0:D.click()},disabled:ft,className:"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 p-2 rounded-full hover:bg-green-100 dark:hover:bg-green-900/40 transition",title:"Datei Upload",children:c.jsx(Ao,{size:16})}),c.jsx("input",{type:"file",ref:Q,onChange:gr,accept:"image/*",className:"hidden"}),c.jsx("button",{onClick:()=>Et(!ot),disabled:ft,className:"bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 p-2 rounded-full hover:bg-purple-100 dark:hover:bg-purple-900/40 transition",title:"Link",children:c.jsx(Vc,{size:16})})]}),ot&&c.jsxs("div",{className:"flex w-full space-x-2 animate-fade-in",children:[c.jsx("input",{type:"text",placeholder:"Bild URL einfgen...",value:_n,onChange:D=>hn(D.target.value),className:"flex-1 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-white"}),c.jsx("button",{onClick:mr,className:"bg-blue-500 text-white px-3 py-2 rounded-lg text-sm font-bold",children:"OK"})]})]}),c.jsx("input",{type:"text",value:Qt,onChange:D=>K(D.target.value),placeholder:"Name",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl p-3 mb-6 text-sm outline-none dark:text-white font-bold text-center"}),c.jsx("button",{onClick:Ar,disabled:!Qt.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl shadow-lg transition disabled:opacity-50",children:"Speichern"})]})}),de==="add-user"&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:`${ut} w-full max-w-sm rounded-2xl shadow-2xl p-6 relative ${Bt}`,children:[c.jsx("button",{onClick:()=>oe("none"),className:`absolute top-4 right-4 ${Mn}`,children:c.jsx(wt,{size:24})}),c.jsx("h3",{className:`text-lg font-bold ${gn} mb-4`,children:"Nutzer hinzufgen"}),c.jsxs("form",{onSubmit:bn,className:"space-y-4",children:[c.jsx("input",{type:"text",value:Vt,onChange:D=>zn(D.target.value),placeholder:"Name",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl p-3 text-sm outline-none dark:text-white font-bold",autoFocus:!0}),c.jsxs("div",{className:"flex gap-2 p-1 bg-gray-100 dark:bg-gray-700/50 rounded-xl",children:[c.jsx("button",{type:"button",onClick:()=>pn("parent"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${It==="parent"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-300 shadow-sm":"text-gray-400 dark:text-gray-500 hover:text-gray-600"}`,children:"Elternteil"}),c.jsx("button",{type:"button",onClick:()=>pn("child"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${It==="child"?"bg-white dark:bg-gray-600 text-green-600 dark:text-green-300 shadow-sm":"text-gray-400 dark:text-gray-500 hover:text-gray-600"}`,children:"Kind"})]}),c.jsx("button",{type:"submit",disabled:!Vt.trim()||ne,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl shadow-lg transition disabled:opacity-50 flex items-center justify-center",children:ne?c.jsx(Cr,{className:"animate-spin",size:20}):"Erstellen"})]})]})}),de==="feedback"&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:`${ut} w-full max-w-sm rounded-2xl shadow-2xl p-6 relative ${Bt}`,children:[c.jsx("button",{onClick:()=>oe("none"),className:`absolute top-4 right-4 ${Mn}`,children:c.jsx(wt,{size:24})}),yt?c.jsxs("div",{className:"py-8 flex flex-col items-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4 text-green-600",children:c.jsx(Np,{size:32})}),c.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:"Danke!"})]}):c.jsxs("form",{onSubmit:Ir,className:"space-y-4",children:[c.jsxs("h3",{className:`text-lg font-bold ${gn} flex items-center`,children:[c.jsx(Dp,{size:20,className:"mr-2 text-pink-500"})," ",Ye("settings.feedback",x)]}),c.jsx("div",{className:"flex justify-center space-x-2 py-2",children:[1,2,3,4,5].map(D=>c.jsx("button",{type:"button",onClick:()=>mt(D),className:"focus:outline-none transition transform hover:scale-110",children:c.jsx(qs,{size:32,className:`${qe>=D?"fill-yellow-400 text-yellow-400":"text-gray-300 dark:text-gray-600"}`})},D))}),c.jsx("textarea",{value:Ie,onChange:D=>He(D.target.value),placeholder:"Wie findest du die App?",rows:4,required:!0,className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl p-3 text-sm text-gray-800 dark:text-white focus:ring-2 focus:ring-pink-500 outline-none resize-none"}),c.jsx("button",{type:"submit",className:"w-full bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 rounded-xl shadow-md active:scale-[0.98] transition",children:"Absenden"})]})]})}),de==="admin-feedback"&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:`${ut} w-full max-w-md rounded-2xl shadow-2xl p-6 relative max-h-[80vh] flex flex-col ${Bt}`,children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-100 dark:border-gray-700 pb-2",children:[c.jsx("h3",{className:`text-lg font-bold ${gn}`,children:"Nutzer Feedback"}),c.jsx("button",{onClick:()=>oe("none"),className:Mn,children:c.jsx(wt,{size:24})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-3",children:T&&T.length>0?T.map(D=>c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-xl border border-gray-100 dark:border-gray-700",children:[c.jsxs("div",{className:"flex justify-between items-start mb-1",children:[c.jsx("span",{className:"font-bold text-sm text-gray-800 dark:text-white",children:D.userName}),c.jsx("div",{className:"flex",children:Array.from({length:D.rating}).map((fe,Ve)=>c.jsx(qs,{size:10,className:"fill-yellow-400 text-yellow-400"},Ve))})]}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:D.text}),c.jsx("div",{className:"text-[10px] text-gray-400 text-right",children:new Date(D.createdAt).toLocaleString()})]},D.id)):c.jsx("div",{className:"text-center py-8 text-gray-400",children:"Kein Feedback vorhanden."})})]})})]})},YC=(t,e)=>{switch(t){case"wind":return c.jsx(u_,{className:e});case"droplets":return c.jsx(o_,{className:e});case"humidity":return c.jsx(s0,{className:e});case"sun":return c.jsx($n,{className:e});case"thermometer":return c.jsx(d0,{className:e});case"eye":return c.jsx(Ro,{className:e});case"gauge":return c.jsx(Pw,{className:e});case"sunrise":return c.jsx(t_,{className:e});case"sunset":return c.jsx(n_,{className:e});default:return c.jsx($n,{className:e})}},QC=(t,e=1)=>t===0?e?c.jsx($n,{size:80,className:"text-yellow-400 animate-pulse-slow"}):c.jsx(Mi,{size:80,className:"text-gray-200"}):t>=1&&t<=3?c.jsx(hl,{size:80,className:"text-gray-200 animate-float"}):t>=45&&t<=48?c.jsx(cl,{size:80,className:"text-gray-300 animate-float"}):t>=51&&t<=67?c.jsx(Io,{size:80,className:"text-blue-300"}):t>=71&&t<=77?c.jsx(fl,{size:80,className:"text-white"}):t>=95?c.jsx(dl,{size:80,className:"text-purple-300"}):c.jsx($n,{size:80,className:"text-yellow-400"}),bm=t=>t===0?c.jsx($n,{size:20,className:"text-yellow-400"}):t>=1&&t<=3?c.jsx(hl,{size:20,className:"text-gray-400"}):t>=45&&t<=48?c.jsx(cl,{size:20,className:"text-gray-400"}):t>=51&&t<=67?c.jsx(Io,{size:20,className:"text-blue-400"}):t>=71&&t<=77?c.jsx(fl,{size:20,className:"text-white"}):t>=95?c.jsx(dl,{size:20,className:"text-purple-400"}):c.jsx($n,{size:20,className:"text-yellow-400"}),XC=(t,e=1,n=!1)=>n?e?t===0?"from-blue-400/5 to-blue-600/10":t>=1&&t<=3?"from-slate-400/5 to-slate-500/10":"from-cyan-500/5 to-blue-600/10":"from-indigo-900/10 to-slate-900/20":e?t===0?"from-blue-400 to-blue-600":t>=1&&t<=3?"from-blue-400 to-slate-500":t>=45?"from-gray-500 to-slate-600":t>=51&&t<=86?"from-slate-600 to-gray-800":t>=95?"from-indigo-900 to-purple-900":"from-blue-500 to-cyan-600":"from-slate-900 to-indigo-950",ZC=(t,e)=>e===0?"Heute":e===1?"Morgen":new Date(t).toLocaleDateString("de-DE",{weekday:"long"}),eN=({code:t,isDay:e})=>{const n=t===0,r=t===1||t===2,i=t===3,a=t===45||t===48,l=t>=51&&t<=57,f=t>=61&&t<=63||t===66||t===80||t===81,p=t===65||t===67||t===82||t>=95&&t<=99,g=t>=71&&t<=77||t>=85&&t<=86,y=t>=95,x=n&&e===0,w=j.useMemo(()=>p?{count:120,speedBase:.3,speedVar:.2,angle:15,opacity:.7,type:"rain"}:f?{count:60,speedBase:.7,speedVar:.3,angle:5,opacity:.5,type:"rain"}:l?{count:40,speedBase:1.5,speedVar:.5,angle:0,opacity:.3,type:"rain"}:g?{count:50,speedBase:4,speedVar:2,angle:0,opacity:.8,type:"snow"}:{count:0,speedBase:0,speedVar:0,angle:0,opacity:0,type:"none"},[p,f,l,g]),b=j.useMemo(()=>Array.from({length:w.count}).map((N,U)=>({id:U,left:Math.random()*100,delay:Math.random()*2,duration:w.speedBase+Math.random()*w.speedVar,size:w.type==="snow"?Math.random()*3+2:w.type==="rain"&&l?Math.random()*5+5:Math.random()*15+10})),[w,l]),S=j.useMemo(()=>[{top:10,left:-20,duration:25,size:"w-64 h-64"},{top:30,left:-10,duration:35,size:"w-80 h-80"},{top:60,left:10,duration:45,size:"w-40 h-40"},{top:20,left:-30,duration:20,size:"w-72 h-72"},{top:50,left:-15,duration:30,size:"w-56 h-56"},{top:5,left:50,duration:40,size:"w-96 h-96"}],[]),T=j.useMemo(()=>Array.from({length:50}).map((N,U)=>({id:U,top:Math.random()*60,left:Math.random()*100,delay:Math.random()*3,size:Math.random()*2+1})),[]),E=i?S:r||l||f||p||g?S.slice(0,3):[];return c.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none z-0",children:[x&&T.map(N=>c.jsx("div",{className:"absolute bg-white rounded-full animate-pulse-slow",style:{top:`${N.top}%`,left:`${N.left}%`,width:`${N.size}px`,height:`${N.size}px`,opacity:.8,animationDelay:`${N.delay}s`}},`star-${N.id}`)),E.map((N,U)=>c.jsx("div",{className:`absolute bg-white/${i?"10":"20"} rounded-full blur-3xl animate-cloud ${N.size}`,style:{top:`${N.top}%`,animationDuration:`${N.duration}s`,left:`${N.left}%`}},U)),i&&c.jsx("div",{className:"absolute inset-0 bg-slate-900/30 z-0"}),a&&c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-white/40 via-white/20 to-transparent blur-3xl z-10"}),w.type!=="none"&&c.jsx("div",{className:"absolute inset-0",style:{transform:`skewX(-${w.angle}deg)`},children:b.map(N=>c.jsx("div",{className:`absolute rounded-full ${w.type==="snow"?"bg-white":"bg-blue-100/60"}`,style:{left:`${N.left}%`,top:"-50px",width:w.type==="snow"?`${N.size}px`:p?"2px":"1px",height:w.type==="snow"?`${N.size}px`:`${N.size}px`,opacity:w.opacity,animation:`fall ${N.duration}s linear infinite`,animationDelay:`-${N.delay}s`}},N.id))}),y&&c.jsx("div",{className:"absolute inset-0 bg-white/30 animate-thunder mix-blend-overlay z-10"}),n&&e===1&&c.jsx("div",{className:"absolute -top-20 right-0 w-[500px] h-[500px] bg-yellow-400/20 rounded-full blur-3xl animate-pulse-slow"})]})},tN=({onBack:t,favorites:e,onToggleFavorite:n,initialLocation:r,liquidGlass:i=!1})=>{var yt,kt;const[a,l]=j.useState(!0),[f,p]=j.useState(null),[g,y]=j.useState(null),[x,w]=j.useState(!1),[b,S]=j.useState(""),[T,E]=j.useState("Standort"),[N,U]=j.useState(null),[A,F]=j.useState("rain"),[q,Y]=j.useState([]),[B,ue]=j.useState(null),[Z,me]=j.useState(["hourly","daily","details"]),[_e,Pe]=j.useState(null),we=async(he,ce,Ue)=>{l(!0),p(null),U({lat:he,lng:ce});const Ae=await Nd(he,ce);if(Ae){y(Ae),Ue&&E(Ue);const Xe=new Date(Ae.daily.sunrise[0]).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}),nt=new Date(Ae.daily.sunset[0]).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}),dt=Ae.current.visibility?(Ae.current.visibility/1e3).toFixed(1):"--";Y([{id:"1",label:"Gefhlt",value:`${Math.round(Ae.current.apparent_temperature)}`,icon:"thermometer",colorClass:"bg-orange-500/20 text-orange-200"},{id:"2",label:"Feuchtigkeit",value:`${Ae.current.relative_humidity_2m}%`,icon:"humidity",colorClass:"bg-blue-500/20 text-blue-200"},{id:"3",label:"Wind",value:`${Math.round(Ae.current.wind_speed_10m)} km/h`,icon:"wind",colorClass:"bg-teal-500/20 text-teal-200"},{id:"4",label:"UV Index",value:`${Ae.daily.uv_index_max[0].toFixed(1)}`,icon:"sun",colorClass:"bg-yellow-500/20 text-yellow-200"},{id:"5",label:"Luftdruck",value:`${Math.round(Ae.current.surface_pressure)} hPa`,icon:"gauge",colorClass:"bg-purple-500/20 text-purple-200"},{id:"6",label:"Sichtweite",value:`${dt} km`,icon:"eye",colorClass:"bg-indigo-500/20 text-indigo-200"},{id:"7",label:"Sonnenaufgang",value:Xe,icon:"sunrise",colorClass:"bg-amber-500/20 text-amber-200"},{id:"8",label:"Sonnenuntergang",value:nt,icon:"sunset",colorClass:"bg-red-500/20 text-red-200"}])}else p("Daten konnten nicht geladen werden");l(!1)},$e=async()=>{l(!0),p(null);try{const he=await Ml.getCurrentPosition({enableHighAccuracy:!1,timeout:1e4,maximumAge:1/0});we(he.coords.latitude,he.coords.longitude,"Aktueller Standort")}catch(he){console.error("Capacitor Geo Error:",he),navigator.geolocation?navigator.geolocation.getCurrentPosition(ce=>{we(ce.coords.latitude,ce.coords.longitude,"Aktueller Standort")},ce=>{p("Standort nicht verfgbar. Bitte suche manuell."),w(!0),l(!1)},{timeout:5e3,enableHighAccuracy:!1}):(p("Standortzugriff fehlgeschlagen."),w(!0),l(!1))}};j.useEffect(()=>{r?we(r.lat,r.lng,r.name):$e()},[]);const Je=async he=>{if(he.preventDefault(),!b.trim())return;l(!0),w(!1);const ce=await h_(b);ce?we(ce.lat,ce.lng,ce.name):(p(`Konnte Ort "${b}" nicht finden.`),l(!1)),S("")},Le=()=>{N&&n({id:T,name:T,lat:N.lat,lng:N.lng})},Te=e.some(he=>he.name===T),J=he=>{if(_e===null)Pe(he);else if(_e===he)Pe(null);else{const ce=[...Z],Ue=ce[he];ce[he]=ce[_e],ce[_e]=Ue,me(ce),Pe(null)}},W=he=>{if(B===null)ue(he);else if(B===he)ue(null);else{const ce=[...q],Ue=ce[he];ce[he]=ce[B],ce[B]=Ue,Y(ce),ue(null)}},G=((yt=g==null?void 0:g.current)==null?void 0:yt.weather_code)||0,I=((kt=g==null?void 0:g.current)==null?void 0:kt.is_day)??1,z=G>=71&&G<=77,pe=i?"text-slate-800 dark:text-white":z&&I?"text-slate-800":"text-white",$=i?"text-slate-600 dark:text-yellow-100 opacity-90":"text-yellow-100 opacity-90",Q=i?"bg-white/40 dark:bg-black/30 backdrop-blur-xl border border-white/30 dark:border-white/10 shadow-sm":z?"bg-white/40 border-slate-500/20":"bg-black/20 border-white/5",de=({title:he,index:ce,onClick:Ue})=>{const Ae=_e===ce;return c.jsxs("div",{onClick:Ue,className:`flex justify-between items-center mb-3 px-3 py-1.5 cursor-pointer transition-all rounded-lg select-none ${Ae?"bg-white/20 ring-1 ring-white/50":"hover:bg-white/10 group"}`,children:[c.jsx("h3",{className:`text-left text-xs font-bold uppercase tracking-wider flex items-center drop-shadow-sm ${$}`,children:he}),Ae?c.jsxs("div",{className:"flex items-center space-x-1 animate-pulse",children:[c.jsx("span",{className:"text-[10px] font-bold text-yellow-300 uppercase",children:"Verschieben..."}),c.jsx(Ep,{size:14,className:"text-current"})]}):c.jsx(jw,{size:18,className:"opacity-60 group-hover:opacity-100 transition"})]})},oe=he=>{if(!g)return null;const ce=new Date().getHours(),Ue=g.hourly.time.slice(ce,ce+25),Ae=g.hourly.temperature_2m.slice(ce,ce+25),Xe=g.hourly.weather_code.slice(ce,ce+25);return c.jsxs("div",{className:`w-full transition-all duration-300 ${_e===he?"scale-[0.98] opacity-80":""}`,children:[c.jsx(de,{title:"Stndlich",index:he,onClick:()=>J(he)}),c.jsx("div",{className:`${Q} rounded-3xl p-5 shadow-sm`,children:c.jsx("div",{className:"flex overflow-x-auto gap-6 pb-2 scrollbar-hide",children:Ue.map((nt,dt)=>{const St=new Date(nt).getHours(),Ft=dt===0;return c.jsxs("div",{className:"flex flex-col items-center space-y-3 min-w-[3rem]",children:[c.jsx("span",{className:"text-xs font-medium opacity-80 whitespace-nowrap",children:Ft?"Jetzt":`${St}:00`}),bm(Xe[dt]||0),c.jsxs("span",{className:"font-bold text-lg",children:[Math.round(Ae[dt]||0),""]})]},dt)})})})]})},Ie=he=>c.jsxs("div",{className:`w-full transition-all duration-300 ${_e===he?"scale-[0.98] opacity-80":""}`,children:[c.jsx(de,{title:"7-Tage Trend",index:he,onClick:()=>J(he)}),c.jsx("div",{className:`${Q} rounded-3xl p-5 space-y-4 shadow-sm`,children:g==null?void 0:g.daily.time.map((ce,Ue)=>{const Ae=Math.round(g.daily.temperature_2m_min[Ue]),Xe=Math.round(g.daily.temperature_2m_max[Ue]),nt=-5,At=35-nt,St=Math.max(0,(Ae-nt)/At*100),Ft=Math.max(5,(Xe-Ae)/At*100);return c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"w-20 font-medium text-left",children:ZC(ce,Ue)}),c.jsx("div",{className:"flex justify-center w-8",children:bm(g.daily.weather_code[Ue])}),c.jsxs("div",{className:"flex-1 flex items-center gap-2 px-2",children:[c.jsxs("span",{className:"w-6 text-right opacity-80 text-xs",children:[Ae,""]}),c.jsx("div",{className:`flex-1 h-1.5 ${i?"bg-slate-400/30":z?"bg-slate-600/10":"bg-white/10"} rounded-full relative overflow-hidden`,children:c.jsx("div",{className:"absolute h-full rounded-full opacity-80",style:{left:`${St}%`,width:`${Ft}%`,background:"linear-gradient(90deg, #93c5fd 0%, #fbbf24 100%)"}})}),c.jsxs("span",{className:"w-6 text-left font-bold text-xs",children:[Xe,""]})]})]},Ue)})})]}),He=()=>{if(!N)return null;const he=A,ce=`https://embed.windy.com/embed2.html?lat=${N.lat}&lon=${N.lng}&detailLat=${N.lat}&detailLon=${N.lng}&width=650&height=450&zoom=8&level=surface&overlay=${he}&product=ecmwf&menu=&message=&marker=true&calendar=now&pressure=&type=map&location=coordinates&detail=&metricWind=km%2Fh&metricTemp=%C2%B0C&radarRange=-1`;return c.jsxs("div",{className:"w-full transition-all duration-300",children:[c.jsx("div",{className:"flex justify-between items-center mb-3 px-3 py-1.5 rounded-lg select-none",children:c.jsx("h3",{className:`text-left text-xs font-bold uppercase tracking-wider flex items-center drop-shadow-md ${$}`,children:"Wetterradar"})}),c.jsxs("div",{className:`${Q} rounded-3xl p-2 shadow-sm`,children:[c.jsxs("div",{className:"flex gap-2 mb-2 px-1",children:[c.jsxs("button",{onClick:Ue=>{Ue.stopPropagation(),F("rain")},className:`flex-1 py-2 rounded-xl text-xs font-bold flex items-center justify-center transition-all ${A==="rain"?"bg-blue-500 text-white shadow-md":"bg-white/20 hover:bg-white/30 text-current"}`,children:[c.jsx(Io,{size:14,className:"mr-1.5"})," Regen"]}),c.jsxs("button",{onClick:Ue=>{Ue.stopPropagation(),F("temp")},className:`flex-1 py-2 rounded-xl text-xs font-bold flex items-center justify-center transition-all ${A==="temp"?"bg-orange-500 text-white shadow-md":"bg-white/20 hover:bg-white/30 text-current"}`,children:[c.jsx(d0,{size:14,className:"mr-1.5"})," Temperatur"]})]}),c.jsx("div",{className:"w-full aspect-[4/3] rounded-xl overflow-hidden bg-black/20 relative shadow-inner",children:c.jsx("iframe",{src:ce,className:"w-full h-full border-none",title:"Radar"})})]})]})},qe=he=>c.jsxs("div",{className:`w-full transition-all duration-300 ${_e===he?"scale-[0.98] opacity-80":""}`,children:[c.jsx(de,{title:"Details",index:he,onClick:()=>J(he)}),c.jsx("div",{className:"grid grid-cols-2 gap-3 w-full",children:q.map((ce,Ue)=>{const Ae=B===Ue;let Xe=ce.colorClass||"bg-white/20";return i&&(ce.icon==="sun"?Xe="bg-yellow-100 text-yellow-600 dark:bg-yellow-500/20 dark:text-yellow-200":ce.icon==="wind"?Xe="bg-teal-100 text-teal-600 dark:bg-teal-500/20 dark:text-teal-200":ce.icon==="thermometer"?Xe="bg-orange-100 text-orange-600 dark:bg-orange-500/20 dark:text-orange-200":ce.icon==="humidity"?Xe="bg-blue-100 text-blue-600 dark:bg-blue-500/20 dark:text-blue-200":Xe="bg-slate-100 text-slate-600 dark:bg-white/20 dark:text-white"),c.jsxs("div",{onClick:()=>W(Ue),className:`
                              ${Q} 
                              p-4 rounded-3xl flex flex-col items-start 
                              relative overflow-hidden cursor-pointer transition-all active:scale-95 select-none
                              ${Ae?"ring-2 ring-yellow-400 shadow-lg scale-[0.98]":"hover:bg-white/5"}
                          `,children:[c.jsxs("div",{className:"flex justify-between w-full mb-3",children:[c.jsx("div",{className:`p-2 rounded-full ${Xe}`,children:YC(ce.icon,"w-4 h-4")}),Ae?c.jsx(Ep,{size:16,className:"text-yellow-400 animate-pulse"}):c.jsx("div",{className:"w-4"})]}),c.jsx("span",{className:"text-[10px] font-bold uppercase tracking-normal mb-0.5 opacity-70 w-full truncate",children:ce.label}),c.jsx("span",{className:"text-xl font-bold tracking-tight",children:ce.value})]},ce.id)})})]});if(a)return c.jsxs("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 flex-col",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4"}),c.jsx("span",{className:"text-gray-500",children:"Lade Wetter..."})]});const mt=XC(G,I,i);return c.jsxs("div",{className:`min-h-screen ${i?"":"bg-gradient-to-b"} ${mt} ${pe} pb-24 transition-all duration-1000 relative overflow-hidden`,children:[c.jsx(eN,{code:G,isDay:I}),c.jsxs("div",{className:"pt-4 px-4 flex items-center z-20 relative",children:[c.jsx("button",{onClick:t,className:`bg-white/20 hover:bg-white/30 p-2 rounded-full backdrop-blur-md transition flex-shrink-0 mr-2 ${z&&!i?"text-slate-800":"text-current"}`,children:c.jsx(Fc,{size:24})}),c.jsxs("div",{className:"flex-1 min-w-0 flex items-center justify-center space-x-1 mx-2 bg-white/10 rounded-full py-1.5 px-3 backdrop-blur-sm",children:[c.jsx(ys,{size:12,className:"opacity-70 flex-shrink-0"}),c.jsx("span",{className:"font-semibold tracking-wide uppercase text-sm opacity-90 truncate",children:T})]}),c.jsxs("div",{className:"flex space-x-1 flex-shrink-0",children:[c.jsx("button",{onClick:$e,className:`bg-white/20 hover:bg-white/30 p-2 rounded-full backdrop-blur-md transition ${z&&!i?"text-slate-800":"text-current"}`,title:"Aktueller Standort",children:c.jsx(pl,{size:20,className:r?"":"fill-current"})}),c.jsx("button",{onClick:Le,className:`bg-white/20 hover:bg-white/30 p-2 rounded-full backdrop-blur-md transition ${z&&!i?"text-slate-800":"text-current"}`,children:c.jsx(qs,{size:20,fill:Te?"currentColor":"none",className:Te?"text-yellow-400":""})}),c.jsx("button",{onClick:()=>w(!x),className:`bg-white/20 hover:bg-white/30 p-2 rounded-full backdrop-blur-md transition ${z&&!i?"text-slate-800":"text-current"}`,children:c.jsx(Gs,{size:20})})]})]}),x&&c.jsx("div",{className:"absolute top-20 left-4 right-4 z-30 animate-fade-in-down",children:c.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl rounded-2xl p-2 shadow-xl border border-white/20",children:[c.jsxs("form",{onSubmit:Je,className:"relative mb-2",children:[c.jsx("input",{type:"text",autoFocus:!0,value:b,onChange:he=>S(he.target.value),placeholder:"Stadt eingeben (z.B. Mnchen)...",className:"w-full bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-xl py-3 pl-4 pr-12 outline-none border border-transparent focus:border-blue-500 transition-all"}),c.jsx("button",{type:"submit",className:"absolute right-2 top-2 p-1.5 bg-blue-500 text-white rounded-lg",children:c.jsx(Gs,{size:20})})]}),e.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2 px-1 pb-2",children:e.map(he=>c.jsxs("button",{onClick:()=>{we(he.lat,he.lng,he.name),w(!1)},className:"flex items-center space-x-1 bg-gray-100 dark:bg-gray-700 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-gray-700 dark:text-gray-300 px-3 py-1.5 rounded-full text-xs font-medium transition",children:[c.jsx(qs,{size:10,className:"fill-current text-yellow-500"}),c.jsx("span",{children:he.name})]},he.id))}),c.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 mt-2 pt-2 text-center",children:c.jsx("button",{onClick:()=>w(!1),className:"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white",children:"Schlieen"})})]})}),c.jsx("div",{className:"flex flex-col items-center pt-8 px-6 text-center z-10 relative animate-fade-in-up",children:f?c.jsxs("div",{className:"bg-white/10 p-6 rounded-2xl backdrop-blur-md mt-10",children:[c.jsx(Vw,{size:48,className:"mx-auto mb-2 opacity-70"}),c.jsx("p",{className:"mb-4 font-medium",children:f}),c.jsxs("button",{onClick:()=>w(!0),className:"bg-white/20 hover:bg-white/30 px-6 py-2 rounded-full text-sm font-bold transition flex items-center mx-auto",children:[c.jsx(Gs,{size:16,className:"mr-2"})," Manuell suchen"]})]}):g&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`mb-2 drop-shadow-2xl filter transform hover:scale-105 transition duration-700 ease-in-out ${i?"animate-float":""}`,children:QC(G,I)}),c.jsxs("h1",{className:"text-8xl font-bold tracking-tighter drop-shadow-lg leading-none",children:[Math.round(g.current.temperature_2m),""]}),c.jsx("p",{className:"text-xl font-medium mt-2 opacity-90 drop-shadow-sm",children:Ad(G)}),c.jsxs("div",{className:`flex space-x-4 mt-2 text-sm opacity-90 font-medium ${i?"bg-white/10 backdrop-blur-md text-current":z?"bg-slate-800/10":"bg-black/20"} px-4 py-1 rounded-full backdrop-blur-sm`,children:[c.jsxs("span",{className:"flex items-center",children:[c.jsx("span",{className:"text-xs mr-1 opacity-70",children:"H:"})," ",Math.round(g.daily.temperature_2m_max[0]),""]}),c.jsx("span",{className:`w-px ${z&&!i?"bg-slate-800/30":"bg-white/30"} h-4`}),c.jsxs("span",{className:"flex items-center",children:[c.jsx("span",{className:"text-xs mr-1 opacity-70",children:"T:"})," ",Math.round(g.daily.temperature_2m_min[0]),""]})]}),c.jsxs("div",{className:"w-full mt-10 space-y-6",children:[Z.map((he,ce)=>he==="hourly"?c.jsx("div",{className:"animate-fade-in",children:oe(ce)},"hourly"):he==="daily"?c.jsx("div",{className:"animate-fade-in",children:Ie(ce)},"daily"):he==="details"?c.jsx("div",{className:"animate-fade-in",children:qe(ce)},"details"):null),c.jsx("div",{className:"animate-fade-in",children:He()})]})]})})]})},nN=e0.createContext({notifications:[],markAllRead:()=>{},clearAll:()=>{}});var $r={},Ja={},sd=function(t,e){return sd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},sd(t,e)};function dy(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");sd(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var kl=function(){return kl=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},kl.apply(this,arguments)};function $i(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function fy(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var f=t.length-1;f>=0;f--)(l=t[f])&&(a=(i<3?l(a):i>3?l(e,n,a):l(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function hy(t,e){return function(n,r){e(n,r,t)}}function py(t,e,n,r,i,a){function l(N){if(N!==void 0&&typeof N!="function")throw new TypeError("Function expected");return N}for(var f=r.kind,p=f==="getter"?"get":f==="setter"?"set":"value",g=!e&&t?r.static?t:t.prototype:null,y=e||(g?Object.getOwnPropertyDescriptor(g,r.name):{}),x,w=!1,b=n.length-1;b>=0;b--){var S={};for(var T in r)S[T]=T==="access"?{}:r[T];for(var T in r.access)S.access[T]=r.access[T];S.addInitializer=function(N){if(w)throw new TypeError("Cannot add initializers after decoration has completed");a.push(l(N||null))};var E=(0,n[b])(f==="accessor"?{get:y.get,set:y.set}:y[p],S);if(f==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(x=l(E.get))&&(y.get=x),(x=l(E.set))&&(y.set=x),(x=l(E.init))&&i.unshift(x)}else(x=l(E))&&(f==="field"?i.unshift(x):y[p]=x)}g&&Object.defineProperty(g,r.name,y),w=!0}function gy(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function my(t){return typeof t=="symbol"?t:"".concat(t)}function yy(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function vy(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ke(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(y){try{g(r.next(y))}catch(x){l(x)}}function p(y){try{g(r.throw(y))}catch(x){l(x)}}function g(y){y.done?a(y.value):i(y.value).then(f,p)}g((r=r.apply(t,e||[])).next())})}function xy(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=f(0),l.throw=f(1),l.return=f(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(g){return function(y){return p([g,y])}}function p(g){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(a=g[0]&2?i.return:g[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,g[1])).done)return a;switch(i=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){n.label=g[1];break}if(g[0]===6&&n.label<a[1]){n.label=a[1],a=g;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(g);break}a[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],i=0}finally{r=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var Vl=Object.create?(function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]});function wy(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Vl(e,t,n)}function Sl(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $d(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(f){l={error:f}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return a}function _y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat($d(arguments[e]));return t}function by(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],l=0,f=a.length;l<f;l++,i++)r[i]=a[l];return r}function ky(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function ji(t){return this instanceof ji?(this.v=t,this):new ji(t)}function Sy(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(b){return function(S){return Promise.resolve(S).then(b,x)}}function f(b,S){r[b]&&(i[b]=function(T){return new Promise(function(E,N){a.push([b,T,E,N])>1||p(b,T)})},S&&(i[b]=S(i[b])))}function p(b,S){try{g(r[b](S))}catch(T){w(a[0][3],T)}}function g(b){b.value instanceof ji?Promise.resolve(b.value.v).then(y,x):w(a[0][2],b)}function y(b){p("next",b)}function x(b){p("throw",b)}function w(b,S){b(S),a.shift(),a.length&&p(a[0][0],a[0][1])}}function Ey(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,a){e[i]=t[i]?function(l){return(n=!n)?{value:ji(t[i](l)),done:!1}:a?a(l):l}:a}}function Ty(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Sl=="function"?Sl(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(l){return new Promise(function(f,p){l=t[a](l),i(f,p,l.done,l.value)})}}function i(a,l,f,p){Promise.resolve(p).then(function(g){a({value:g,done:f})},l)}}function Cy(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var rN=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},id=function(t){return id=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},id(t)};function Ny(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=id(t),r=0;r<n.length;r++)n[r]!=="default"&&Vl(e,t,n[r]);return rN(e,t),e}function Ay(t){return t&&t.__esModule?t:{default:t}}function Iy(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function Ry(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function Py(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function My(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var sN=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function Dy(t){function e(a){t.error=t.hasError?new sN(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(i,function(l){return e(l),i()})}else r|=1}catch(l){e(l)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function jy(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,a,l){return r?e?".jsx":".js":i&&(!a||!l)?n:i+a+"."+l.toLowerCase()+"js"}):t}const iN={__extends:dy,__assign:kl,__rest:$i,__decorate:fy,__param:hy,__esDecorate:py,__runInitializers:gy,__propKey:my,__setFunctionName:yy,__metadata:vy,__awaiter:ke,__generator:xy,__createBinding:Vl,__exportStar:wy,__values:Sl,__read:$d,__spread:_y,__spreadArrays:by,__spreadArray:ky,__await:ji,__asyncGenerator:Sy,__asyncDelegator:Ey,__asyncValues:Ty,__makeTemplateObject:Cy,__importStar:Ny,__importDefault:Ay,__classPrivateFieldGet:Iy,__classPrivateFieldSet:Ry,__classPrivateFieldIn:Py,__addDisposableResource:My,__disposeResources:Dy,__rewriteRelativeImportExtension:jy},oN=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:My,get __assign(){return kl},__asyncDelegator:Ey,__asyncGenerator:Sy,__asyncValues:Ty,__await:ji,__awaiter:ke,__classPrivateFieldGet:Iy,__classPrivateFieldIn:Py,__classPrivateFieldSet:Ry,__createBinding:Vl,__decorate:fy,__disposeResources:Dy,__esDecorate:py,__exportStar:wy,__extends:dy,__generator:xy,__importDefault:Ay,__importStar:Ny,__makeTemplateObject:Cy,__metadata:vy,__param:hy,__propKey:my,__read:$d,__rest:$i,__rewriteRelativeImportExtension:jy,__runInitializers:gy,__setFunctionName:yy,__spread:_y,__spreadArray:ky,__spreadArrays:by,__values:Sl,default:iN},Symbol.toStringTag,{value:"Module"})),aN=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let Bl=class extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}},Ly=class extends Bl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},od=class extends Bl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},ad=class extends Bl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var El;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(El||(El={}));class lN{constructor(e,{headers:n={},customFetch:r,region:i=El.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=aN(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ke(this,arguments,void 0,function*(n,r={}){var i;let a,l;try{const{headers:f,method:p,body:g,signal:y,timeout:x}=r;let w={},{region:b}=r;b||(b=this.region);const S=new URL(`${this.url}/${n}`);b&&b!=="any"&&(w["x-region"]=b,S.searchParams.set("forceFunctionRegion",b));let T;g&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",T=g):typeof g=="string"?(w["Content-Type"]="text/plain",T=g):typeof FormData<"u"&&g instanceof FormData?T=g:(w["Content-Type"]="application/json",T=JSON.stringify(g)):T=g;let E=y;x&&(l=new AbortController,a=setTimeout(()=>l.abort(),x),y?(E=l.signal,y.addEventListener("abort",()=>l.abort())):E=l.signal);const N=yield this.fetch(S.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),f),body:T,signal:E}).catch(q=>{throw new Ly(q)}),U=N.headers.get("x-relay-error");if(U&&U==="true")throw new od(N);if(!N.ok)throw new ad(N);let A=((i=N.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),F;return A==="application/json"?F=yield N.json():A==="application/octet-stream"||A==="application/pdf"?F=yield N.blob():A==="text/event-stream"?F=N:A==="multipart/form-data"?F=yield N.formData():F=yield N.text(),{data:F,error:null,response:N}}catch(f){return{data:null,error:f,response:f instanceof ad||f instanceof od?f.context:void 0}}finally{a&&clearTimeout(a)}})}}const uN=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return El},FunctionsClient:lN,FunctionsError:Bl,FunctionsFetchError:Ly,FunctionsHttpError:ad,FunctionsRelayError:od},Symbol.toStringTag,{value:"Module"})),Uy=jo(uN);var dn={};const zi=jo(oN);var Ka={},Ya={},Qa={},Xa={},Za={},el={},km;function Oy(){if(km)return el;km=1,Object.defineProperty(el,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return el.default=t,el}var Sm;function Fy(){if(Sm)return Za;Sm=1,Object.defineProperty(Za,"__esModule",{value:!0});const e=zi.__importDefault(Oy());let n=class{constructor(i){var a,l;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(l=i.isMaybeSingle)!==null&&l!==void 0?l:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let f=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var g,y,x,w;let b=null,S=null,T=null,E=p.status,N=p.statusText;if(p.ok){if(this.method!=="HEAD"){const q=await p.text();q===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?S=q:S=JSON.parse(q))}const A=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),F=(x=p.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");A&&F&&F.length>1&&(T=parseInt(F[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(b={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,T=null,E=406,N="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const A=await p.text();try{b=JSON.parse(A),Array.isArray(b)&&p.status===404&&(S=[],b=null,E=200,N="OK")}catch{p.status===404&&A===""?(E=204,N="No Content"):b={message:A}}if(b&&this.isMaybeSingle&&(!((w=b==null?void 0:b.details)===null||w===void 0)&&w.includes("0 rows"))&&(b=null,E=200,N="OK"),b&&this.shouldThrowOnError)throw new e.default(b)}return{error:b,data:S,count:T,status:E,statusText:N}});return this.shouldThrowOnError||(f=f.catch(p=>{var g,y,x,w,b,S;let T="";const E=p==null?void 0:p.cause;if(E){const N=(g=E==null?void 0:E.message)!==null&&g!==void 0?g:"",U=(y=E==null?void 0:E.code)!==null&&y!==void 0?y:"";T=`${(x=p==null?void 0:p.name)!==null&&x!==void 0?x:"FetchError"}: ${p==null?void 0:p.message}`,T+=`

Caused by: ${(w=E==null?void 0:E.name)!==null&&w!==void 0?w:"Error"}: ${N}`,U&&(T+=` (${U})`),E!=null&&E.stack&&(T+=`
${E.stack}`)}else T=(b=p==null?void 0:p.stack)!==null&&b!==void 0?b:"";return{error:{message:`${(S=p==null?void 0:p.name)!==null&&S!==void 0?S:"FetchError"}: ${p==null?void 0:p.message}`,details:T,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),f.then(i,a)}returns(){return this}overrideTypes(){return this}};return Za.default=n,Za}var Em;function $y(){if(Em)return Xa;Em=1,Object.defineProperty(Xa,"__esModule",{value:!0});const e=zi.__importDefault(Fy());let n=class extends e.default{select(i){let a=!1;const l=(i??"*").split("").map(f=>/\s/.test(f)&&!a?"":(f==='"'&&(a=!a),f)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:l,foreignTable:f,referencedTable:p=f}={}){const g=p?`${p}.order`:"order",y=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${y?`${y},`:""}${i}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:l=a}={}){const f=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(f,`${i}`),this}range(i,a,{foreignTable:l,referencedTable:f=l}={}){const p=typeof f>"u"?"offset":`${f}.offset`,g=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${i}`),this.url.searchParams.set(g,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:l=!1,buffers:f=!1,wal:p=!1,format:g="text"}={}){var y;const x=[i?"analyze":null,a?"verbose":null,l?"settings":null,f?"buffers":null,p?"wal":null].filter(Boolean).join("|"),w=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${w}"; options=${x};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};return Xa.default=n,Xa}var Tm;function zd(){if(Tm)return Qa;Tm=1,Object.defineProperty(Qa,"__esModule",{value:!0});const e=zi.__importDefault($y()),n=new RegExp("[,()]");let r=class extends e.default{eq(a,l){return this.url.searchParams.append(a,`eq.${l}`),this}neq(a,l){return this.url.searchParams.append(a,`neq.${l}`),this}gt(a,l){return this.url.searchParams.append(a,`gt.${l}`),this}gte(a,l){return this.url.searchParams.append(a,`gte.${l}`),this}lt(a,l){return this.url.searchParams.append(a,`lt.${l}`),this}lte(a,l){return this.url.searchParams.append(a,`lte.${l}`),this}like(a,l){return this.url.searchParams.append(a,`like.${l}`),this}likeAllOf(a,l){return this.url.searchParams.append(a,`like(all).{${l.join(",")}}`),this}likeAnyOf(a,l){return this.url.searchParams.append(a,`like(any).{${l.join(",")}}`),this}ilike(a,l){return this.url.searchParams.append(a,`ilike.${l}`),this}ilikeAllOf(a,l){return this.url.searchParams.append(a,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(a,l){return this.url.searchParams.append(a,`ilike(any).{${l.join(",")}}`),this}regexMatch(a,l){return this.url.searchParams.append(a,`match.${l}`),this}regexIMatch(a,l){return this.url.searchParams.append(a,`imatch.${l}`),this}is(a,l){return this.url.searchParams.append(a,`is.${l}`),this}isDistinct(a,l){return this.url.searchParams.append(a,`isdistinct.${l}`),this}in(a,l){const f=Array.from(new Set(l)).map(p=>typeof p=="string"&&n.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(a,`in.(${f})`),this}contains(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cs.{${l.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(l)}`),this}containedBy(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cd.{${l.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(l)}`),this}rangeGt(a,l){return this.url.searchParams.append(a,`sr.${l}`),this}rangeGte(a,l){return this.url.searchParams.append(a,`nxl.${l}`),this}rangeLt(a,l){return this.url.searchParams.append(a,`sl.${l}`),this}rangeLte(a,l){return this.url.searchParams.append(a,`nxr.${l}`),this}rangeAdjacent(a,l){return this.url.searchParams.append(a,`adj.${l}`),this}overlaps(a,l){return typeof l=="string"?this.url.searchParams.append(a,`ov.${l}`):this.url.searchParams.append(a,`ov.{${l.join(",")}}`),this}textSearch(a,l,{config:f,type:p}={}){let g="";p==="plain"?g="pl":p==="phrase"?g="ph":p==="websearch"&&(g="w");const y=f===void 0?"":`(${f})`;return this.url.searchParams.append(a,`${g}fts${y}.${l}`),this}match(a){return Object.entries(a).forEach(([l,f])=>{this.url.searchParams.append(l,`eq.${f}`)}),this}not(a,l,f){return this.url.searchParams.append(a,`not.${l}.${f}`),this}or(a,{foreignTable:l,referencedTable:f=l}={}){const p=f?`${f}.or`:"or";return this.url.searchParams.append(p,`(${a})`),this}filter(a,l,f){return this.url.searchParams.append(a,`${l}.${f}`),this}};return Qa.default=r,Qa}var Cm;function zy(){if(Cm)return Ya;Cm=1,Object.defineProperty(Ya,"__esModule",{value:!0});const e=zi.__importDefault(zd());let n=class{constructor(i,{headers:a={},schema:l,fetch:f}){this.url=i,this.headers=new Headers(a),this.schema=l,this.fetch=f}select(i,a){const{head:l=!1,count:f}=a??{},p=l?"HEAD":"GET";let g=!1;const y=(i??"*").split("").map(x=>/\s/.test(x)&&!g?"":(x==='"'&&(g=!g),x)).join("");return this.url.searchParams.set("select",y),f&&this.headers.append("Prefer",`count=${f}`),new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:l=!0}={}){var f;const p="POST";if(a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const g=i.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(g.length>0){const y=[...new Set(g)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:l=!1,count:f,defaultToNull:p=!0}={}){var g;const y="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),f&&this.headers.append("Prefer",`count=${f}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const x=i.reduce((w,b)=>w.concat(Object.keys(b)),[]);if(x.length>0){const w=[...new Set(x)].map(b=>`"${b}"`);this.url.searchParams.set("columns",w.join(","))}}return new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(i,{count:a}={}){var l;const f="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:i}={}){var a;const l="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};return Ya.default=n,Ya}var Nm;function cN(){if(Nm)return Ka;Nm=1,Object.defineProperty(Ka,"__esModule",{value:!0});const t=zi,e=t.__importDefault(zy()),n=t.__importDefault(zd());let r=class Vy{constructor(a,{headers:l={},schema:f,fetch:p}={}){this.url=a,this.headers=new Headers(l),this.schemaName=f,this.fetch=p}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const l=new URL(`${this.url}/${a}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new Vy(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:f=!1,get:p=!1,count:g}={}){var y;let x;const w=new URL(`${this.url}/rpc/${a}`);let b;f||p?(x=f?"HEAD":"GET",Object.entries(l).filter(([T,E])=>E!==void 0).map(([T,E])=>[T,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([T,E])=>{w.searchParams.append(T,E)})):(x="POST",b=l);const S=new Headers(this.headers);return g&&S.set("Prefer",`count=${g}`),new n.default({method:x,url:w,headers:S,schema:this.schemaName,body:b,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}};return Ka.default=r,Ka}var Am;function By(){if(Am)return dn;Am=1,Object.defineProperty(dn,"__esModule",{value:!0}),dn.PostgrestError=dn.PostgrestBuilder=dn.PostgrestTransformBuilder=dn.PostgrestFilterBuilder=dn.PostgrestQueryBuilder=dn.PostgrestClient=void 0;const t=zi,e=t.__importDefault(cN());dn.PostgrestClient=e.default;const n=t.__importDefault(zy());dn.PostgrestQueryBuilder=n.default;const r=t.__importDefault(zd());dn.PostgrestFilterBuilder=r.default;const i=t.__importDefault($y());dn.PostgrestTransformBuilder=i.default;const a=t.__importDefault(Fy());dn.PostgrestBuilder=a.default;const l=t.__importDefault(Oy());return dn.PostgrestError=l.default,dn.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:l.default},dn}class Hy{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const dN="2.87.1",fN=`realtime-js/${dN}`,Gy="1.0.0",hN="2.0.0",Im=Gy,ld=1e4,pN=1e3,gN=100;var zs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(zs||(zs={}));var Ut;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ut||(Ut={}));var dr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(dr||(dr={}));var ud;(function(t){t.websocket="websocket"})(ud||(ud={}));var Vs;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Vs||(Vs={}));class mN{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,n,r){var i,a;const l=e.topic,f=(i=e.ref)!==null&&i!==void 0?i:"",p=(a=e.join_ref)!==null&&a!==void 0?a:"",g=e.payload.event,y=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},x=Object.keys(y).length===0?"":JSON.stringify(y);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const w=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+f.length+l.length+g.length+x.length,b=new ArrayBuffer(this.HEADER_LENGTH+w);let S=new DataView(b),T=0;S.setUint8(T++,this.KINDS.userBroadcastPush),S.setUint8(T++,p.length),S.setUint8(T++,f.length),S.setUint8(T++,l.length),S.setUint8(T++,g.length),S.setUint8(T++,x.length),S.setUint8(T++,n),Array.from(p,N=>S.setUint8(T++,N.charCodeAt(0))),Array.from(f,N=>S.setUint8(T++,N.charCodeAt(0))),Array.from(l,N=>S.setUint8(T++,N.charCodeAt(0))),Array.from(g,N=>S.setUint8(T++,N.charCodeAt(0))),Array.from(x,N=>S.setUint8(T++,N.charCodeAt(0)));var E=new Uint8Array(b.byteLength+r.byteLength);return E.set(new Uint8Array(b),0),E.set(new Uint8Array(r),b.byteLength),E.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,a,l,f,p]=r;return n({join_ref:i,ref:a,topic:l,event:f,payload:p})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),a=n.getUint8(2),l=n.getUint8(3),f=n.getUint8(4);let p=this.HEADER_LENGTH+4;const g=r.decode(e.slice(p,p+i));p=p+i;const y=r.decode(e.slice(p,p+a));p=p+a;const x=r.decode(e.slice(p,p+l));p=p+l;const w=e.slice(p,e.byteLength),b=f===this.JSON_ENCODING?JSON.parse(r.decode(w)):w,S={type:this.BROADCAST_EVENT,event:y,payload:b};return l>0&&(S.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class qy{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(xt||(xt={}));const Rm=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,l)=>(a[l]=yN(l,t,e,i),a),{}):{}},yN=(t,e,n,r)=>{const i=e.find(f=>f.name===t),a=i==null?void 0:i.type,l=n[t];return a&&!r.includes(a)?Wy(a,l):cd(l)},Wy=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return _N(e,n)}switch(t){case xt.bool:return vN(e);case xt.float4:case xt.float8:case xt.int2:case xt.int4:case xt.int8:case xt.numeric:case xt.oid:return xN(e);case xt.json:case xt.jsonb:return wN(e);case xt.timestamp:return bN(e);case xt.abstime:case xt.date:case xt.daterange:case xt.int4range:case xt.int8range:case xt.money:case xt.reltime:case xt.text:case xt.time:case xt.timestamptz:case xt.timetz:case xt.tsrange:case xt.tstzrange:return cd(e);default:return cd(e)}},cd=t=>t,vN=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},xN=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},wN=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},_N=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const l=t.slice(1,n);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(f=>Wy(e,f))}return t},bN=t=>typeof t=="string"?t.replace(" ","T"):t,Jy=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Ic{constructor(e,n,r={},i=ld){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var dd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(dd||(dd={}));let Ky=class il{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:l,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=il.syncState(this.state,i,a,l),this.pendingDiffs.forEach(p=>{this.state=il.syncDiff(this.state,p,a,l)}),this.pendingDiffs=[],f()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:l,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=il.syncDiff(this.state,i,a,l),f())}),this.onJoin((i,a,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:l})}),this.onLeave((i,a,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const a=this.cloneDeep(e),l=this.transformState(n),f={},p={};return this.map(a,(g,y)=>{l[g]||(p[g]=y)}),this.map(l,(g,y)=>{const x=a[g];if(x){const w=y.map(E=>E.presence_ref),b=x.map(E=>E.presence_ref),S=y.filter(E=>b.indexOf(E.presence_ref)<0),T=x.filter(E=>w.indexOf(E.presence_ref)<0);S.length>0&&(f[g]=S),T.length>0&&(p[g]=T)}else f[g]=y}),this.syncDiff(a,{joins:f,leaves:p},r,i)}static syncDiff(e,n,r,i){const{joins:a,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(f,p)=>{var g;const y=(g=e[f])!==null&&g!==void 0?g:[];if(e[f]=this.cloneDeep(p),y.length>0){const x=e[f].map(b=>b.presence_ref),w=y.filter(b=>x.indexOf(b.presence_ref)<0);e[f].unshift(...w)}r(f,y,p)}),this.map(l,(f,p)=>{let g=e[f];if(!g)return;const y=p.map(x=>x.presence_ref);g=g.filter(x=>y.indexOf(x.presence_ref)<0),e[f]=g,i(f,g,p),g.length===0&&delete e[f]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var fd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(fd||(fd={}));var Ri;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ri||(Ri={}));var Er;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Er||(Er={}));const kN=Ut;let Yy=class Eo{constructor(e,n={config:{}},r){var i,a;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ic(this,dr.join,this.params,this.timeout),this.rejoinTimer=new qy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ut.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(dr.reply,{},(l,f)=>{this._trigger(this._replyEventName(f),l)}),this.presence=new Ky(this),this.broadcastEndpointURL=Jy(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Ut.closed){const{config:{broadcast:l,presence:f,private:p}}=this.params,g=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(b=>b.filter))!==null&&i!==void 0?i:[],y=!!this.bindings[Ri.PRESENCE]&&this.bindings[Ri.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,x={},w={broadcast:l,presence:Object.assign(Object.assign({},f),{enabled:y}),postgres_changes:g,private:p};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(b=>e==null?void 0:e(Er.CHANNEL_ERROR,b)),this._onClose(()=>e==null?void 0:e(Er.CLOSED)),this.updateJoinPayload(Object.assign({config:w},x)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:b})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){e==null||e(Er.SUBSCRIBED);return}else{const T=this.bindings.postgres_changes,E=(S=T==null?void 0:T.length)!==null&&S!==void 0?S:0,N=[];for(let U=0;U<E;U++){const A=T[U],{filter:{event:F,schema:q,table:Y,filter:B}}=A,ue=b&&b[U];if(ue&&ue.event===F&&Eo.isFilterValueEqual(ue.schema,q)&&Eo.isFilterValueEqual(ue.table,Y)&&Eo.isFilterValueEqual(ue.filter,B))N.push(Object.assign(Object.assign({},A),{id:ue.id}));else{this.unsubscribe(),this.state=Ut.errored,e==null||e(Er.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,e&&e(Er.SUBSCRIBED);return}}).receive("error",b=>{this.state=Ut.errored,e==null||e(Er.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Er.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Ut.joined&&e===Ri.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(f.status===202)return{success:!0};let p=f.statusText;try{const g=await f.json();p=g.error||g.message||p}catch{}return Promise.reject(new Error(p))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=e,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=g.body)===null||i===void 0?void 0:i.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,f,p;const g=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(f=(l=this.params)===null||l===void 0?void 0:l.config)===null||f===void 0?void 0:f.broadcast)===null||p===void 0)&&p.ack)&&a("ok"),g.receive("ok",()=>a("ok")),g.receive("error",()=>a("error")),g.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ut.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(dr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Ic(this,dr.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ut.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ic(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>gN){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,a;const l=e.toLocaleLowerCase(),{close:f,error:p,leave:g,join:y}=dr;if(r&&[f,p,g,y].indexOf(l)>=0&&r!==this._joinRef())return;let w=this._onMessage(l,n,r);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(b=>{var S,T,E;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((E=(T=b.filter)===null||T===void 0?void 0:T.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===l}).map(b=>b.callback(w,r)):(a=this.bindings[l])===null||a===void 0||a.filter(b=>{var S,T,E,N,U,A;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const F=b.id,q=(S=b.filter)===null||S===void 0?void 0:S.event;return F&&((T=n.ids)===null||T===void 0?void 0:T.includes(F))&&(q==="*"||(q==null?void 0:q.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const F=(U=(N=b==null?void 0:b.filter)===null||N===void 0?void 0:N.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return F==="*"||F===((A=n==null?void 0:n.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof w=="object"&&"ids"in w){const S=w.data,{schema:T,table:E,commit_timestamp:N,type:U,errors:A}=S;w=Object.assign(Object.assign({},{schema:T,table:E,commit_timestamp:N,eventType:U,new:{},old:{},errors:A}),this._getPayloadRecords(S))}b.callback(w,r)})}_isClosed(){return this.state===Ut.closed}_isJoined(){return this.state===Ut.joined}_isJoining(){return this.state===Ut.joining}_isLeaving(){return this.state===Ut.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&Eo.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(dr.close,{},e)}_onError(e){this._on(dr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ut.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Rm(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Rm(e.columns,e.old_record)),n}};const Rc=()=>{},tl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},SN=[1e3,2e3,5e3,1e4],EN=1e4,TN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let CN=class{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ld,this.transport=null,this.heartbeatIntervalMs=tl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Rc,this.ref=0,this.reconnectTimer=null,this.vsn=Im,this.logger=Rc,this.conn=null,this.sendBuffer=[],this.serializer=new mN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${ud.websocket}`,this.httpEndpoint=Jy(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Hy.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case zs.connecting:return Vs.Connecting;case zs.open:return Vs.Open;case zs.closing:return Vs.Closing;default:return Vs.Closed}}isConnected(){return this.connectionState()===Vs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new Yy(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:i,ref:a}=e,l=()=>{this.encode(e,f=>{var p;(p=this.conn)===null||p===void 0||p.send(f)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(pN,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},tl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:l}=n,f=l?`(${l})`:"",p=a.status||"";this.log("receive",`${p} ${r} ${i} ${f}`.trim(),a),this.channels.filter(g=>g._isMember(r)).forEach(g=>g._trigger(i,a,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===zs.open||this.conn.readyState===zs.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(dr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([TN],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const a={access_token:n,version:fN};n&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(dr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new qy(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},tl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,a,l,f,p,g,y,x,w,b;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:ld,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:tl.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(f=e==null?void 0:e.heartbeatCallback)!==null&&f!==void 0?f:Rc,this.vsn=(p=e==null?void 0:e.vsn)!==null&&p!==void 0?p:Im,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e==null?void 0:e.reconnectAfterMs)!==null&&g!==void 0?g:(S=>SN[S-1]||EN),this.vsn){case Gy:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:((S,T)=>T(JSON.stringify(S))),this.decode=(x=e==null?void 0:e.decode)!==null&&x!==void 0?x:((S,T)=>T(JSON.parse(S)));break;case hN:this.encode=(w=e==null?void 0:e.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(b=e==null?void 0:e.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const NN=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:kN,get REALTIME_LISTEN_TYPES(){return Ri},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return fd},get REALTIME_PRESENCE_LISTEN_EVENTS(){return dd},get REALTIME_SUBSCRIBE_STATES(){return Er},RealtimeChannel:Yy,RealtimeClient:CN,RealtimePresence:Ky,WebSocketFactory:Hy},Symbol.toStringTag,{value:"Module"})),Qy=jo(NN);class Oo extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Nt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Xy extends Oo{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Tl extends Oo{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const Vd=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),AN=()=>Response,hd=t=>{if(Array.isArray(t))return t.map(n=>hd(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=hd(r)}),e},IN=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},RN=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),Pc=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},PN=(t,e,n)=>ke(void 0,void 0,void 0,function*(){const r=yield AN();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const a=t.status||500,l=(i==null?void 0:i.statusCode)||a+"";e(new Xy(Pc(i),a,l))}).catch(i=>{e(new Tl(Pc(i),i))}):e(new Tl(Pc(t),t))}),MN=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(IN(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function Fo(t,e,n,r,i,a){return ke(this,void 0,void 0,function*(){return new Promise((l,f)=>{t(n,MN(e,r,i,a)).then(p=>{if(!p.ok)throw p;return r!=null&&r.noResolveJson?p:p.json()}).then(p=>l(p)).catch(p=>PN(p,f,r))})})}function Mo(t,e,n,r){return ke(this,void 0,void 0,function*(){return Fo(t,"GET",e,n,r)})}function cr(t,e,n,r,i){return ke(this,void 0,void 0,function*(){return Fo(t,"POST",e,r,i,n)})}function pd(t,e,n,r,i){return ke(this,void 0,void 0,function*(){return Fo(t,"PUT",e,r,i,n)})}function DN(t,e,n,r){return ke(this,void 0,void 0,function*(){return Fo(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Bd(t,e,n,r,i){return ke(this,void 0,void 0,function*(){return Fo(t,"DELETE",e,r,i,n)})}class jN{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return ke(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Nt(e))return{data:null,error:e};throw e}})}}var Zy;class LN{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[Zy]="BlobDownloadBuilder",this.promise=null}asStream(){return new jN(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ke(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Nt(e))return{data:null,error:e};throw e}})}}Zy=Symbol.toStringTag;const UN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Pm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ON{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Vd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return ke(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},Pm),i);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const p=l.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),p&&a.append("metadata",this.encodeMetadata(p)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",l.cacheControl),p&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(p))):(a=r,f["cache-control"]=`max-age=${l.cacheControl}`,f["content-type"]=l.contentType,p&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(p))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!l.duplex&&(l.duplex="half")),i!=null&&i.headers&&(f=Object.assign(Object.assign({},f),i.headers));const g=this._removeEmptyFolders(n),y=this._getFinalPath(g),x=yield(e=="PUT"?pd:cr)(this.fetch,`${this.url}/object/${y}`,a,Object.assign({headers:f},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:g,id:x.Id,fullPath:x.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nt(a))return{data:null,error:a};throw a}})}upload(e,n,r){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return ke(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),f=new URL(this.url+`/object/upload/sign/${l}`);f.searchParams.set("token",n);try{let p;const g=Object.assign({upsert:Pm.upsert},i),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&r instanceof Blob?(p=new FormData,p.append("cacheControl",g.cacheControl),p.append("",r)):typeof FormData<"u"&&r instanceof FormData?(p=r,p.append("cacheControl",g.cacheControl)):(p=r,y["cache-control"]=`max-age=${g.cacheControl}`,y["content-type"]=g.contentType);const x=yield pd(this.fetch,f.toString(),p,{headers:y});return{data:{path:a,fullPath:x.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(Nt(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(e,n){return ke(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const a=yield cr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(this.url+a.url),f=l.searchParams.get("token");if(!f)throw new Oo("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:f},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nt(r))return{data:null,error:r};throw r}})}update(e,n,r){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return ke(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Nt(i))return{data:null,error:i};throw i}})}copy(e,n,r){return ke(this,void 0,void 0,function*(){try{return{data:{path:(yield cr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Nt(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return ke(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield cr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Nt(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return ke(this,void 0,void 0,function*(){try{const i=yield cr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Nt(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=a?`?${a}`:"",f=this._getFinalPath(e),p=()=>Mo(this.fetch,`${this.url}/${i}/${f}${l}`,{headers:this.headers,noResolveJson:!0});return new LN(p,this.shouldThrowOnError)}info(e){return ke(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Mo(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:hd(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nt(r))return{data:null,error:r};throw r}})}exists(e){return ke(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield DN(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nt(r)&&r instanceof Tl){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const f=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",p=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});p!==""&&i.push(p);let g=i.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${r}${g}`)}}}remove(e){return ke(this,void 0,void 0,function*(){try{return{data:yield Bd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nt(n))return{data:null,error:n};throw n}})}list(e,n,r){return ke(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},UN),n),{prefix:e||""});return{data:yield cr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Nt(i))return{data:null,error:i};throw i}})}listV2(e,n){return ke(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield cr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const ev="2.87.1",tv={"X-Client-Info":`storage-js/${ev}`};class FN{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const a=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},tv),n),this.fetch=Vd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ke(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Mo(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nt(n))return{data:null,error:n};throw n}})}getBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:yield Mo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nt(n))return{data:null,error:n};throw n}})}createBucket(e){return ke(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield cr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Nt(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return ke(this,void 0,void 0,function*(){try{return{data:yield pd(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:yield Bd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nt(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var Do=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function $N(t,e,n){const r=new URL(e,t);if(n)for(const[i,a]of Object.entries(n))a!==void 0&&r.searchParams.set(i,a);return r.toString()}async function zN(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function VN(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:a,headers:l}){const f=$N(t.baseUrl,r,i),p=await zN(t.auth),g=await e(f,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...p,...l},body:a?JSON.stringify(a):void 0}),y=await g.text(),x=(g.headers.get("content-type")||"").includes("application/json"),w=x&&y?JSON.parse(y):y;if(!g.ok){const b=x?w:void 0,S=b==null?void 0:b.error;throw new Do((S==null?void 0:S.message)??`Request failed with status ${g.status}`,{status:g.status,icebergType:S==null?void 0:S.type,icebergCode:S==null?void 0:S.code,details:b})}return{status:g.status,headers:g.headers,data:w}}}}function nl(t){return t.join("")}var BN=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:nl(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${nl(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${nl(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${nl(t.namespace)}`}),!0}catch(e){if(e instanceof Do&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Do&&n.status===409)return;throw n}}};function vi(t){return t.join("")}var HN=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vi(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${vi(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${vi(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${vi(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vi(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${vi(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Do&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Do&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},GN=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=VN({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new BN(this.client,e),this.tableOps=new HN(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class nv{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},tv),n),this.fetch=Vd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nt(n))return{data:null,error:n};throw n}})}listBuckets(e){return ke(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Mo(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:yield Bd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nt(n))return{data:null,error:n};throw n}})}from(e){if(!RN(e))throw new Oo("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new GN({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>ke(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(a,l){const f=a[l];return typeof f!="function"?f:(...p)=>ke(this,void 0,void 0,function*(){try{return{data:yield f.apply(a,p),error:null}}catch(g){if(r)throw g;return{data:null,error:g}}})}})}}const Hd={"X-Client-Info":`storage-js/${ev}`,"Content-Type":"application/json"};class Gd extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Pn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class ol extends Gd{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rv extends Gd{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var gd;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(gd||(gd={}));const Hl=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),qN=()=>Response,sv=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},WN=t=>Array.from(new Float32Array(t)),JN=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},Mm=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),KN=(t,e,n)=>ke(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t.status||500,a=t;if(typeof a.json=="function")a.json().then(l=>{const f=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||i+"";e(new ol(Mm(l),i,f))}).catch(()=>{const l=i+"",f=a.statusText||`HTTP ${i} error`;e(new ol(f,i,l))});else{const l=i+"",f=a.statusText||`HTTP ${i} error`;e(new ol(f,i,l))}}else e(new rv(Mm(t),t))}),YN=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(sv(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function QN(t,e,n,r,i,a){return ke(this,void 0,void 0,function*(){return new Promise((l,f)=>{t(n,YN(e,r,i,a)).then(p=>{if(!p.ok)throw p;if(r!=null&&r.noResolveJson)return p;const g=p.headers.get("content-type");return!g||!g.includes("application/json")?{}:p.json()}).then(p=>l(p)).catch(p=>KN(p,f,r))})})}function Fn(t,e,n,r,i){return ke(this,void 0,void 0,function*(){return QN(t,"POST",e,r,i,n)})}class iv{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hd),n),this.fetch=Hl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ke(this,void 0,void 0,function*(){try{return{data:(yield Fn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pn(n))return{data:null,error:n};throw n}})}getIndex(e,n){return ke(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pn(r))return{data:null,error:r};throw r}})}listIndexes(e){return ke(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pn(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return ke(this,void 0,void 0,function*(){try{return{data:(yield Fn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pn(r))return{data:null,error:r};throw r}})}}class ov{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hd),n),this.fetch=Hl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ke(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Fn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pn(n))return{data:null,error:n};throw n}})}getVectors(e){return ke(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pn(n))return{data:null,error:n};throw n}})}listVectors(e){return ke(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Fn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pn(n))return{data:null,error:n};throw n}})}queryVectors(e){return ke(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pn(n))return{data:null,error:n};throw n}})}deleteVectors(e){return ke(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Fn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pn(n))return{data:null,error:n};throw n}})}}class av{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hd),n),this.fetch=Hl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:(yield Fn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pn(n))return{data:null,error:n};throw n}})}getBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pn(n))return{data:null,error:n};throw n}})}listBuckets(){return ke(this,arguments,void 0,function*(e={}){try{return{data:yield Fn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:(yield Fn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pn(n))return{data:null,error:n};throw n}})}}class lv extends av{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new uv(this.url,this.headers,e,this.fetch)}createBucket(e){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return ke(this,void 0,void 0,function*(){return n.createBucket.call(this,e)})}getBucket(e){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return ke(this,void 0,void 0,function*(){return n.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return ke(this,arguments,void 0,function*(n={}){return e.listBuckets.call(this,n)})}deleteBucket(e){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return ke(this,void 0,void 0,function*(){return n.deleteBucket.call(this,e)})}}class uv extends iv{constructor(e,n,r,i){super(e,n,i),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ke(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ke(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ke(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ke(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new cv(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class cv extends ov{constructor(e,n,r,i,a){super(e,n,a),this.vectorBucketName=r,this.indexName=i}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ke(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ke(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ke(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ke(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ke(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class XN extends FN{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new ON(this.url,this.headers,e,this.fetch)}get vectors(){return new lv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new nv(this.url+"/iceberg",this.headers,this.fetch)}}const ZN=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:nv,StorageApiError:Xy,StorageClient:XN,StorageError:Oo,StorageUnknownError:Tl,StorageVectorsApiError:ol,StorageVectorsClient:lv,StorageVectorsError:Gd,get StorageVectorsErrorCode(){return gd},StorageVectorsUnknownError:rv,VectorBucketApi:av,VectorBucketScope:uv,VectorDataApi:ov,VectorIndexApi:iv,VectorIndexScope:cv,isPlainObject:sv,isStorageError:Nt,isStorageVectorsError:Pn,normalizeToFloat32:WN,resolveFetch:Hl,resolveResponse:qN,validateVectorDimension:JN},Symbol.toStringTag,{value:"Module"})),eA=jo(ZN);var Mc={},bo={},Dm;function tA(){return Dm||(Dm=1,Object.defineProperty(bo,"__esModule",{value:!0}),bo.version=void 0,bo.version="2.87.1"),bo}var jm;function nA(){return jm||(jm=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=tA();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(Mc)),Mc}var Dc={},Lm;function rA(){return Lm||(Lm=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=i=>i?(...a)=>i(...a):(...a)=>fetch(...a);t.resolveFetch=e;const n=()=>Headers;t.resolveHeadersConstructor=n;const r=(i,a,l)=>{const f=(0,t.resolveFetch)(l),p=(0,t.resolveHeadersConstructor)();return async(g,y)=>{var x;const w=(x=await a())!==null&&x!==void 0?x:i;let b=new p(y==null?void 0:y.headers);return b.has("apikey")||b.set("apikey",i),b.has("Authorization")||b.set("Authorization",`Bearer ${w}`),f(g,Object.assign(Object.assign({},y),{headers:b}))}};t.fetchWithAuth=r})(Dc)),Dc}var zr={},Um;function sA(){if(Um)return zr;Um=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.isBrowser=void 0,zr.uuid=t,zr.ensureTrailingSlash=e,zr.applySettingDefaults=r,zr.validateSupabaseUrl=i;function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var l=Math.random()*16|0,f=a=="x"?l:l&3|8;return f.toString(16)})}function e(a){return a.endsWith("/")?a:a+"/"}const n=()=>typeof window<"u";zr.isBrowser=n;function r(a,l){var f,p;const{db:g,auth:y,realtime:x,global:w}=a,{db:b,auth:S,realtime:T,global:E}=l,N={db:Object.assign(Object.assign({},b),g),auth:Object.assign(Object.assign({},S),y),realtime:Object.assign(Object.assign({},T),x),storage:{},global:Object.assign(Object.assign(Object.assign({},E),w),{headers:Object.assign(Object.assign({},(f=E==null?void 0:E.headers)!==null&&f!==void 0?f:{}),(p=w==null?void 0:w.headers)!==null&&p!==void 0?p:{})}),accessToken:async()=>""};return a.accessToken?N.accessToken=a.accessToken:delete N.accessToken,N}function i(a){const l=a==null?void 0:a.trim();if(!l)throw new Error("supabaseUrl is required.");if(!l.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(e(l))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return zr}var ko={};const dv="2.87.1",Si=30*1e3,md=3,jc=md*Si,iA="http://localhost:9999",oA="supabase.auth.token",aA={"X-Client-Info":`gotrue-js/${dv}`},yd="X-Supabase-Api-Version",fv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lA=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uA=600*1e3;let Li=class extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function Ne(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let hv=class extends Li{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function pv(t){return Ne(t)&&t.name==="AuthApiError"}let ps=class extends Li{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}},Gr=class extends Li{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}},In=class extends Gr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function gv(t){return Ne(t)&&t.name==="AuthSessionMissingError"}let Os=class extends Gr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},To=class extends Gr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},Co=class extends Gr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function mv(t){return Ne(t)&&t.name==="AuthImplicitGrantRedirectError"}let vd=class extends Gr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Cl=class extends Gr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}};function al(t){return Ne(t)&&t.name==="AuthRetryableFetchError"}let xd=class extends Gr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};function cA(t){return Ne(t)&&t.name==="AuthWeakPasswordError"}let Nl=class extends Gr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const Al="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Om=` 	
\r=`.split(""),dA=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Om.length;e+=1)t[Om[e].charCodeAt(0)]=-2;for(let e=0;e<Al.length;e+=1)t[Al[e].charCodeAt(0)]=e;return t})();function Fm(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Al[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Al[r]),e.queuedBits-=6}}function yv(t,e,n){const r=dA[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function $m(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=l=>{pA(l,r,n)};for(let l=0;l<t.length;l+=1)yv(t.charCodeAt(l),i,a);return e.join("")}function fA(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function hA(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}fA(r,e)}}function pA(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Pi(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)yv(t.charCodeAt(i),n,r);return new Uint8Array(e)}function gA(t){const e=[];return hA(t,n=>e.push(n)),new Uint8Array(e)}function Hs(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>Fm(i,n,r)),Fm(null,n,r),e.join("")}function mA(t){return Math.round(Date.now()/1e3)+t}function yA(){return Symbol("auth-callback")}const tn=()=>typeof window<"u"&&typeof document<"u",js={tested:!1,writable:!1},vv=()=>{if(!tn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(js.tested)return js.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),js.tested=!0,js.writable=!0}catch{js.tested=!0,js.writable=!1}return js.writable};function vA(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const xv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),xA=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ei=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Ls=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},en=async(t,e)=>{await t.removeItem(e)};class Gl{constructor(){this.promise=new Gl.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Gl.promiseConstructor=Promise;function Lc(t){const e=t.split(".");if(e.length!==3)throw new Nl("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!lA.test(e[r]))throw new Nl("JWT not in base64url format");return{header:JSON.parse($m(e[0])),payload:JSON.parse($m(e[1])),signature:Pi(e[2]),raw:{header:e[0],payload:e[1]}}}async function wA(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function _A(t,e){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){r(l);return}}catch(l){if(!e(a,l)){i(l);return}}})()})}function bA(t){return("0"+t.toString(16)).substr(-2)}function kA(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,bA).join("")}async function SA(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function EA(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await SA(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xi(t,e,n=!1){const r=kA();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Ei(t,`${e}-code-verifier`,i);const a=await EA(r);return[a,r===a?"plain":"s256"]}const TA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function CA(t){const e=t.headers.get(yd);if(!e||!e.match(TA))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function NA(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function AA(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const IA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wi(t){if(!IA.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Uc(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function RA(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function zm(t){return JSON.parse(JSON.stringify(t))}const Fs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),PA=[502,503,504];async function Vm(t){var e;if(!xA(t))throw new Cl(Fs(t),0);if(PA.includes(t.status))throw new Cl(Fs(t),t.status);let n;try{n=await t.json()}catch(a){throw new ps(Fs(a),a)}let r;const i=CA(t);if(i&&i.getTime()>=fv["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new xd(Fs(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new In}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new xd(Fs(n),t.status,n.weak_password.reasons);throw new hv(Fs(n),t.status||500,r)}const MA=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ze(t,e,n,r){var i;const a=Object.assign({},r==null?void 0:r.headers);a[yd]||(a[yd]=fv["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const l=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const f=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",p=await DA(t,e,n+f,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(p):{data:Object.assign({},p),error:null}}async function DA(t,e,n,r,i,a){const l=MA(e,r,i,a);let f;try{f=await t(n,Object.assign({},l))}catch(p){throw console.error(p),new Cl(Fs(p),0)}if(f.ok||await Vm(f),r!=null&&r.noResolveJson)return f;try{return await f.json()}catch(p){await Vm(p)}}function ur(t){var e;let n=null;UA(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=mA(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Bm(t){const e=ur(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function gs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function jA(t){return{data:t,error:null}}function LA(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=t,l=$i(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},p=Object.assign({},l);return{data:{properties:f,user:p},error:null}}function Hm(t){return t}function UA(t){return t.access_token&&t.refresh_token&&t.expires_in}const ll=["global","local","others"];let qd=class{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=xv(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=ll[0]){if(ll.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ll.join(", ")}`);try{return await ze(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:gs})}catch(r){if(Ne(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=$i(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:LA,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ne(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ze(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:gs})}catch(n){if(Ne(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,a,l,f,p;try{const g={nextPage:null,lastPage:0,total:0},y=await ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Hm});if(y.error)throw y.error;const x=await y.json(),w=(l=y.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(p=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return b.length>0&&(b.forEach(S=>{const T=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);g[`${E}Page`]=T}),g.total=parseInt(w)),{data:Object.assign(Object.assign({},x),g),error:null}}catch(g){if(Ne(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){wi(e);try{return await ze(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:gs})}catch(n){if(Ne(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){wi(e);try{return await ze(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:gs})}catch(r){if(Ne(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){wi(e);try{return await ze(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:gs})}catch(r){if(Ne(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){wi(e.userId);try{const{data:n,error:r}=await ze(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _deleteFactor(e){wi(e.userId),wi(e.id);try{return{data:await ze(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,a,l,f,p;try{const g={nextPage:null,lastPage:0,total:0},y=await ze(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Hm});if(y.error)throw y.error;const x=await y.json(),w=(l=y.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(p=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return b.length>0&&(b.forEach(S=>{const T=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);g[`${E}Page`]=T}),g.total=parseInt(w)),{data:Object.assign(Object.assign({},x),g),error:null}}catch(g){if(Ne(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(e){try{return await ze(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ze(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ze(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ze(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ze(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}}};function Gm(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const $s={debug:!!(globalThis&&vv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Wd extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let wv=class extends Wd{};class OA extends Wd{}async function _v(t,e,n){$s.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),$s.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){$s.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{$s.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw $s.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new wv(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if($s.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const qm={};async function FA(t,e,n){var r;const i=(r=qm[t])!==null&&r!==void 0?r:Promise.resolve(),a=Promise.race([i.catch(()=>null),e>=0?new Promise((l,f)=>{setTimeout(()=>{f(new OA(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(l=>l)).catch(l=>{if(l&&l.isAcquireTimeout)throw l;return null}).then(async()=>await n());return qm[t]=a.catch(async l=>{if(l&&l.isAcquireTimeout)return await i,null;throw l}),await a}function $A(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function bv(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function zA(t){return parseInt(t,16)}function VA(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function BA(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:l,notBefore:f,requestId:p,resources:g,scheme:y,uri:x,version:w}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const b=bv(t.address),S=y?`${y}://${r}`:r,T=t.statement?`${t.statement}
`:"",E=`${S} wants you to sign in with your Ethereum account:
${b}

${T}`;let N=`URI: ${x}
Version: ${w}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(i&&(N+=`
Expiration Time: ${i.toISOString()}`),f&&(N+=`
Not Before: ${f.toISOString()}`),p&&(N+=`
Request ID: ${p}`),g){let U=`
Resources:`;for(const A of g){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);U+=`
- ${A}`}N+=U}return`${E}
${N}`}class Ot extends Error{constructor({message:e,code:n,cause:r,name:i}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class Il extends Ot{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function HA({error:t,options:e}){var n,r,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ot({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ot({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ot({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ot({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ot({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ot({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Ot({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ot({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(kv(l)){if(a.rp.id!==l)return new Ot({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Ot({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ot({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function GA({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ot({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ot({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(kv(r)){if(n.rpId!==r)return new Ot({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ot({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class qA{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const WA=new qA;function JA(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=$i(t,["challenge","user","excludeCredentials"]),a=Pi(e).buffer,l=Object.assign(Object.assign({},n),{id:Pi(n.id).buffer}),f=Object.assign(Object.assign({},i),{challenge:a,user:l});if(r&&r.length>0){f.excludeCredentials=new Array(r.length);for(let p=0;p<r.length;p++){const g=r[p];f.excludeCredentials[p]=Object.assign(Object.assign({},g),{id:Pi(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return f}function KA(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=$i(t,["challenge","allowCredentials"]),i=Pi(e).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const f=n[l];a.allowCredentials[l]=Object.assign(Object.assign({},f),{id:Pi(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return a}function YA(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Hs(new Uint8Array(t.response.attestationObject)),clientDataJSON:Hs(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function QA(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Hs(new Uint8Array(i.authenticatorData)),clientDataJSON:Hs(new Uint8Array(i.clientDataJSON)),signature:Hs(new Uint8Array(i.signature)),userHandle:i.userHandle?Hs(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function kv(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Wm(){var t,e;return!!(tn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function XA(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Il("Browser returned unexpected credential type",e)}:{data:null,error:new Il("Empty credential response",e)}}catch(e){return{data:null,error:HA({error:e,options:t})}}}async function ZA(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Il("Browser returned unexpected credential type",e)}:{data:null,error:new Il("Empty credential response",e)}}catch(e){return{data:null,error:GA({error:e,options:t})}}}const e2={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},t2={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Rl(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const a in i){const l=i[a];if(l!==void 0)if(Array.isArray(l))r[a]=l;else if(n(l))r[a]=l;else if(e(l)){const f=r[a];e(f)?r[a]=Rl(f,l):r[a]=Rl(l)}else r[a]=l}return r}function n2(t,e){return Rl(e2,t,e||{})}function r2(t,e){return Rl(t2,t,e||{})}class s2{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},a){try{const{data:l,error:f}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!l)return{data:null,error:f};const p=i??WA.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:g}=l.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${r}`),g.displayName||(g.displayName=g.name)}switch(l.webauthn.type){case"create":{const g=n2(l.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:y,error:x}=await XA({publicKey:g,signal:p});return y?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:y}},error:null}:{data:null,error:x}}case"request":{const g=r2(l.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:y,error:x}=await ZA(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:g,signal:p}));return y?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:y}},error:null}:{data:null,error:x}}}}catch(l){return Ne(l)?{data:null,error:l}:{data:null,error:new ps("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new Li("rpId is required for WebAuthn authentication")};try{if(!Wm())return{data:null,error:new ps("Browser does not support WebAuthn",null)};const{data:l,error:f}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:a});if(!l)return{data:null,error:f};const{webauthn:p}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:p.type,rpId:n,rpOrigins:r,credential_response:p.credential_response}})}catch(l){return Ne(l)?{data:null,error:l}:{data:null,error:new ps("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new Li("rpId is required for WebAuthn registration")};try{if(!Wm())return{data:null,error:new ps("Browser does not support WebAuthn",null)};const{data:l,error:f}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(y=>{var x;return(x=y.data)===null||x===void 0?void 0:x.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===e&&w.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:f};const{data:p,error:g}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:a});return p?this._verify({factorId:l.id,challengeId:p.challengeId,webauthn:{rpId:n,rpOrigins:r,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:g}}catch(l){return Ne(l)?{data:null,error:l}:{data:null,error:new ps("Unexpected error in register",l)}}}}$A();const i2={url:iA,storageKey:oA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:aA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Jm(t,e,n){return await n()}const _i={};let Jd=class wd{get jwks(){var e,n;return(n=(e=_i[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){_i[this.storageKey]=Object.assign(Object.assign({},_i[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=_i[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){_i[this.storageKey]=Object.assign(Object.assign({},_i[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},i2),e);if(this.storageKey=a.storageKey,this.instanceID=(n=wd.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,wd.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&tn()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new qd({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=xv(a.fetch),this.lock=a.lock||Jm,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:this.persistSession&&tn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=_v:this.lock=Jm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new s2(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:vv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Gm(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Gm(this.memoryStorage)),tn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${dv}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(tn()&&(n=vA(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),tn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),mv(a)){const p=(e=a.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:f}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",f),await this._saveSession(l),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ne(n)?this._returnResult({error:n}):this._returnResult({error:new ps("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const a=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:ur}),{data:l,error:f}=a;if(f||!l)return this._returnResult({data:{user:null,session:null},error:f});const p=l.session,g=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(a){if(Ne(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var n,r,i;try{let a;if("email"in e){const{email:y,password:x,options:w}=e;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await xi(this.storage,this.storageKey)),a=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:y,password:x,data:(n=w==null?void 0:w.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:b,code_challenge_method:S},xform:ur})}else if("phone"in e){const{phone:y,password:x,options:w}=e;a=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:x,data:(r=w==null?void 0:w.data)!==null&&r!==void 0?r:{},channel:(i=w==null?void 0:w.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:ur})}else throw new To("You must provide either an email or phone number and a password");const{data:l,error:f}=a;if(f||!l)return await en(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const p=l.session,g=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(a){if(await en(this.storage,`${this.storageKey}-code-verifier`),Ne(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:l,options:f}=e;n=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Bm})}else if("phone"in e){const{phone:a,password:l,options:f}=e;n=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Bm})}else throw new To("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const a=new Os;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Ne(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,a,l,f,p,g,y,x,w;let b,S;if("message"in e)b=e.message,S=e.signature;else{const{chain:T,wallet:E,statement:N,options:U}=e;let A;if(tn())if(typeof E=="object")A=E;else{const Z=window;if("ethereum"in Z&&typeof Z.ethereum=="object"&&"request"in Z.ethereum&&typeof Z.ethereum.request=="function")A=Z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(U!=null&&U.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=E}const F=new URL((n=U==null?void 0:U.url)!==null&&n!==void 0?n:window.location.href),q=await A.request({method:"eth_requestAccounts"}).then(Z=>Z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!q||q.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Y=bv(q[0]);let B=(r=U==null?void 0:U.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!B){const Z=await A.request({method:"eth_chainId"});B=zA(Z)}const ue={domain:F.host,address:Y,statement:N,uri:F.href,version:"1",chainId:B,nonce:(i=U==null?void 0:U.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(a=U==null?void 0:U.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(f=U==null?void 0:U.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(p=U==null?void 0:U.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(g=U==null?void 0:U.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(y=U==null?void 0:U.signInWithEthereum)===null||y===void 0?void 0:y.resources};b=BA(ue),S=await A.request({method:"personal_sign",params:[VA(b),Y]})}try{const{data:T,error:E}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:S},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:ur});if(E)throw E;if(!T||!T.session||!T.user){const N=new Os;return this._returnResult({data:{user:null,session:null},error:N})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:E})}catch(T){if(Ne(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async signInWithSolana(e){var n,r,i,a,l,f,p,g,y,x,w,b;let S,T;if("message"in e)S=e.message,T=e.signature;else{const{chain:E,wallet:N,statement:U,options:A}=e;let F;if(tn())if(typeof N=="object")F=N;else{const Y=window;if("solana"in Y&&typeof Y.solana=="object"&&("signIn"in Y.solana&&typeof Y.solana.signIn=="function"||"signMessage"in Y.solana&&typeof Y.solana.signMessage=="function"))F=Y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=N}const q=new URL((n=A==null?void 0:A.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in F&&F.signIn){const Y=await F.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A==null?void 0:A.signInWithSolana),{version:"1",domain:q.host,uri:q.href}),U?{statement:U}:null));let B;if(Array.isArray(Y)&&Y[0]&&typeof Y[0]=="object")B=Y[0];else if(Y&&typeof Y=="object"&&"signedMessage"in Y&&"signature"in Y)B=Y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)S=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),T=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in F)||typeof F.signMessage!="function"||!("publicKey"in F)||typeof F!="object"||!F.publicKey||!("toBase58"in F.publicKey)||typeof F.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${q.host} wants you to sign in with your Solana account:`,F.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${q.href}`,`Issued At: ${(i=(r=A==null?void 0:A.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=A==null?void 0:A.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((l=A==null?void 0:A.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((f=A==null?void 0:A.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((p=A==null?void 0:A.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((g=A==null?void 0:A.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((x=(y=A==null?void 0:A.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||x===void 0)&&x.length?["Resources",...A.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const Y=await F.signMessage(new TextEncoder().encode(S),"utf8");if(!Y||!(Y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");T=Y}}try{const{data:E,error:N}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:Hs(T)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:ur});if(N)throw N;if(!E||!E.session||!E.user){const U=new Os;return this._returnResult({data:{user:null,session:null},error:U})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:N})}catch(E){if(Ne(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const n=await Ls(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:a,error:l}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ur});if(await en(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!a||!a.session||!a.user){const f=new Os;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:l})}catch(a){if(await en(this.storage,`${this.storageKey}-code-verifier`),Ne(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:a,nonce:l}=e,f=await ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ur}),{data:p,error:g}=f;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p||!p.session||!p.user){const y=new Os;return this._returnResult({data:{user:null,session:null},error:y})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:g})}catch(n){if(Ne(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,a,l;try{if("email"in e){const{email:f,options:p}=e;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await xi(this.storage,this.storageKey));const{error:x}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},create_user:(r=p==null?void 0:p.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:g,code_challenge_method:y},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in e){const{phone:f,options:p}=e,{data:g,error:y}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(i=p==null?void 0:p.data)!==null&&i!==void 0?i:{},create_user:(a=p==null?void 0:p.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(l=p==null?void 0:p.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:y})}throw new To("You must provide either an email or phone number.")}catch(f){if(await en(this.storage,`${this.storageKey}-code-verifier`),Ne(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(e){var n,r;try{let i,a;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:f}=await ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:ur});if(f)throw f;if(!l)throw new Error("An error occurred on token verification.");const p=l.session,g=l.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(i){if(Ne(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,a,l;try{let f=null,p=null;this.flowType==="pkce"&&([f,p]=await xi(this.storage,this.storageKey));const g=await ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:p}),headers:this.headers,xform:jA});return!((a=g.data)===null||a===void 0)&&a.url&&tn()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(f){if(await en(this.storage,`${this.storageKey}-code-verifier`),Ne(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new In;const{error:i}=await ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Ne(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:a}=e,{error:l}=await ze(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:r,type:i,options:a}=e,{data:l,error:f}=await ze(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:f})}throw new To("You must provide either an email or phone number and a type")}catch(n){if(Ne(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ls(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<jc:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await Ls(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=Uc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=RA(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:gs}):await this._useSession(async n=>{var r,i,a;const{data:l,error:f}=n;if(f)throw f;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new In}:await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:gs})})}catch(n){if(Ne(n))return gv(n)&&(await this._removeSession(),await en(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new In;const l=i.session;let f=null,p=null;this.flowType==="pkce"&&e.email!=null&&([f,p]=await xi(this.storage,this.storageKey));const{data:g,error:y}=await ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:p}),jwt:l.access_token,xform:gs});if(y)throw y;return l.user=g.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await en(this.storage,`${this.storageKey}-code-verifier`),Ne(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new In;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:l}=Lc(e.access_token);if(l.exp&&(r=l.exp,i=r<=n),i){const{data:f,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!f)return{data:{user:null,session:null},error:null};a=f}else{const{data:f,error:p}=await this._getUser(e.access_token);if(p)throw p;a={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(Ne(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:f}=n;if(f)throw f;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new In;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ne(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!tn())throw new Co("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Co(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new vd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Co("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new vd("No code detected.");const{data:U,error:A}=await this._exchangeCodeForSession(e.code);if(A)throw A;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:l,expires_in:f,expires_at:p,token_type:g}=e;if(!a||!f||!l||!g)throw new Co("No session defined in URL");const y=Math.round(Date.now()/1e3),x=parseInt(f);let w=y+x;p&&(w=parseInt(p));const b=w-y;b*1e3<=Si&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${x}s`);const S=w-x;y-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,w,y):y-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,w,y);const{data:T,error:E}=await this._getUser(a);if(E)throw E;const N={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:x,expires_at:w,refresh_token:l,token_type:g,user:T.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:N,redirectType:e.type},error:null})}catch(r){if(Ne(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ls(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({error:a});const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:f}=await this.admin.signOut(l,e);if(f&&!(pv(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return e!=="others"&&(await this._removeSession(),await en(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=yA(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await xi(this.storage,this.storageKey,!0));try{return await ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await en(this.storage,`${this.storageKey}-code-verifier`),Ne(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Ne(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var l,f,p,g,y;const{data:x,error:w}=a;if(w)throw w;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await ze(this.fetch,"GET",b,{headers:this.headers,jwt:(y=(g=x.session)===null||g===void 0?void 0:g.access_token)!==null&&y!==void 0?y:void 0})});if(i)throw i;return tn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Ne(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:a}}=n;if(i)throw i;const{options:l,provider:f,token:p,access_token:g,nonce:y}=e,x=await ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:f,id_token:p,access_token:g,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ur}),{data:w,error:b}=x;return b?this._returnResult({data:{user:null,session:null},error:b}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new Os}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:b}))}catch(i){if(await en(this.storage,`${this.storageKey}-code-verifier`),Ne(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:a,error:l}=n;if(l)throw l;return await ze(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Ne(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await _A(async i=>(i>0&&await wA(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ur})),(i,a)=>{const l=200*Math.pow(2,i);return a&&al(a)&&Date.now()+l-r<Si})}catch(r){if(this._debug(n,"error",r),Ne(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),tn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Ls(this.storage,this.storageKey);if(i&&this.userStorage){let l=await Ls(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await Ei(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:Uc()}else if(i&&!i.user&&!i.user){const l=await Ls(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(i.user=l.user,await en(this.storage,this.storageKey+"-user"),await Ei(this.storage,this.storageKey,i)):i.user=Uc()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<jc;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${jc}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),al(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:f}=await this._getUser(i.access_token);!f&&(l!=null&&l.user)?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new In;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Gl;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new In;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const f={data:a.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(a){if(this._debug(i,"error",a),Ne(a)){const l={data:null,error:a};return al(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,n)}catch(p){a.push(p)}});if(await Promise.all(l),a.length>0){for(let f=0;f<a.length;f+=1)console.error(a[f]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await en(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Ei(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=zm(i);await Ei(this.storage,this.storageKey,a)}else{const i=zm(n);await Ei(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await en(this.storage,this.storageKey),await en(this.storage,this.storageKey+"-code-verifier"),await en(this.storage,this.storageKey+"-user"),this.userStorage&&await en(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&tn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Si);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Si);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Si}ms, refresh threshold is ${md} ticks`),i<=md&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Wd)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,l]=await xi(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(f.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?this._returnResult({data:null,error:a}):await ze(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ne(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:p,error:g}=await ze(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return g?this._returnResult({data:null,error:g}):(e.factorType==="totp"&&p.type==="totp"&&(!((i=p==null?void 0:p.totp)===null||i===void 0)&&i.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(n){if(Ne(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?YA(e.webauthn.credential_response):QA(e.webauthn.credential_response)})}:{code:e.code}),{data:f,error:p}=await ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:p}))})}catch(n){if(Ne(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const l=await ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:f}=l;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:JA(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:KA(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ne(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Lc(r.access_token);let l=null;a.aal&&(l=a.aal);let f=l;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(y=>y.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(f="aal2");const g=a.amr||[];return{data:{currentLevel:l,nextLevel:f,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await ze(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new In})})}catch(n){if(Ne(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new In});const l=await ze(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return l.data&&l.data.redirect_url&&tn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(Ne(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new In});const l=await ze(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return l.data&&l.data.redirect_url&&tn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(Ne(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await ze(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new In})})}catch(e){if(Ne(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await ze(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new In})})}catch(n){if(Ne(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(f=>f.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(f=>f.kid===e),r&&this.jwks_cached_at+uA>i)return r;const{data:a,error:l}=await ze(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(f=>f.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:b,error:S}=await this.getSession();if(S||!b.session)return this._returnResult({data:null,error:S});r=b.session.access_token}const{header:i,payload:a,signature:l,raw:{header:f,payload:p}}=Lc(r);n!=null&&n.allowExpired||NA(a.exp);const g=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!g){const{error:b}=await this.getUser(r);if(b)throw b;return{data:{claims:a,header:i,signature:l},error:null}}const y=AA(i.alg),x=await crypto.subtle.importKey("jwk",g,y,!0,["verify"]);if(!await crypto.subtle.verify(y,x,l,gA(`${f}.${p}`)))throw new Nl("Invalid JWT signature");return{data:{claims:a,header:i,signature:l},error:null}}catch(r){if(Ne(r))return this._returnResult({data:null,error:r});throw r}}};Jd.nextInstanceID={};const o2=qd,a2=Jd,l2=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:o2,AuthApiError:hv,AuthClient:a2,AuthError:Li,AuthImplicitGrantRedirectError:Co,AuthInvalidCredentialsError:To,AuthInvalidJwtError:Nl,AuthInvalidTokenResponseError:Os,AuthPKCEGrantCodeExchangeError:vd,AuthRetryableFetchError:Cl,AuthSessionMissingError:In,AuthUnknownError:ps,AuthWeakPasswordError:xd,CustomAuthError:Gr,GoTrueAdminApi:qd,GoTrueClient:Jd,NavigatorLockAcquireTimeoutError:wv,SIGN_OUT_SCOPES:ll,isAuthApiError:pv,isAuthError:Ne,isAuthImplicitGrantRedirectError:mv,isAuthRetryableFetchError:al,isAuthSessionMissingError:gv,isAuthWeakPasswordError:cA,lockInternals:$s,navigatorLock:_v,processLock:FA},Symbol.toStringTag,{value:"Module"})),Sv=jo(l2);var Km;function u2(){if(Km)return ko;Km=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.SupabaseAuthClient=void 0;const t=Sv;let e=class extends t.AuthClient{constructor(r){super(r)}};return ko.SupabaseAuthClient=e,ko}var Ym;function Qm(){if(Ym)return Ja;Ym=1,Object.defineProperty(Ja,"__esModule",{value:!0});const t=Uy,e=By(),n=Qy,r=eA,i=nA(),a=rA(),l=sA(),f=u2();class p{constructor(y,x,w){var b,S,T;this.supabaseUrl=y,this.supabaseKey=x;const E=(0,l.validateSupabaseUrl)(y);if(!x)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",E),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",E),this.storageUrl=new URL("storage/v1",E),this.functionsUrl=new URL("functions/v1",E);const N=`sb-${E.hostname.split(".")[0]}-auth-token`,U={db:i.DEFAULT_DB_OPTIONS,realtime:i.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},i.DEFAULT_AUTH_OPTIONS),{storageKey:N}),global:i.DEFAULT_GLOBAL_OPTIONS},A=(0,l.applySettingDefaults)(w??{},U);this.storageKey=(b=A.auth.storageKey)!==null&&b!==void 0?b:"",this.headers=(S=A.global.headers)!==null&&S!==void 0?S:{},A.accessToken?(this.accessToken=A.accessToken,this.auth=new Proxy({},{get:(F,q)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(q)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((T=A.auth)!==null&&T!==void 0?T:{},this.headers,A.global.fetch),this.fetch=(0,a.fetchWithAuth)(x,this._getAccessToken.bind(this),A.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},A.realtime)),this.accessToken&&this.accessToken().then(F=>this.realtime.setAuth(F)).catch(F=>console.warn("Failed to set initial Realtime auth token:",F)),this.rest=new e.PostgrestClient(new URL("rest/v1",E).href,{headers:this.headers,schema:A.db.schema,fetch:this.fetch}),this.storage=new r.StorageClient(this.storageUrl.href,this.headers,this.fetch,w==null?void 0:w.storage),A.accessToken||this._listenForAuthEvents()}get functions(){return new t.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(y){return this.rest.from(y)}schema(y){return this.rest.schema(y)}rpc(y,x={},w={head:!1,get:!1,count:void 0}){return this.rest.rpc(y,x,w)}channel(y,x={config:{}}){return this.realtime.channel(y,x)}getChannels(){return this.realtime.getChannels()}removeChannel(y){return this.realtime.removeChannel(y)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var y,x;if(this.accessToken)return await this.accessToken();const{data:w}=await this.auth.getSession();return(x=(y=w.session)===null||y===void 0?void 0:y.access_token)!==null&&x!==void 0?x:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:y,persistSession:x,detectSessionInUrl:w,storage:b,userStorage:S,storageKey:T,flowType:E,lock:N,debug:U,throwOnError:A},F,q){const Y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new f.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},Y),F),storageKey:T,autoRefreshToken:y,persistSession:x,detectSessionInUrl:w,storage:b,userStorage:S,flowType:E,lock:N,debug:U,throwOnError:A,fetch:q,hasCustomAuthorizationHeader:Object.keys(this.headers).some(B=>B.toLowerCase()==="authorization")})}_initRealtimeClient(y){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},y),{params:Object.assign({apikey:this.supabaseKey},y==null?void 0:y.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((x,w)=>{this._handleTokenChanged(x,"CLIENT",w==null?void 0:w.access_token)})}_handleTokenChanged(y,x,w){(y==="TOKEN_REFRESHED"||y==="SIGNED_IN")&&this.changedAccessToken!==w?(this.changedAccessToken=w,this.realtime.setAuth(w)):y==="SIGNED_OUT"&&(this.realtime.setAuth(),x=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Ja.default=p,Ja}var Xm;function c2(){return Xm||(Xm=1,(function(t){var e=$r&&$r.__createBinding||(Object.create?(function(y,x,w,b){b===void 0&&(b=w);var S=Object.getOwnPropertyDescriptor(x,w);(!S||("get"in S?!x.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return x[w]}}),Object.defineProperty(y,b,S)}):(function(y,x,w,b){b===void 0&&(b=w),y[b]=x[w]})),n=$r&&$r.__exportStar||function(y,x){for(var w in y)w!=="default"&&!Object.prototype.hasOwnProperty.call(x,w)&&e(x,y,w)},r=$r&&$r.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const i=r(Qm());n(Sv,t);var a=By();Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return a.PostgrestError}});var l=Uy;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return l.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return l.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return l.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return l.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return l.FunctionRegion}}),n(Qy,t);var f=Qm();Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return r(f).default}});const p=(y,x,w)=>new i.default(y,x,w);t.createClient=p;function g(){if(typeof window<"u"||typeof process>"u")return!1;const y=process.version;if(y==null)return!1;const x=y.match(/^v(\d+)\./);return x?parseInt(x[1],10)<=18:!1}g()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})($r)),$r}var Ev=c2();const Tv=_d(Ev),d2=aw({__proto__:null,default:Tv},[Ev]),{PostgrestError:Y2,FunctionsHttpError:Q2,FunctionsFetchError:X2,FunctionsRelayError:Z2,FunctionsError:eI,FunctionRegion:tI,SupabaseClient:nI,createClient:f2,GoTrueAdminApi:rI,GoTrueClient:sI,AuthAdminApi:iI,AuthClient:oI,navigatorLock:aI,NavigatorLockAcquireTimeoutError:lI,lockInternals:uI,processLock:cI,SIGN_OUT_SCOPES:dI,AuthError:fI,AuthApiError:hI,AuthUnknownError:pI,CustomAuthError:gI,AuthSessionMissingError:mI,AuthInvalidTokenResponseError:yI,AuthInvalidCredentialsError:vI,AuthImplicitGrantRedirectError:xI,AuthPKCEGrantCodeExchangeError:wI,AuthRetryableFetchError:_I,AuthWeakPasswordError:bI,AuthInvalidJwtError:kI,isAuthError:SI,isAuthApiError:EI,isAuthSessionMissingError:TI,isAuthImplicitGrantRedirectError:CI,isAuthRetryableFetchError:NI,isAuthWeakPasswordError:AI,RealtimePresence:II,RealtimeChannel:RI,RealtimeClient:PI,REALTIME_LISTEN_TYPES:MI,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:DI,REALTIME_PRESENCE_LISTEN_EVENTS:jI,REALTIME_SUBSCRIBE_STATES:LI,REALTIME_CHANNEL_STATES:UI}=Tv||d2,h2=[{id:"admin_user",name:"Administrator",avatar:"https://ui-avatars.com/api/?name=Admin&background=000&color=fff",color:"bg-gray-800 text-white",role:"admin",password:"admin"}],p2=[],g2=[],m2=[],y2=[],v2="https://hjkmfodzhradtkeiyele.supabase.co",x2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imhqa21mb2R6aHJhZHRrZWl5ZWxlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI0ODIwNjEsImV4cCI6MjA2ODA1ODA2MX0.2cfezsLcT6x3KI9VqzrHntP80O-cy0JQUb7UK3Mnai8";let Rn=null;try{Rn=f2(v2,x2,{auth:{persistSession:!1},global:{headers:{"x-my-custom-header":"familienhub"}}}),console.log(" Connected to Supabase")}catch(t){console.error("Supabase init failed:",t)}class Cv{constructor(e,n){this.key=e,this.defaultVal=n}async delay(e=50){return new Promise(n=>setTimeout(n,e))}getStored(){try{const e=localStorage.getItem(this.key);return e?JSON.parse(e):this.defaultVal}catch{return this.defaultVal}}setStored(e){try{localStorage.setItem(this.key,JSON.stringify(e))}catch(n){console.error("Storage full or error",n)}}async getAll(){return await this.delay(),this.getStored()}async add(e){await this.delay();const n=this.getStored();if(!n.find(r=>r.id===e.id)){const r=[...n,e];return this.setStored(r),r}return n}async update(e,n){await this.delay();const i=this.getStored().map(a=>a.id===e?{...a,...n}:a);return this.setStored(i),i}async delete(e){await this.delay();const r=this.getStored().filter(i=>i.id!==e);return this.setStored(r),r}async setAll(e){return await this.delay(),this.setStored(e),e}}class w2{constructor(e,n,r){this.table=e,this.localFallback=new Cv(n,r)}sanitize(e){const n={...e};return this.table==="news"&&"readBy"in n&&delete n.readBy,n}async getAll(){if(Rn)try{const{data:e,error:n}=await Rn.from(this.table).select("*");if(!n&&e)return await this.localFallback.setAll(e),e;n&&console.warn(`[Supabase] Load warning (${this.table}): ${n.message}. Using fallback.`)}catch(e){console.warn(`[Supabase] Network error (${this.table}). Using fallback.`,e)}return this.localFallback.getAll()}async add(e){if(await this.localFallback.add(e),Rn)try{const n=this.sanitize(e),{error:r}=await Rn.from(this.table).insert(n);r&&console.error(`[Supabase] Add sync error (${this.table}):`,r.message)}catch(n){console.error(`[Supabase] Add network error (${this.table}):`,n)}return this.localFallback.getAll()}async update(e,n){if(await this.localFallback.update(e,n),Rn)try{const r=this.sanitize(n);if(Object.keys(r).length>0){const{error:i}=await Rn.from(this.table).update(r).eq("id",e);i&&console.error(`[Supabase] Update sync error (${this.table}):`,i.message)}}catch(r){console.error(`[Supabase] Update network error (${this.table}):`,r)}return this.localFallback.getAll()}async delete(e){if(await this.localFallback.delete(e),Rn)try{const{error:n}=await Rn.from(this.table).delete().eq("id",e);n&&console.error(`[Supabase] Delete sync error (${this.table}):`,n.message)}catch(n){console.error(`[Supabase] Delete network error (${this.table}):`,n)}return this.localFallback.getAll()}async setAll(e){if(await this.localFallback.setAll(e),Rn)try{if(e.length===0){const{error:n}=await Rn.from(this.table).delete().neq("id","0");n?console.error(`[Supabase] Clear error (${this.table}):`,n.message):console.log(`[Supabase] Cleared table ${this.table}`)}else{const n=e.map(a=>a.id).filter(a=>a);if(n.length>0){const a=`(${n.map(f=>`"${f}"`).join(",")})`,{error:l}=await Rn.from(this.table).delete().filter("id","not.in",a);l&&console.warn(`[Supabase] Bulk delete failed (${this.table}):`,l.message)}const r=e.map(a=>this.sanitize(a)),{error:i}=await Rn.from(this.table).upsert(r);i&&console.error(`[Supabase] Sync/Upsert error (${this.table}):`,i.message)}}catch(n){console.error("[Supabase] setAll exception",n)}return this.localFallback.getAll()}}const _2={fh_family:"family",fh_events:"events",fh_news:"news",fh_polls:"polls",fh_shopping:"shopping",fh_household:"household_tasks",fh_personal:"personal_tasks",fh_mealPlan:"meal_plans",fh_mealRequests:"meal_requests",fh_recipes:"recipes",fh_weather_favs:"weather_favs",fh_feedback:"feedback",fh_notifications:"notifications"},On=(t,e)=>{if(Rn){const n=_2[t];if(n)return new w2(n,t,e)}return new Cv(t,e)},De={family:On("fh_family",h2),events:On("fh_events",p2),news:On("fh_news",y2),polls:On("fh_polls",[]),shopping:On("fh_shopping",g2),householdTasks:On("fh_household",m2),personalTasks:On("fh_personal",[]),mealPlan:On("fh_mealPlan",[]),mealRequests:On("fh_mealRequests",[]),recipes:On("fh_recipes",[]),weatherFavorites:On("fh_weather_favs",[]),feedback:On("fh_feedback",[]),notifications:On("fh_notifications",[])};var Zm;(function(t){t[t.Sunday=1]="Sunday",t[t.Monday=2]="Monday",t[t.Tuesday=3]="Tuesday",t[t.Wednesday=4]="Wednesday",t[t.Thursday=5]="Thursday",t[t.Friday=6]="Friday",t[t.Saturday=7]="Saturday"})(Zm||(Zm={}));const bi=Pl("LocalNotifications",{web:()=>h0(()=>import("./web-DAcrnfs_.js"),[],import.meta.url).then(t=>new t.LocalNotificationsWeb)}),Oc=(t,e)=>{const[n,r]=j.useState(()=>{try{const i=localStorage.getItem(t);return i!==null?JSON.parse(i):e}catch{return e}});return j.useEffect(()=>{localStorage.setItem(t,JSON.stringify(n))},[t,n]),[n,r]},b2=3e4,k2=()=>{const t=Array.from({length:50}).map((e,n)=>({id:n,left:Math.random()*100,delay:Math.random()*5,duration:Math.random()*10+10,size:Math.random()*12+8}));return c.jsx("div",{className:"fixed inset-0 pointer-events-none z-[100] overflow-hidden",children:t.map(e=>c.jsx("div",{className:"absolute text-white/70 animate-rain",style:{left:`${e.left}%`,top:"-20px",fontSize:`${e.size}px`,animationDuration:`${e.duration}s`,animationDelay:`${e.delay}s`},children:e.id%2===0?"":""},e.id))})},S2=()=>{const[t,e]=j.useState(!0),[n,r]=j.useState([]),[i,a]=j.useState([]),[l,f]=j.useState([]),[p,g]=j.useState([]),[y,x]=j.useState([]),[w,b]=j.useState([]),[S,T]=j.useState([]),[E,N]=j.useState([]),[U,A]=j.useState([]),[F,q]=j.useState([]),[Y,B]=j.useState([]),[ue,Z]=j.useState([]),[me,_e]=j.useState([]),[Pe,we]=Oc("fh_darkmode",!1),[$e,Je]=Oc("fh_liquidglass",!1),[Le,Te]=Oc("fh_christmas",!1),J="de",[W,G]=j.useState(null),[I,z]=j.useState(pt.DASHBOARD),[pe,$]=j.useState(pt.DASHBOARD),[Q,de]=j.useState(null),oe=j.useRef(0);j.useRef(!1);const[Ie,He]=j.useState("select"),[qe,mt]=j.useState(null),[yt,kt]=j.useState(""),[he,ce]=j.useState(""),[Ue,Ae]=j.useState(!1),[Xe,nt]=j.useState(""),[dt,At]=j.useState(0),[St,Ft]=j.useState(!1),[Qt,K]=j.useState(!1),[ve,ge]=j.useState(""),[ft,Ze]=j.useState("parent"),[ot,Et]=j.useState(!1),[_n,hn]=j.useState(!1),Vt=j.useRef(Date.now());j.useEffect(()=>{(async()=>{try{const[H,se,le,tt,sn,Ht,Gt,on,qt,Bn,xr,kn,Jr]=await Promise.all([De.family.getAll(),De.events.getAll(),De.news.getAll(),De.shopping.getAll(),De.householdTasks.getAll(),De.personalTasks.getAll(),De.mealPlan.getAll(),De.mealRequests.getAll(),De.weatherFavorites.getAll(),De.recipes.getAll(),De.feedback.getAll(),De.polls.getAll(),De.notifications.getAll()]);r(H),a(se),f(le),g(tt),x(sn),b(Ht),T(Gt),N(on),A(qt),q(Bn),B(xr),Z(kn),_e(Jr)}catch(H){console.error("Failed to load backend data",H)}finally{e(!1)}})()},[]),j.useEffect(()=>{(async()=>{try{(await bi.checkPermissions()).display!=="granted"&&await bi.requestPermissions()}catch(H){console.log("Notification permissions not supported on web",H)}})()},[]),j.useEffect(()=>{if(!W)return;const M=setInterval(async()=>{const[H,se]=await Promise.all([De.news.getAll(),De.feedback.getAll()]);f(H),B(se);const le=Vt.current;H.filter(Ht=>{var Bn;const Gt=Ht.tag===`PRIVATE:${W.id}`,on=new Date(Ht.createdAt).getTime()>le,qt=!((Bn=Ht.readBy)!=null&&Bn.includes(W.id));return Gt&&on&&qt}).forEach(Ht=>{var on;const Gt=((on=n.find(qt=>qt.id===Ht.authorId))==null?void 0:on.name)||"Jemand";It("Neue Nachricht ",`${Gt}: ${Ht.description.substring(0,30)}...`)}),W.role==="admin"&&se.filter(Gt=>new Date(Gt.createdAt).getTime()>le&&!Gt.read).forEach(Gt=>{It("Neues Feedback ",`${Gt.userName} hat Feedback gesendet.`)});const sn=Date.now();sn-oe.current>36e5&&(await zn(),oe.current=sn),Vt.current=Date.now()},b2);return zn(),()=>clearInterval(M)},[W,n]);const zn=async()=>{let M=Q==null?void 0:Q.lat,H=Q==null?void 0:Q.lng,se=(Q==null?void 0:Q.name)||"Dein Standort";if(!M&&U.length>0&&(M=U[0].lat,H=U[0].lng,se=U[0].name),M&&H)try{const le=await Nd(M,H);if(le){const sn=(await bi.getPending()).notifications.filter(qt=>qt.id>=100&&qt.id<125).map(qt=>({id:qt.id}));sn.length>0&&await bi.cancel({notifications:sn});const Ht=[],Gt=new Date,on=Gt.getHours();for(let qt=1;qt<=12;qt++){const Bn=on+qt,xr=le.hourly.temperature_2m[Bn],kn=le.hourly.weather_code[Bn],Jr=le.hourly.time[Bn];if(xr!==void 0&&kn!==void 0&&Jr){const ct=Ad(kn),$o=Math.round(xr);let wr="";kn===0?wr="":kn<=3?wr="":kn>=45&&kn<=48?wr="":kn>=51&&kn<=67?wr="":kn>=71?wr="":kn>=95&&(wr="");const Ks=new Date(Jr);Ks>Gt&&Ht.push({id:100+qt,title:`${wr} Wetter in ${se}`,body:`${$o}C und ${ct}.`,schedule:{at:Ks},smallIcon:"ic_stat_logo",sound:void 0})}}Ht.length>0&&(await bi.schedule({notifications:Ht}),console.log(`Scheduled ${Ht.length} weather notifications.`))}}catch(le){console.error("Weather schedule error:",le)}};j.useEffect(()=>{if(!t&&n.length>0&&!W){const M=localStorage.getItem("fh_session_user");if(M){const H=n.find(se=>se.id===M);H&&G(H)}}},[t,n,W]),j.useEffect(()=>{Pe?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),$e?document.body.classList.add("liquid-glass"):document.body.classList.remove("liquid-glass")},[Pe,$e]);const It=async(M,H)=>{const se={id:Date.now().toString()+Math.random(),title:M,message:H,type:"info",timestamp:new Date().toISOString(),read:!1};_e(le=>[se,...le]),await De.notifications.add(se);try{await bi.schedule({notifications:[{title:M,body:H,id:Math.floor(Math.random()*1e6),schedule:{at:new Date(Date.now()+100)},sound:void 0,attachments:[],actionTypeId:"",extra:null,smallIcon:"ic_stat_logo"}]})}catch{console.debug("System notification skipped")}},pn=async()=>{_e([]),(await De.notifications.getAll()).length>0&&await De.notifications.setAll([])},ne=async M=>{a(se=>[...se,M]),await De.events.add(M);const H=(W==null?void 0:W.name)||"Jemand";await It("Neuer Termin ",`${H} hat "${M.title}" am ${new Date(M.date).toLocaleDateString()} erstellt.`)},Ke=async(M,H)=>{a(se=>se.map(le=>le.id===M?{...le,...H}:le)),await De.events.update(M,H)},rt=async M=>{a(H=>H.filter(se=>se.id!==M)),await De.events.delete(M)},ht=async M=>{var H;if(f(se=>[M,...se]),await De.news.add(M),!((H=M.tag)!=null&&H.startsWith("PRIVATE:"))){const se=(W==null?void 0:W.name)||"Jemand";await It("Pinnwand ",`${se} hat "${M.title}" gepostet.`)}},Re=async(M,H)=>{f(se=>se.map(le=>le.id===M?{...le,...H}:le)),await De.news.update(M,H)},je=async M=>{f(H=>H.filter(se=>se.id!==M)),await De.news.delete(M)},ut=async M=>{if(!W)return;const H=l.find(se=>se.id===M);if(H){const se=[...H.readBy||[],W.id];f(le=>le.map(tt=>tt.id===M?{...tt,readBy:se}:tt)),await De.news.update(M,{readBy:se})}},Bt=async M=>{Z(se=>[M,...se]),await De.polls.add(M);const H=(W==null?void 0:W.name)||"Jemand";await It("Neue Umfrage ",`${H} fragt: "${M.question}"`)},Mn=async(M,H)=>{Z(se=>se.map(le=>le.id===M?{...le,...H}:le)),await De.polls.update(M,H)},gn=async M=>{Z(H=>H.filter(se=>se.id!==M)),await De.polls.delete(M)},Nr=async M=>{const H=p.find(se=>se.id===M);if(H){const se={...H,checked:!H.checked};g(le=>le.map(tt=>tt.id===M?se:tt)),await De.shopping.update(M,{checked:se.checked})}},qr=async(M,H,se)=>{const le={id:Date.now().toString(),name:M,checked:!1,note:H,category:se};g(tt=>[...tt,le]),await De.shopping.add(le),await It("Einkaufsliste ",`"${M}" wurde hinzugefgt.`)},Xn=async M=>{g(H=>H.filter(se=>se.id!==M)),await De.shopping.delete(M)},Zn=async M=>{const H=M.map(le=>({id:Date.now().toString()+Math.random(),name:le,checked:!1}));g(le=>[...le,...H]);const se=await De.shopping.getAll();await De.shopping.setAll([...se,...H]),await It("Einkaufsliste ",`${M.length} Zutaten aus Rezept hinzugefgt.`)},er=async(M,H,se="medium",le)=>{const tt={id:Date.now().toString(),title:M,done:!1,assignedTo:H,type:"household",priority:se,note:le};x(sn=>[...sn,tt]),await De.householdTasks.add(tt)},Wr=async(M,H="medium",se)=>{const le={id:Date.now().toString(),title:M,done:!1,type:"personal",priority:H,note:se};b(tt=>[...tt,le]),await De.personalTasks.add(le)},tr=async(M,H)=>{if(H==="household"){const se=y.find(le=>le.id===M);se&&(x(le=>le.map(tt=>tt.id===M?{...tt,done:!tt.done}:tt)),await De.householdTasks.update(M,{done:!se.done}))}else{const se=w.find(le=>le.id===M);se&&(b(le=>le.map(tt=>tt.id===M?{...tt,done:!tt.done}:tt)),await De.personalTasks.update(M,{done:!se.done}))}},gr=async(M,H)=>{H==="household"?(x(se=>se.filter(le=>le.id!==M)),await De.householdTasks.delete(M)):(b(se=>se.filter(le=>le.id!==M)),await De.personalTasks.delete(M))},mr=async M=>{T(M),await De.mealPlan.setAll(M)},Ar=()=>{It("Wochenplan erstellt ","Dein neuer Essensplan fr die Woche ist fertig!")},xs=async(M,H,se)=>{const le=S.find(on=>on.day===M),tt=le?le.id:Date.now().toString()+Math.random().toString().slice(2,5),sn=S.filter(on=>on.day!==M),Ht={id:tt,day:M,mealName:H,ingredients:se,recipeHint:"Aus Rezeptlager",breakfast:(le==null?void 0:le.breakfast)||"",lunch:(le==null?void 0:le.lunch)||""},Gt=[...sn,Ht];T(Gt),await De.mealPlan.setAll(Gt)},ws=async M=>{if(W){const H={id:Date.now().toString(),dishName:M,requestedBy:W.id,createdAt:new Date().toISOString()};N(le=>[...le,H]),await De.mealRequests.add(H);const se=W.name;await It("Essenswunsch ",`${se} wnscht sich: ${M}`)}},_s=async M=>{N(H=>H.filter(se=>se.id!==M)),await De.mealRequests.delete(M)},bn=async M=>{q(H=>[...H,M]),await De.recipes.add(M)},Ir=async(M,H)=>{q(se=>se.map(le=>le.id===M?{...le,...H}:le)),await De.recipes.update(M,H)},re=async M=>{q(H=>H.filter(se=>se.id!==M)),await De.recipes.delete(M)},Me=async(M,H)=>{r(se=>se.map(le=>le.id===M?{...le,...H}:le)),W&&W.id===M&&G({...W,...H}),await De.family.update(M,H)},D=async(M,H)=>{const se=Math.floor(Math.random()*1e3),le={id:Date.now().toString(),name:M.trim(),avatar:`https://picsum.photos/200/200?random=${se}`,color:H==="parent"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700",role:H};return await De.family.add(le),r(tt=>[...tt,le]),le},fe=async M=>{if(n.length<=1){alert("Der letzte Benutzer kann nicht gelscht werden.");return}r(H=>H.filter(se=>se.id!==M)),await De.family.delete(M)},Ve=async M=>{const H={password:void 0};r(se=>se.map(le=>le.id===M?{...le,...H}:le)),await De.family.update(M,H)},gt=async M=>{B(H=>[...H,M]),await De.feedback.add(M),It("Feedback gesendet ","Danke fr dein Feedback!")},Tt=async M=>{B(H=>H.map(se=>M.includes(se.id)?{...se,read:!0}:se));for(const H of M)await De.feedback.update(H,{read:!0})},Qe=()=>{localStorage.removeItem("fh_session_user"),G(null),z(pt.DASHBOARD),He("select"),mt(null),kt("")},We=async M=>{const H=U.find(se=>se.name===M.name);H?(A(se=>se.filter(le=>le.name!==M.name)),await De.weatherFavorites.delete(H.id)):(A(se=>[...se,M]),await De.weatherFavorites.add(M))},jt=()=>{$(I),z(pt.SETTINGS)},Vn=M=>{mt(M),kt(""),ce(""),Ft(!1),M.password?He("enter-pass"):He("set-pass")},Rr=async M=>{if(M.preventDefault(),!!ve.trim()){Et(!0);try{const H=await D(ve,ft);H&&(W?hn(!1):(G(H),localStorage.setItem("fh_session_user",H.id))),ge("")}catch(H){console.error("Setup failed",H)}finally{Et(!1)}}},nr=M=>{if(M.preventDefault(),!(!qe||!yt.trim()))if(Ie==="set-pass"){if(yt.trim().length<4){ce("Das Passwort muss mindestens 4 Zeichen lang sein.");return}Me(qe.id,{password:yt}),G({...qe,password:yt}),localStorage.setItem("fh_session_user",qe.id)}else yt===qe.password?(G(qe),localStorage.setItem("fh_session_user",qe.id)):ce(Ye("login.wrong_pass",J))},bs=()=>{At(M=>M+1>=5?(Ae(!0),ce(""),nt(""),K(!1),0):M+1)},yr=M=>{M.preventDefault();const H=n.find(se=>se.role==="admin");if(!H){ce("Kein Administrator konfiguriert.");return}Xe===H.password?(G(H),localStorage.setItem("fh_session_user",H.id),Ae(!1),nt(""),ce("")):ce("Zugriff verweigert. Falsches Passwort.")};if(t)return c.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex flex-col items-center justify-center",children:[c.jsx(gl,{size:80,className:"animate-pulse mb-4"}),c.jsx(Cr,{className:"animate-spin text-blue-500",size:32}),c.jsx("p",{className:"mt-4 text-gray-500 font-medium",children:"Lade Familiendaten..."})]});const mn=()=>Le?"bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-red-100 via-green-50 to-red-100 dark:from-red-900/40 dark:via-green-900/20 dark:to-slate-900":$e?"bg-transparent":"bg-gray-50 dark:bg-gray-900";if(!W)return c.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-950 flex flex-col items-center justify-center p-6 transition-colors relative overflow-hidden",children:[c.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0 pointer-events-none",children:[c.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-blue-400/10 rounded-full blur-[100px]"}),c.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-400/10 rounded-full blur-[100px]"})]}),c.jsxs("div",{className:"text-center mb-10 animate-fade-in flex flex-col items-center z-10",children:[c.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-[30px] shadow-xl mb-6 ring-1 ring-black/5 dark:ring-white/10 active:scale-95 transition-transform cursor-pointer select-none",onClick:bs,children:c.jsx(gl,{size:80})}),c.jsx("h1",{className:"text-4xl font-extrabold text-gray-800 dark:text-white mb-2 tracking-tight",children:"FamilienHub"}),c.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:Ye("login.welcome",J)})]}),n.length>0&&!_n?c.jsx("div",{className:"w-full max-w-md z-10",children:c.jsx("div",{className:"grid grid-cols-2 gap-4 animate-slide-in",children:n.filter(M=>M.role!=="admin").sort((M,H)=>M.role==="parent"&&H.role!=="parent"?-1:M.role!=="parent"&&H.role==="parent"?1:M.role==="parent"?M.id.localeCompare(H.id):H.id.localeCompare(M.id)).map(M=>c.jsxs("button",{onClick:()=>Vn(M),className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col items-center hover:scale-105 hover:shadow-md active:scale-95 transition-all group relative",children:[c.jsxs("div",{className:"relative mb-3",children:[c.jsx("img",{src:M.avatar,alt:M.name,className:"w-16 h-16 rounded-full object-cover ring-4 ring-gray-50 dark:ring-gray-700 group-hover:ring-blue-50 dark:group-hover:ring-blue-900/50 transition-all"}),M.password&&c.jsx("div",{className:"absolute -bottom-1 -right-1 bg-white dark:bg-gray-800 p-1 rounded-full border border-gray-100 dark:border-gray-700 text-gray-400",children:c.jsx(o0,{size:12})})]}),c.jsx("span",{className:"font-bold text-base text-gray-800 dark:text-gray-200",children:M.name})]},M.id))})}):c.jsx("div",{className:"w-full max-w-xs animate-fade-in z-10 relative",children:c.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl p-6 rounded-3xl shadow-2xl border border-white/20 dark:border-gray-700",children:[n.length>0&&c.jsx("button",{onClick:()=>hn(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:c.jsx(wt,{size:20})}),c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-1",children:n.length===0?"Neu hier?":"Neues Mitglied"}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:n.length===0?"Erstelle das erste Profil.":"Fge jemanden hinzu."})]}),c.jsxs("form",{onSubmit:Rr,children:[c.jsx("div",{className:"mb-4",children:c.jsx("input",{type:"text",placeholder:"Name (z.B. Mama)",value:ve,onChange:M=>ge(M.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl px-4 py-3 text-center text-lg font-semibold outline-none focus:ring-2 focus:ring-blue-500 dark:text-white placeholder-gray-400 transition-all",autoFocus:!0})}),c.jsxs("div",{className:"flex gap-2 mb-6 p-1 bg-gray-100 dark:bg-gray-700/50 rounded-xl",children:[c.jsx("button",{type:"button",onClick:()=>Ze("parent"),className:`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all flex items-center justify-center space-x-1 ${ft==="parent"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-300 shadow-sm":"text-gray-400 dark:text-gray-500 hover:text-gray-600"}`,children:c.jsx("span",{children:"Elternteil"})}),c.jsx("button",{type:"button",onClick:()=>Ze("child"),className:`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all flex items-center justify-center space-x-1 ${ft==="child"?"bg-white dark:bg-gray-600 text-green-600 dark:text-green-300 shadow-sm":"text-gray-400 dark:text-gray-500 hover:text-gray-600"}`,children:c.jsx("span",{children:"Kind"})})]}),c.jsx("button",{type:"submit",disabled:!ve.trim()||ot,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3.5 rounded-xl shadow-lg shadow-blue-500/30 active:scale-95 transition disabled:opacity-50 flex justify-center items-center",children:ot?c.jsx(Cr,{className:"animate-spin",size:20}):c.jsxs("span",{className:"flex items-center",children:["Erstellen ",c.jsx(bw,{size:18,className:"ml-2"})]})})]})]})}),(Ie==="enter-pass"||Ie==="set-pass")&&qe&&c.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md z-50 flex items-center justify-center p-4 animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl w-full max-w-xs p-8 relative animate-slide-up ring-1 ring-white/20",children:[c.jsx("button",{onClick:()=>{He("select"),mt(null)},className:"absolute top-5 right-5 text-gray-400 hover:text-gray-600 bg-gray-100 dark:bg-gray-700 rounded-full p-1 transition",children:c.jsx(wt,{size:20})}),c.jsxs("div",{className:"flex flex-col items-center mb-8",children:[c.jsx("div",{className:"relative",children:c.jsx("img",{src:qe.avatar,className:"w-20 h-20 rounded-full mb-4 ring-4 ring-white dark:ring-gray-700 shadow-md"})}),c.jsxs("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white tracking-tight",children:[Ye("login.hello",J)," ",qe.name]}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:Ye(Ie==="set-pass"?"login.create_pass":"login.enter_pass",J)})]}),c.jsxs("form",{onSubmit:nr,children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:St?"text":"password",autoFocus:!0,value:yt,onChange:M=>{kt(M.target.value),ce("")},placeholder:Ye(Ie==="set-pass"?"login.new_pass_placeholder":"login.pass_placeholder",J),className:`w-full bg-gray-50 dark:bg-gray-700 border ${he?"border-red-500 text-red-500":"border-gray-200 dark:border-gray-600"} rounded-2xl px-4 py-4 pr-12 text-center text-xl tracking-widest mb-6 outline-none focus:ring-4 focus:ring-blue-500/20 transition-all dark:text-white`}),c.jsx("button",{type:"button",onClick:()=>Ft(!St),className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:St?c.jsx(Pp,{size:20}):c.jsx(Ro,{size:20})}),he&&c.jsx("div",{className:"absolute -bottom-5 left-0 right-0 text-red-500 text-xs text-center font-bold animate-pulse",children:he})]}),c.jsx("button",{type:"submit",disabled:!yt.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-2xl shadow-xl shadow-blue-500/20 active:scale-95 transition disabled:opacity-50 disabled:shadow-none",children:Ye(Ie==="set-pass"?"login.set_pass_btn":"login.login_btn",J)})]})]})}),Ue&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-red-950/80 backdrop-blur-md animate-fade-in",children:c.jsxs("div",{className:"bg-gray-900 w-full max-w-sm rounded-3xl shadow-2xl p-8 relative border border-red-500/30 ring-4 ring-red-500/10 animate-slide-up",children:[c.jsx("button",{onClick:()=>{Ae(!1),nt(""),ce(""),K(!1)},className:"absolute top-4 right-4 text-red-400 hover:text-red-200 bg-red-950/50 rounded-full p-1 transition",children:c.jsx(wt,{size:20})}),c.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[c.jsx("div",{className:"w-16 h-16 bg-red-900/30 rounded-full flex items-center justify-center mb-4 border border-red-500/50",children:c.jsx(Kw,{size:32,className:"text-red-500"})}),c.jsx("h3",{className:"text-xl font-black text-red-500 uppercase tracking-widest",children:"System berschreibung"}),c.jsxs("p",{className:"text-xs text-red-300 font-mono mt-2 bg-red-950/50 px-2 py-1 rounded",children:[c.jsx(ww,{size:10,className:"inline mr-1"}),"ADMINBEREICH: Nur erlaubter Zutritt"]})]}),c.jsxs("form",{onSubmit:yr,children:[c.jsxs("div",{className:"relative mb-6",children:[c.jsx("input",{type:Qt?"text":"password",autoFocus:!0,value:Xe,onChange:M=>{nt(M.target.value),ce("")},placeholder:"Admin Passwort",className:`w-full bg-black/50 border ${he?"border-red-500":"border-red-900"} rounded-xl px-4 py-4 pr-12 text-center text-white placeholder-red-800/50 outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500 transition-all font-mono tracking-wider`}),c.jsx("button",{type:"button",onClick:()=>K(!Qt),className:"absolute right-4 top-4 text-red-400 hover:text-red-200",children:Qt?c.jsx(Pp,{size:20}):c.jsx(Ro,{size:20})}),he&&c.jsx("div",{className:"absolute -bottom-6 left-0 right-0 text-red-500 text-xs text-center font-bold animate-pulse",children:he})]}),c.jsx("button",{type:"submit",disabled:!Xe.trim(),className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-4 rounded-xl shadow-lg shadow-red-900/20 active:scale-95 transition disabled:opacity-50 disabled:shadow-none uppercase tracking-wide text-sm",children:"Zugriff Gewhren"})]})]})})]});const nn=y.filter(M=>M.assignedTo===W.id&&!M.done).length+w.filter(M=>!M.done).length,vr=n.filter(M=>M.role!=="admin"),rn={notifications:me,markAllRead:()=>_e(M=>M.map(H=>({...H,read:!0}))),clearAll:pn},Js=()=>{const M=()=>{switch(I){case pt.DASHBOARD:return c.jsx(C_,{family:vr,currentUser:W,events:i,shoppingCount:p.filter(H=>!H.checked).length,openTaskCount:nn,todayMeal:S[0],onNavigate:z,onProfileClick:jt,lang:J,weatherFavorites:U,currentWeatherLocation:Q,onUpdateWeatherLocation:de,news:l});case pt.CALENDAR:return c.jsx($p,{events:i,news:l,polls:ue,family:vr,onAddEvent:ne,onUpdateEvent:Ke,onDeleteEvent:rt,onAddNews:ht,onUpdateNews:Re,onDeleteNews:je,onAddPoll:Bt,onUpdatePoll:Mn,onDeletePoll:gn,currentUser:W,onProfileClick:jt,initialTab:"calendar",onMarkNewsRead:ut});case pt.NEWS:return c.jsx($p,{events:i,news:l,polls:ue,family:vr,onAddEvent:ne,onUpdateEvent:Ke,onDeleteEvent:rt,onAddNews:ht,onUpdateNews:Re,onDeleteNews:je,onAddPoll:Bt,onUpdatePoll:Mn,onDeletePoll:gn,currentUser:W,onProfileClick:jt,initialTab:"news",onMarkNewsRead:ut});case pt.LISTS:return c.jsx(BC,{shoppingItems:p,householdTasks:y,personalTasks:w,recipes:F,family:vr,currentUser:W,onToggleShopping:Nr,onAddShopping:qr,onDeleteShopping:Xn,onAddHousehold:er,onToggleTask:tr,onAddPersonal:Wr,onDeleteTask:gr,onAddRecipe:bn,onDeleteRecipe:re,onUpdateRecipe:Ir,onAddIngredientsToShopping:Zn,onAddMealToPlan:xs,onProfileClick:jt});case pt.MEALS:return c.jsx(HC,{plan:S,requests:E,family:vr,currentUser:W,onUpdatePlan:mr,onAddRequest:ws,onDeleteRequest:_s,onAddIngredientsToShopping:Zn,onProfileClick:jt,recipes:F,onAddRecipe:bn,onPlanGenerated:Ar});case pt.ACTIVITIES:return c.jsx(GC,{onProfileClick:jt});case pt.WEATHER:return c.jsx(tN,{onBack:()=>z(pt.DASHBOARD),favorites:U,onToggleFavorite:We,initialLocation:Q,liquidGlass:$e});case pt.SETTINGS:return c.jsx(KC,{currentUser:W,onUpdateUser:H=>Me(W.id,H),onUpdateFamilyMember:Me,onLogout:Qe,onClose:()=>z(pe),darkMode:Pe,onToggleDarkMode:()=>we(!Pe),liquidGlass:$e,onToggleLiquidGlass:()=>Je(!$e),christmasMode:Le,onToggleChristmasMode:()=>Te(!Le),lang:J,setLang:()=>{},family:n,onResetPassword:Ve,onSendFeedback:gt,allFeedbacks:Y,onMarkFeedbackRead:Tt,onAddNews:ht,news:l,onDeleteNews:je,onAddUser:D,onDeleteUser:fe,onMarkNewsRead:ut});default:return null}};return c.jsx("div",{className:"page-transition-wrapper",children:M()},I)};return c.jsxs(nN.Provider,{value:rn,children:[Le&&c.jsx(k2,{}),c.jsxs("div",{className:`min-h-screen transition-all duration-500 overflow-x-hidden ${I===pt.WEATHER?"":"pb-20"} ${mn()}`,children:[Js(),c.jsx(f_,{currentRoute:I,onNavigate:z,lang:J,christmasMode:Le})]})]})},Nv=document.getElementById("root");if(!Nv)throw new Error("Could not find root element to mount to");const E2=yw.createRoot(Nv);E2.render(c.jsx(e0.StrictMode,{children:c.jsx(S2,{})}));export{g0 as W};
